/*! For license information please see main.d87ae7ee.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,a)&&!S.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:_.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+C(l,0):s,x(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=T(o,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,a,u=s+C(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(n,e,a++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(v=!1,w(e),!m)if(null!==r(c))m=!0,I(k);else{var t=r(u);null!==t&&A(x,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(N),N=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),w(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&A(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,j=null,N=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function R(){if(null!==j){var e=t.unstable_now();C=e;var n=!0;try{n=j(!0,e)}finally{n?_():(S=!1,j=null)}}else S=!1}if("function"===typeof b)_=function(){b(R)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=R,_=function(){P.postMessage(null)}}else _=function(){g(R,0)};function I(e){j=e,S||(S=!0,_())}function A(e,n){N=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(v?(y(N),N=-1):v=!0,A(x,s-i))):(e.sortIndex=o,n(c,e),m||p||(m=!0,I(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){e.exports=n(153)},730(e,t,n){var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var L,M=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function F(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case j:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Se=null;function je(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=xa(t),ke(e.stateNode,e.type,t))}}function Ne(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ee(){if(_e){var e=_e,t=Se;if(Se=_e=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Re=!1;function Oe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==_e||null!==Se)&&(Te(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ie=!1;if(u)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ue){Ie=!1}function De(e,t,n,r,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,ze=!1,Ue=null,Fe={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,a,s,i,o,l){Le=!1,Me=null,De.apply(Fe,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ke(a),e;if(i===r)return Ke(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Je=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Xe=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~a;0!==o?r=dt(o):0!==(s&=i)&&(r=dt(s))}else 0!==(i=n&~a)?r=dt(i):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,_t,St,jt,Nt=!1,Et=[],Ct=null,Tt=null,Rt=null,Ot=new Map,Pt=new Map,It=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void jt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Ft(){Nt=!1,null!==Ct&&zt(Ct)&&(Ct=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==Rt&&zt(Rt)&&(Rt=null),Ot.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ft)))}function qt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Tt&&Bt(Tt,e),null!==Rt&&Bt(Rt,e),Ot.forEach(t),Pt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Mt(n),null===n.blockedOn&&It.shift()}var Wt=w.ReactCurrentBatchConfig,Kt=!0;function Vt(e,t,n,r){var a=bt,s=Wt.transition;Wt.transition=null;try{bt=1,Jt(e,t,n,r)}finally{bt=a,Wt.transition=s}}function Ht(e,t,n,r){var a=bt,s=Wt.transition;Wt.transition=null;try{bt=4,Jt(e,t,n,r)}finally{bt=a,Wt.transition=s}}function Jt(e,t,n,r){if(Kt){var a=$t(e,t,n,r);if(null===a)Kr(e,t,r,Gt,n),Dt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,a),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,a),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Ot.set(s,Lt(Ot.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&xt(s),null===(s=$t(e,t,n,r))&&Kr(e,t,r,Gt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Gt=null;function $t(e,t,n,r){if(Gt=null,null!==(e=ya(e=xe(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=M({},cn,{view:0,detail:0}),hn=an(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),mn=an(M({},fn,{dataTransfer:0})),vn=an(M({},dn,{relatedTarget:0})),gn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function jn(){return Sn}var Nn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Nn),Cn=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Rn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(On),In=[9,13,27,32],An=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!An||Dn&&8<Dn&&11>=Dn),zn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ne(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Jn=null;function Gn(e){zr(e,0)}function $n(e){if(J(wa(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Jn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Jn)){var t=[];Vn(t,Jn,e,xe(e)),Oe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Jn)}function sr(e,t){if("click"===e)return $n(t)}function ir(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=ur(n,s);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==G(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Sr={};function jr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=jr("animationend"),Er=jr("animationiteration"),Cr=jr("animationstart"),Tr=jr("transitionend"),Rr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Or.length;Ir++){var Ar=Or[Ir];Pr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Pr(Nr,"onAnimationEnd"),Pr(Er,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,ze||(ze=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;Mr(a,o,c),s=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Fr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var a=Vt;break;case 4:a=Ht;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Oe(function(){var r=s,a=xe(n),i=[];e:{var o=Rr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=vn;break;case"focusout":c="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Nr:case Er:case Cr:l=gn;break;case Tr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Vr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,a),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:wa(l),f=null==c?o:wa(c),(o=new u(m,p+"leave",l,n,a)).target=d,o.relatedTarget=f,m=null,ya(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Jr(f))p++;for(f=0,m=h;m;m=Jr(m))f++;for(;0<p-f;)u=Jr(u),p--;for(;0<f-p;)h=Jr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Jr(u),h=Jr(h)}u=null}else u=null;null!==l&&Gr(i,o,l,u,!1),null!==c&&null!==d&&Gr(i,d,c,u,!0)}if("select"===(l=(o=r?wa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var v=Yn;else if(Kn(o))if(Xn)v=ir;else{v=ar;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(v=sr);switch(v&&(v=v(e,r))?Vn(i,v,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?wa(r):window,e){case"focusin":(Kn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):(Qt="value"in(Xt=a)?Xt.value:Xt.textContent,qn=!0)),0<(g=Hr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:g}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!An&&Fn(e,t)?(e=en(),Zt=Qt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}zr(i,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,n))&&r.unshift(Vr(e,s,a)),null!=(s=Pe(e,t))&&r.push(Vr(e,s,a))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Pe(n,s))&&i.unshift(Vr(n,l,o)):a||null!=(l=Pe(n,s))&&i.push(Vr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);qt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xa(e){return e[fa]||null}var ka=[],_a=-1;function Sa(e){return{current:e}}function ja(e){0>_a||(e.current=ka[_a],ka[_a]=null,_a--)}function Na(e,t){_a++,ka[_a]=e.current,e.current=t}var Ea={},Ca=Sa(Ea),Ta=Sa(!1),Ra=Ea;function Oa(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){ja(Ta),ja(Ca)}function Aa(e,t,n){if(Ca.current!==Ea)throw Error(s(168));Na(Ca,t),Na(Ta,n)}function Da(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,W(e)||"Unknown",a));return M({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ra=Ca.current,Na(Ca,e),Na(Ta,Ta.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Da(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,ja(Ta),ja(Ca),Na(Ca,e)):ja(Ta),Na(Ta,n)}var za=null,Ua=!1,Fa=!1;function Ba(e){null===za?za=[e]:za.push(e)}function qa(){if(!Fa&&null!==za){Fa=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ua=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Je(Ze,qa),a}finally{bt=t,Fa=!1}}return null}var Wa=[],Ka=0,Va=null,Ha=0,Ja=[],Ga=0,$a=null,Ya=1,Xa="";function Qa(e,t){Wa[Ka++]=Ha,Wa[Ka++]=Va,Va=e,Ha=t}function Za(e,t,n){Ja[Ga++]=Ya,Ja[Ga++]=Xa,Ja[Ga++]=$a,$a=e;var r=Ya;e=Xa;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ya=1<<32-it(t)+a|n<<a|r,Xa=s+e}else Ya=1<<s|n<<a|r,Xa=e}function es(e){null!==e.return&&(Qa(e,1),Za(e,1,0))}function ts(e){for(;e===Va;)Va=Wa[--Ka],Wa[Ka]=null,Ha=Wa[--Ka],Wa[Ka]=null;for(;e===$a;)$a=Ja[--Ga],Ja[Ga]=null,Xa=Ja[--Ga],Ja[Ga]=null,Ya=Ja[--Ga],Ja[Ga]=null}var ns=null,rs=null,as=!1,ss=null;function is(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$a?{id:Ya,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&os(e,t)?is(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!as)return us(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ca(e.nextSibling)}function fs(){rs=ns=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=a(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case k:return(t=zc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;gs(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?u(e,t,n,r):null;case P:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||D(n))return null!==a?null:d(e,t,n,r,null);gs(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,a,null);gs(t,r)}return null}function m(a,s,o,l){for(var c=null,u=null,d=s,m=s=0,v=null;null!==d&&m<o.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(a,d,o[m],l);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,m),null===u?c=g:u.sibling=g,u=g,d=v}if(m===o.length)return n(a,d),as&&Qa(a,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(a,o[m],l))&&(s=i(d,s,m),null===u?c=d:u.sibling=d,u=d);return as&&Qa(a,m),c}for(d=r(a,d);m<o.length;m++)null!==(v=p(d,a,m,o[m],l))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),s=i(v,s,m),null===u?c=v:u.sibling=v,u=v);return e&&d.forEach(function(e){return t(a,e)}),as&&Qa(a,m),c}function v(a,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,v=o=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=f(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),o=i(b,o,v),null===d?u=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),as&&Qa(a,v),u;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,v),null===d?u=y:d.sibling=y,d=y);return as&&Qa(a,v),u}for(m=r(a,m);!y.done;v++,y=l.next())null!==(y=p(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),o=i(y,o,v),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),as&&Qa(a,v),u}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=s;null!==u;){if(u.key===c){if((c=i.type)===_){if(7===u.tag){n(r,u.sibling),(s=a(u,i.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===u.type){n(r,u.sibling),(s=a(u,i.props)).ref=vs(r,u,i),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===_?((s=Dc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Ac(i.type,i.key,i.props,null,r.mode,l)).ref=vs(r,s,i),l.return=r,r=l)}return o(r);case k:e:{for(u=i.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zc(i,r.mode,l)).return=r,r=s}return o(r);case P:return e(r,s,(u=i._init)(i._payload),l)}if(te(i))return m(r,s,i,l);if(D(i))return v(r,s,i,l);gs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Mc(i,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),ks=Sa(null),_s=null,Ss=null,js=null;function Ns(){js=Ss=_s=null}function Es(e){var t=ks.current;ja(ks),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){_s=e,js=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(js!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===_s)throw Error(s(308));Ss=e,_s.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Os=null;function Ps(e){null===Os?Os=[e]:Os.push(e)}function Is(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ps(t)):(n.next=a.next,a.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,As(e,n)}return null===(a=r.interleaved)?(t.next=t,Ps(r)):(t.next=a.next,a.next=t),r.interleaved=t,As(e,n)}function Fs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var a=e.updateQueue;Ds=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(i=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Ds=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Ks={},Vs=Sa(Ks),Hs=Sa(Ks),Js=Sa(Ks);function Gs(e){if(e===Ks)throw Error(s(174));return e}function $s(e,t){switch(Na(Js,t),Na(Hs,e),Na(Vs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ja(Vs),Na(Vs,t)}function Ys(){ja(Vs),ja(Hs),ja(Js)}function Xs(e){Gs(Js.current);var t=Gs(Vs.current),n=le(t,e.type);t!==n&&(Na(Hs,e),Na(Vs,n))}function Qs(e){Hs.current===e&&(ja(Vs),ja(Hs))}var Zs=Sa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=w.ReactCurrentDispatcher,ai=w.ReactCurrentBatchConfig,si=0,ii=null,li=null,ci=null,ui=!1,di=!1,hi=0,fi=0;function pi(){throw Error(s(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function vi(e,t,n,r,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:eo,e=n(r,a),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(s(301));i+=1,ci=li=null,t.updateQueue=null,ri.current=to,e=n(r,a)}while(di)}if(ri.current=Qi,t=null!==li&&null!==li.next,si=0,ci=li=ii=null,ui=!1,t)throw Error(s(300));return e}function gi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?ii.memoizedState=ci=e:ci=ci.next=e,ci}function bi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?ii.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(s(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?ii.memoizedState=ci=e:ci=ci.next=e}return ci}function wi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((si&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Ll|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);or(i,t.memoizedState)||(wo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(){}function Si(e,t){var n=ii,r=bi(),a=t(),i=!or(r.memoizedState,a);if(i&&(r.memoizedState=a,wo=!0),r=r.queue,Li(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Oi(9,Ni.bind(null,n,r,a,t),void 0,null),null===Tl)throw Error(s(349));0!==(30&si)||ji(n,t,a)}return a}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ni(e,t,n,r){t.value=n,t.getSnapshot=r,Ci(t)&&Ti(e)}function Ei(e,t,n){return n(function(){Ci(t)&&Ti(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ti(e){var t=As(e,1);null!==t&&nc(t,e,1,-1)}function Ri(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Oi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pi(){return bi().memoizedState}function Ii(e,t,n,r){var a=yi();ii.flags|=e,a.memoizedState=Oi(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var a=bi();r=void 0===r?null:r;var s=void 0;if(null!==li){var i=li.memoizedState;if(s=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=Oi(t,n,s,r))}ii.flags|=e,a.memoizedState=Oi(1|t,n,s,r)}function Di(e,t){return Ii(8390656,8,e,t)}function Li(e,t){return Ai(2048,8,e,t)}function Mi(e,t){return Ai(4,2,e,t)}function zi(e,t){return Ai(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,4,Ui.bind(null,t,e),n)}function Bi(){}function qi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ki(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Vi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=n,ai.transition=r}}function Hi(){return bi().memoizedState}function Ji(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))Yi(t,n);else if(null!==(n=Is(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function Gi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))Yi(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ps(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Is(e,t,a,r))&&(nc(n,e,r,a=ec()),Xi(n,t,r))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qi={readContext:Rs,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Rs,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Di,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,Ui.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ji.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ri,useDebugValue:Bi,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ri(!1),t=e[0];return e=Vi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,a=yi();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Tl)throw Error(s(349));0!==(30&si)||ji(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Di(Ei.bind(null,r,i,e),[e]),r.flags|=2048,Oi(9,Ni.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Tl.identifierPrefix;if(as){var n=Xa;t=":"+t+"R"+(n=(Ya&~(1<<32-it(Ya)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Rs,useCallback:qi,useContext:Rs,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Mi,useLayoutEffect:zi,useMemo:Wi,useReducer:xi,useRef:Pi,useState:function(){return xi(wi)},useDebugValue:Bi,useDeferredValue:function(e){return Ki(bi(),li.memoizedState,e)},useTransition:function(){return[xi(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Si,useId:Hi,unstable_isNewReconciler:!1},to={readContext:Rs,useCallback:qi,useContext:Rs,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Mi,useLayoutEffect:zi,useMemo:Wi,useReducer:ki,useRef:Pi,useState:function(){return ki(wi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Ki(t,li.memoizedState,e)},useTransition:function(){return[ki(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Si,useId:Hi,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=zs(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Fs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),s=zs(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,a))&&(nc(t,e,a,r),Fs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=zs(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Us(e,a,r))&&(nc(t,e,r,n),Fs(t,e,r))}};function so(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function io(e,t,n){var r=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(a=Pa(t)?Ra:Ca.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oa(e,a):Ea),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Rs(s):(s=Pa(t)?Ra:Ca.current,a.context=Oa(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ao.enqueueReplaceState(a,a.state,null),qs(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=zs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Vl=r),ho(0,t)},n}function mo(e,t,n){(n=zs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bo=w.ReactCurrentOwner,wo=!1;function xo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function ko(e,t,n,r,a){n=n.render;var s=t.ref;return Ts(t,a),r=vi(e,t,n,r,s,a),n=gi(),null===e||wo?(as&&n&&es(t),t.flags|=1,xo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function _o(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Ic(s,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(wo=!0)}}return Eo(e,t,n,r,a)}function jo(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Il,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Il,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Na(Il,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Na(Il,Pl),Pl|=r;return xo(e,t,a,n),t.child}function No(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,a){var s=Pa(n)?Ra:Ca.current;return s=Oa(t,s),Ts(t,a),n=vi(e,t,n,r,s,a),r=gi(),null===e||wo?(as&&r&&es(t),t.flags|=1,xo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function Co(e,t,n,r,a){if(Pa(n)){var s=!0;La(t)}else s=!1;if(Ts(t,a),null===t.stateNode)Wo(e,t),io(t,n,r),lo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Oa(t,c=Pa(n)?Ra:Ca.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,i,r,c),Ds=!1;var h=t.memoizedState;i.state=h,qs(t,r,i,a),l=t.memoizedState,o!==r||h!==l||Ta.current||Ds?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Ds||so(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Oa(t,l=Pa(n)?Ra:Ca.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,i,r,l),Ds=!1,h=t.memoizedState,i.state=h,qs(t,r,i,a);var p=t.memoizedState;o!==d||h!==p||Ta.current||Ds?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Ds||so(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,s,a)}function To(e,t,n,r,a,s){No(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ma(t,n,!1),Ko(e,t,s);r=t.stateNode,bo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):xo(e,t,o,s),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),$s(e,t.containerInfo)}function Oo(e,t,n,r,a){return fs(),ps(a),t.flags|=256,xo(e,t,n,r),t.child}var Po,Io,Ao,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,a=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Na(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,a,0,null),e=Dc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Do,e):zo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=uo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(i=Dc(i,a,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=uo(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Tl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,As(e,a),nc(r,e,a,-1))}return mc(),Uo(e,t,o,r=uo(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ja[Ga++]=Ya,Ja[Ga++]=Xa,Ja[Ga++]=$a,Ya=e.id,Xa=e.overflow,$a=t),t=zo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(o){o=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ic(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Ic(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,a}return e=(o=e.child).sibling,a=Ic(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Bo(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function qo(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,n,t);else if(19===e.tag)Fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Na(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Bo(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Pa(t.type)&&Ia(),Ho(t),null;case 3:return r=t.stateNode,Ys(),ja(Ta),ja(Ca),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Ho(t),null;case 5:Qs(t);var a=Gs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)Io(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ho(t),null}if(e=Gs(Vs.current),ds(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Dr.length;a++)Ur(Dr[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,i),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ur("invalid",r);break;case"textarea":ae(r,i),Ur("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,i,!0);break;case"textarea":H(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Po(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dr.length;a++)Ur(Dr[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":Y(e,r),a=$(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ve(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Ur("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Ao(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Js.current),Gs(Vs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Ho(t),null;case 13:if(ja(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,i=!1;else if(i=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Al&&(Al=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Ys(),null===e&&qr(t.stateNode.containerInfo),Ho(t),null;case 10:return Es(t.type._context),Ho(t),null;case 19:if(ja(Zs),null===(i=t.memoizedState))return Ho(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vo(i,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>ql&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Ho(t),null}else 2*Xe()-i.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Na(Zs,r?1&n|2:1&n),t):(Ho(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),ja(Ta),ja(Ca),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(ja(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ja(Zs),null;case 4:return Ys(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Gs(Vs.current);var s,i=null;switch(n){case"input":a=$(e,a),r=$(e,r),i=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ao=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Yo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,n,s)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),qt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(i,o,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Sc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(v){Sc(e,e.return,v)}try{nl(5,e,e.return)}catch(v){Sc(e,e.return,v)}}break;case 1:ml(t,e),gl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),gl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Sc(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ve(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":Q(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(v){Sc(e,e.return,v)}}break;case 6:if(ml(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Sc(e,e.return,v)}}break;case 3:if(ml(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(v){Sc(e,e.return,v)}break;case 4:default:ml(t,e),gl(e);break;case 13:ml(t,e),gl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,ml(t,e),Yo=u):ml(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qo=e,d=e.child;null!==d;){for(h=Qo=d;null!==Qo;){switch(p=(f=Qo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Sc(r,n,v)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Qo=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(v){Sc(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Sc(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qo;){var a=Qo,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||$o;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=$o;var c=Yo;if($o=i,(Yo=l)&&!c)for(Qo=a;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?kl(a):null!==l?(l.return=i,Qo=l):kl(a);for(;null!==s;)Qo=s,bl(s,t,n),s=s.sibling;Qo=a,$o=o,Yo=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Qo=s):wl(e)}}function wl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&al(t)}catch(oi){Sc(t,t.return,oi)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function xl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function kl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Sc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Sc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var _l,Sl=Math.ceil,jl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Cl=0,Tl=null,Rl=null,Ol=0,Pl=0,Il=Sa(0),Al=0,Dl=null,Ll=0,Ml=0,zl=0,Ul=null,Fl=null,Bl=0,ql=1/0,Wl=null,Kl=!1,Vl=null,Hl=null,Jl=!1,Gl=null,$l=0,Yl=0,Xl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Ql?Ql:Ql=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ol?Ol&-Ol:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));gt(e,n,r),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(Ml|=n),4===Al&&oc(e,Ol)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(ql=Xe()+500,Ua&&qa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&n)&&0===(o&r)||(a[i]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Tl?Ol:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ua=!0,Ba(e)}(lc.bind(null,e)):Ba(lc.bind(null,e)),ia(function(){0===(6&Cl)&&qa()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Cl;Cl|=2;var i=pc();for(Tl===e&&Ol===t||(Wl=null,ql=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ns(),jl.current=i,Cl=a,null!==Rl?t=0:(Tl=null,Ol=0,t=Al)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Dl,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!or(s(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Dl,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Fl,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Fl,Wl),t);break}xc(e,Fl,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>a&&(a=o),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Fl,Wl),r);break}xc(e,Fl,Wl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fl,Fl=n,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~zl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Fl,Wl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Xe()+500,Ua&&qa())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Cl)&&kc();var t=Cl;Cl|=1;var n=El.transition,r=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=r,El.transition=n,0===(6&(Cl=t))&&qa()}}function dc(){Pl=Il.current,ja(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:Ys(),ja(Ta),ja(Ca),ni();break;case 5:Qs(r);break;case 4:Ys();break;case 13:case 19:ja(Zs);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Rl=e=Ic(e.current,null),Ol=Pl=t,Al=0,Dl=null,zl=Ml=Ll=0,Fl=Ul=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}Os=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Ns(),ri.current=Qi,ui){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ui=!1}if(si=0,ci=li=ii=null,di=!1,hi=0,Nl.current=null,null===n||null===n.return){Al=1,Dl=t,Rl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&vo(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vo(i,u,t),mc();break e}c=Error(s(426))}else if(as&&1&l.mode){var g=go(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),yo(g,o,l,0,t),ps(co(c,l));break e}}i=c=co(c,l),4!==Al&&(Al=2),null===Ul?Ul=[i]:Ul.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,po(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}wc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=jl.current;return jl.current=Qi,null===e?Qi:e}function mc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Tl,Ol)}function vc(e,t){var n=Cl;Cl|=2;var r=pc();for(Tl===e&&Ol===t||(Wl=null,hc(e,t));;)try{gc();break}catch(a){fc(e,a)}if(Ns(),Cl=n,jl.current=r,null!==Rl)throw Error(s(261));return Tl=null,Ol=0,Al}function gc(){for(;null!==Rl;)bc(Rl)}function yc(){for(;null!==Rl&&!$e();)bc(Rl)}function bc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Nl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Jo(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Al=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Al&&(Al=5)}function xc(e,t,n){var r=bt,a=El.transition;try{El.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Gl);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Tl&&(Rl=Tl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Tc(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=El.transition,El.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Nl.current=null,function(e,t){if(ea=Kt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Kt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:no(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}m=tl,tl=!1}(e,n),vl(n,e),pr(ta),Kt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Ye(),Cl=l,bt=o,El.transition=i}else e.current=n;if(Jl&&(Jl=!1,Gl=e,$l=a),i=e.pendingLanes,0===i&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Kl)throw Kl=!1,e=Vl,Vl=null,e;0!==(1&$l)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,qa()}(e,t,n,r)}finally{El.transition=a,bt=r}return null}function kc(){if(null!==Gl){var e=wt($l),t=El.transition,n=bt;try{if(El.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,$l=0,0!==(6&Cl))throw Error(s(331));var a=Cl;for(Cl|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(0!==(16&Qo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qo=u;null!==Qo;){var d=Qo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Qo=h;else for(;null!==Qo;){var f=(d=Qo).sibling,p=d.return;if(sl(d),d===u){Qo=null;break}if(null!==f){f.return=p,Qo=f;break}Qo=p}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Qo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(i=Qo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qo=y;break e}Qo=i.return}}var b=e.current;for(Qo=b;null!==Qo;){var w=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Qo=w;else e:for(o=b;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Sc(l,l.return,k)}if(l===o){Qo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qo=x;break e}Qo=l.return}}if(Cl=a,qa(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,El.transition=t}}return!1}function _c(e,t,n){e=Us(e,t=po(0,t=co(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Us(t,e=mo(t,e=co(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ol&n)===n&&(4===Al||3===Al&&(130023424&Ol)===Ol&&500>Xe()-Bl?hc(e,0):zl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=As(e,t))&&(gt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function Tc(e,t){return Je(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,a,i){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Dc(n.children,a,i,t);case S:o=8,a|=8;break;case j:return(e=Oc(12,n,t,2|a)).elementType=j,e.lanes=i,e;case T:return(e=Oc(13,n,t,a)).elementType=T,e.lanes=i,e;case R:return(e=Oc(19,n,t,a)).elementType=R,e.lanes=i,e;case I:return Lc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case E:o=9;break e;case C:o=11;break e;case O:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(o,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,a,s,i,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Bc(e){if(!e)return Ea;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Da(e,n,t)}return t}function qc(e,t,n,r,a,s,i,o,l){return(e=Fc(n,r,!0,e,0,s,0,o,l)).context=Bc(null),n=e.current,(s=zs(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function Wc(e,t,n,r){var a=t.current,s=ec(),i=tc(a);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zs(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(a,t,i))&&(nc(e,a,i,s),Fs(e,a,i)),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),fs();break;case 5:Xs(t);break;case 1:Pa(t.type)&&La(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Na(ks,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Na(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Na(Zs,1&Zs.current),null!==(e=Ko(e,t,n))?e.sibling:null);Na(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Ko(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,as&&0!==(1048576&t.flags)&&Za(t,Ha,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var a=Oa(t,Ca.current);Ts(t,n),a=vi(null,t,r,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(i=!0,La(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ls(t),a.updater=ao,t.stateNode=a,a._reactInternals=t,lo(t,r,e,n),t=To(null,t,r,!0,i,n)):(t.tag=0,as&&i&&es(t),xo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===O)return 14}return 2}(r),e=no(r,e),a){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=ko(null,t,r,e,n);break e;case 14:t=_o(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Eo(e,t,r,a=t.elementType===r?a:no(r,a),n);case 1:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:no(r,a),n);case 3:e:{if(Ro(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ms(e,t),qs(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Oo(e,t,r,n,a=co(Error(s(423)),t));break e}if(r!==a){t=Oo(e,t,r,n,a=co(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===a){t=Ko(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==i&&na(r,i)&&(t.flags|=32),No(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ko(e,t,r,a=t.elementType===r?a:no(r,a),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Na(ks,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===a.children&&!Ta.current){t=Ko(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=zs(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Cs(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}xo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ts(t,n),r=r(a=Rs(a)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return a=no(r=t.type,t.pendingProps),_o(e,t,r,a=no(r.type,a),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:no(r,a),Wo(e,t),t.tag=1,Pa(r)?(e=!0,La(t)):e=!1,Ts(t,n),io(t,r,a),lo(t,r,a,n),To(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return jo(e,t,n)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Kc(i);o.call(e)}}Wc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Kc(i);s.call(e)}}var i=qc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[pa]=i.current,qr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pa]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,a,r);return Kc(i)}$c.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pa]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(ql=Xe()+500,qa()))}break;case 13:uc(function(){var t=As(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Hc(e,1)}},kt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=As(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},St=function(){return bt},jt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(s(90));J(r),Q(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Ne,Ee,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",a=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,qr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",o=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,i,o),e[pa]=t.current,qr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(s,i),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var r=n(43),a=n.t(r,2),s=n(391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)};function h(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function f(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{l(r.next(e))}catch(t){s(t)}}function o(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})}Object.create;function p(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;class m extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class v extends m{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class g extends m{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class y extends m{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var b;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(b||(b={}));class w{constructor(e){let{headers:t={},customFetch:n,region:r=b.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){return f(this,arguments,void 0,function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r;let a,s;try{const{headers:i,method:o,body:l,signal:c,timeout:u}=n;let d={},{region:h}=n;h||(h=t.region);const f=new URL("".concat(t.url,"/").concat(e));let p;h&&"any"!==h&&(d["x-region"]=h,f.searchParams.set("forceFunctionRegion",h)),l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=l):"string"===typeof l?(d["Content-Type"]="text/plain",p=l):"undefined"!==typeof FormData&&l instanceof FormData?p=l:(d["Content-Type"]="application/json",p=JSON.stringify(l)):p=!l||"string"===typeof l||"undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer||"undefined"!==typeof FormData&&l instanceof FormData?l:JSON.stringify(l);let m=c;u&&(s=new AbortController,a=setTimeout(()=>s.abort(),u),c?(m=s.signal,c.addEventListener("abort",()=>s.abort())):m=s.signal);const b=yield t.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},d),t.headers),i),body:p,signal:m}).catch(e=>{throw new v(e)}),w=b.headers.get("x-relay-error");if(w&&"true"===w)throw new g(b);if(!b.ok)throw new y(b);let x,k=(null!==(r=b.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return x="application/json"===k?yield b.json():"application/octet-stream"===k||"application/pdf"===k?yield b.blob():"text/event-stream"===k?b:"multipart/form-data"===k?yield b.formData():yield b.text(),{data:x,error:null,response:b}}catch(i){return{data:null,error:i,response:i instanceof y||i instanceof g?i.context:void 0}}finally{a&&clearTimeout(a)}}()})}}var x=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},k=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{let t=null,r=null,a=null,s=e.status,i=e.statusText;if(e.ok){var o,l;if("HEAD"!==n.method){var c;const t=await e.text();""===t||(r="text/csv"===n.headers.get("Accept")||n.headers.get("Accept")&&(null===(c=n.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const u=null===(o=n.headers.get("Prefer"))||void 0===o?void 0:o.match(/count=(exact|planned|estimated)/),d=null===(l=e.headers.get("content-range"))||void 0===l?void 0:l.split("/");u&&d&&d.length>1&&(a=parseInt(d[1])),n.isMaybeSingle&&"GET"===n.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:"Results contain ".concat(r.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,s=406,i="Not Acceptable"):r=1===r.length?r[0]:null)}else{var u;const a=await e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(r=[],t=null,s=200,i="OK")}catch(d){404===e.status&&""===a?(s=204,i="No Content"):t={message:a}}if(t&&n.isMaybeSingle&&(null===t||void 0===t||null===(u=t.details)||void 0===u?void 0:u.includes("0 rows"))&&(t=null,s=200,i="OK"),t&&n.shouldThrowOnError)throw new x(t)}return{error:t,data:r,count:a,status:s,statusText:i}});return this.shouldThrowOnError||(r=r.catch(e=>{var t;let n="";const r=null===e||void 0===e?void 0:e.cause;if(r){var a,s,i,o;const t=null!==(a=null===r||void 0===r?void 0:r.message)&&void 0!==a?a:"",l=null!==(s=null===r||void 0===r?void 0:r.code)&&void 0!==s?s:"";n="".concat(null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),n+="\n\nCaused by: ".concat(null!==(o=null===r||void 0===r?void 0:r.name)&&void 0!==o?o:"Error",": ").concat(t),l&&(n+=" (".concat(l,")")),(null===r||void 0===r?void 0:r.stack)&&(n+="\n".concat(r.stack))}else{var l;n=null!==(l=null===e||void 0===e?void 0:e.stack)&&void 0!==l?l:""}return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:n,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},_=class extends k{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof r?"offset":"".concat(r,".offset"),s="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:s="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(s,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}};const S=new RegExp("[,()]");var j=class extends _{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}regexMatch(e,t){return this.url.searchParams.append(e,"match.".concat(t)),this}regexIMatch(e,t){return this.url.searchParams.append(e,"imatch.".concat(t)),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}isDistinct(e,t){return this.url.searchParams.append(e,"isdistinct.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&S.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}notIn(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&S.test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"not.in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(s,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}},N=class{constructor(e,t){let{headers:n={},schema:r,fetch:a}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=null!==t&&void 0!==t?t:{},a=n?"HEAD":"GET";let s=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",i),r&&l.append("Prefer","count=".concat(r)),new j({method:a,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;const{url:a,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer","count=".concat(t)),n||s.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));a.searchParams.set("columns",e.join(","))}}return new j({method:"POST",url:a,headers:s,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;const{url:i,headers:o}=this.cloneRequestState();if(o.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&i.searchParams.set("on_conflict",t),r&&o.append("Prefer","count=".concat(r)),a||o.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));i.searchParams.set("columns",e.join(","))}}return new j({method:"POST",url:i,headers:o,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const{url:r,headers:a}=this.cloneRequestState();return t&&a.append("Prefer","count=".concat(t)),new j({method:"PATCH",url:r,headers:a,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const{url:n,headers:r}=this.cloneRequestState();return e&&r.append("Prefer","count=".concat(e)),new j({method:"DELETE",url:n,headers:r,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},E=class e{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){if(!e||"string"!==typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new N(new URL("".concat(this.url,"/").concat(e)),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let i;const o=new URL("".concat(this.url,"/rpc/").concat(e));let l;const c=e=>null!==e&&"object"===typeof e&&(!Array.isArray(e)||e.some(c)),u=n&&Object.values(t).some(c);u?(i="POST",l=t):n||r?(i=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;o.searchParams.append(t,n)})):(i="POST",l=t);const d=new Headers(this.headers);return u?d.set("Prefer",a?"count=".concat(a,",return=minimal"):"return=minimal"):a&&d.set("Prefer","count=".concat(a)),new j({method:i,url:o,headers:d,schema:this.schemaName,body:l,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}};const C=class{constructor(){}static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},T="realtime-js/".concat("2.93.1"),R="2.0.0",O=R,P=1e4;var I,A,D,L,M,z;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(I||(I={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(A||(A={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(D||(D={})),function(e){e.websocket="websocket"}(L||(L={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(M||(M={}));class U{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!==e&&void 0!==e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"===typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,n;const r=null!==(n=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==n?n:{},a=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,n){var r,a;const s=e.topic,i=null!==(r=e.ref)&&void 0!==r?r:"",o=null!==(a=e.join_ref)&&void 0!==a?a:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error("joinRef length ".concat(o.length," exceeds maximum of 255"));if(i.length>255)throw new Error("ref length ".concat(i.length," exceeds maximum of 255"));if(s.length>255)throw new Error("topic length ".concat(s.length," exceeds maximum of 255"));if(l.length>255)throw new Error("userEvent length ".concat(l.length," exceeds maximum of 255"));if(u.length>255)throw new Error("metadata length ".concat(u.length," exceeds maximum of 255"));const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+i.length+s.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,o.length),f.setUint8(p++,i.length),f.setUint8(p++,s.length),f.setUint8(p++,l.length),f.setUint8(p++,u.length),f.setUint8(p++,t),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(i,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(p++,e.charCodeAt(0)));var m=new Uint8Array(h.byteLength+n.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(n),h.byteLength),m.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"===typeof e){const n=JSON.parse(e),[r,a,s,i,o]=n;return t({join_ref:r,ref:a,topic:s,event:i,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2),s=t.getUint8(3),i=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=n.decode(e.slice(o,o+r));o+=r;const c=n.decode(e.slice(o,o+a));o+=a;const u=n.decode(e.slice(o,o+s));o+=s;const d=e.slice(o,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return s>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"===typeof e?Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return t.includes(n)})):{}}}class F{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(z||(z={}));const B=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((n,a)=>(n[a]=q(a,e,t,r),n),{}):{}},q=(e,t,n,r)=>{const a=t.find(t=>t.name===e),s=null===a||void 0===a?void 0:a.type,i=n[e];return s&&!r.includes(s)?W(s,i):K(i)},W=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return G(t,n)}switch(e){case z.bool:return V(t);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return H(t);case z.json:case z.jsonb:return J(t);case z.timestamp:return $(t);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:default:return K(t)}},K=e=>e,V=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},H=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},J=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return e}return e},G=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(a){r=s?s.split(","):[]}return r.map(e=>W(t,e))}return e},$=e=>"string"===typeof e?e.replace(" ","T"):e,Y=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class X{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Q,Z,ee,te;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Q||(Q={}));class ne{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ne.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=ne.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ne.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let a=e[t];if(!a)return;const s=n.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Z||(Z={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(ee||(ee={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(te||(te={}));class re{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=A.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new X(this,D.join,this.params,this.timeout),this.rejoinTimer=new F(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=A.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=A.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=A.errored,this.rejoinTimer.scheduleTimeout())}),this._on(D.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ne(this),this.broadcastEndpointURL=Y(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==A.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[ee.PRESENCE]&&this.bindings[ee.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(te.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(te.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,s=[];for(let r=0;r<a;r++){const a=t[r],{filter:{event:i,schema:o,table:l,filter:c}}=a,u=n&&n[r];if(!(u&&u.event===i&&re.isFilterValueEqual(u.schema,o)&&re.isFilterValueEqual(u.table,l)&&re.isFilterValueEqual(u.filter,c)))return this.unsubscribe(),this.state=A.errored,void(null===e||void 0===e||e(te.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(te.SUBSCRIBED))}null===e||void 0===e||e(te.SUBSCRIBED)}).receive("error",t=>{this.state=A.errored,null===e||void 0===e||e(te.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(te.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===A.joined&&e===ee.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;if(void 0===t||null===t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization="Bearer ".concat(this.socket.accessTokenValue));const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:i}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization="Bearer ".concat(this.socket.accessTokenValue));const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=A.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(D.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new X(this,D.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=A.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new X(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=D;if(n&&[i,o,l,c].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var n,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:s}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===A.closed}_isJoined(){return this.state===A.joined}_isJoining(){return this.state===A.joining}_isLeaving(){return this.state===A.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&re.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(null!==e&&void 0!==e?e:void 0)===(null!==t&&void 0!==t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(D.close,{},e)}_onError(e){this._on(D.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=A.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=B(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=B(e.columns,e.old_record)),t}}const ae=()=>{},se=25e3,ie=10,oe=100,le=[1e3,2e3,5e3,1e4];class ce{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=P,this.transport=null,this.heartbeatIntervalMs=se,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ae,this.ref=0,this.reconnectTimer=null,this.vsn=O,this.logger=ae,this.conn=null,this.sendBuffer=[],this.serializer=new U,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},!(null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(L.websocket),this.httpEndpoint=Y(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=C.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case I.connecting:return M.Connecting;case I.open:return M.Open;case I.closing:return M.Closing;default:return M.Closed}}isConnected(){return this.connectionState()===M.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new re("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(a,")"),r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},oe)}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event&&e.ref&&e.ref===this.pendingHeartbeatRef){const t=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error",t)}catch(o){this.log("error","error in heartbeat callback",o)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:t,event:n,payload:r,ref:a}=e,s=a?"(".concat(a,")"):"",i=r.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(s).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===I.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===I.open||this.conn.readyState===I.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL()));(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(D.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!1;if(t)e=t,n=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),e=this.accessTokenValue}else e=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:T};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(D.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this._isManualToken()||this.setAuth().catch(t=>{this.log("error","Error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new F(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ie)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,s,i,o,l,c,u,d,h;switch(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:P,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:se,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null===e||void 0===e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:ae,this.vsn=null!==(o=null===e||void 0===e?void 0:e.vsn)&&void 0!==o?o:O,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>le[e-1]||1e4,this.vsn){case"1.0.0":this.encode=null!==(c=null===e||void 0===e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null===e||void 0===e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case R:this.encode=null!==(d=null===e||void 0===e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null===e||void 0===e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}var ue=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null===(n=t.icebergType)||void 0===n?void 0:n.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function de(e){var t;const n=null!==(t=e.fetchImpl)&&void 0!==t?t:globalThis.fetch;return{async request(t){let{method:r,path:a,query:s,body:i,headers:o}=t;const l=function(e,t,n){const r=new URL(t,e);if(n)for(const[a,s]of Object.entries(n))void 0!==s&&r.searchParams.set(a,s);return r.toString()}(e.baseUrl,a,s),c=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:"Bearer ".concat(e.token)}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),d=await n(l,{method:r,headers:u(u(u({},i?{"Content-Type":"application/json"}:{}),c),o),body:i?JSON.stringify(i):void 0}),h=await d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),p=f&&h?JSON.parse(h):h;if(!d.ok){var m;const e=f?p:void 0,t=null===e||void 0===e?void 0:e.error;throw new ue(null!==(m=null===t||void 0===t?void 0:t.message)&&void 0!==m?m:"Request failed with status ".concat(d.status),{status:d.status,icebergType:null===t||void 0===t?void 0:t.type,icebergCode:null===t||void 0===t?void 0:t.code,details:e})}return{status:d.status,headers:d.headers,data:p}}}}function he(e){return e.join("\x1f")}var fe=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:he(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:null===t||void 0===t?void 0:t.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(he(e.namespace))})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(he(e.namespace))})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(he(e.namespace))}),!0}catch(t){if(t instanceof ue&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ue&&409===n.status)return;throw n}}};function pe(e){return e.join("\x1f")}var me=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables")})).data.identifiers}async createTable(e,t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables"),body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables/").concat(e.name),body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){var n;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables/").concat(e.name),query:{purgeRequested:String(null!==(n=null===t||void 0===t?void 0:t.purge)&&void 0!==n&&n)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables/").concat(e.name),headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(pe(e.namespace),"/tables/").concat(e.name),headers:t}),!0}catch(n){if(n instanceof ue&&404===n.status)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ue&&409===n.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ve=class{constructor(e){var t;let n="v1";e.catalogName&&(n+="/".concat(e.catalogName));const r=e.baseUrl.endsWith("/")?e.baseUrl:"".concat(e.baseUrl,"/");this.client=de({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null===(t=e.accessDelegation)||void 0===t?void 0:t.join(","),this.namespaceOps=new fe(this.client,n),this.tableOps=new me(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var ge=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"storage",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super(e),this.__isStorageError=!0,this.namespace=t,this.name="vectors"===t?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function ye(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}var be=class extends ge{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"storage";super(e,r,t,n),this.name="vectors"===r?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},we=class extends ge{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"storage";super(e,n),this.name="vectors"===n?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const xe=e=>{if(Array.isArray(e))return e.map(e=>xe(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=xe(r)}),t};function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}function Se(e,t,n){return(t=_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach(function(t){Se(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Ee=e=>{var t;return e.msg||e.message||e.error_description||("string"===typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Ce=(e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&"HEAD"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(a.headers=Ne({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Ne(Ne({},a),n)):Ne(Ne({},a),n)};async function Te(e,t,n,r,a,s,i){return new Promise((o,l)=>{e(n,Ce(t,r,a,s)).then(e=>{if(!e.ok)throw e;if(null===r||void 0===r?void 0:r.noResolveJson)return e;if("vectors"===i){const t=e.headers.get("content-type");if(!t||!t.includes("application/json"))return{}}return e.json()}).then(e=>o(e)).catch(e=>(async(e,t,n,r)=>{if(e&&"object"===typeof e&&"status"in e&&"ok"in e&&"number"===typeof e.status&&!(null===n||void 0===n?void 0:n.noResolveJson)){const n=e,a=n.status||500;if("function"===typeof n.json)n.json().then(e=>{const n=(null===e||void 0===e?void 0:e.statusCode)||(null===e||void 0===e?void 0:e.code)||a+"";t(new be(Ee(e),a,n,r))}).catch(()=>{if("vectors"===r){const e=a+"";t(new be(n.statusText||"HTTP ".concat(a," error"),a,e,r))}else{const e=a+"";t(new be(n.statusText||"HTTP ".concat(a," error"),a,e,r))}});else{const e=a+"";t(new be(n.statusText||"HTTP ".concat(a," error"),a,e,r))}}else t(new we(Ee(e),e,r))})(e,l,r,i))})}const Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"storage";return{get:async(t,n,r,a)=>Te(t,"GET",n,r,a,void 0,e),post:async(t,n,r,a,s)=>Te(t,"POST",n,a,s,r,e),put:async(t,n,r,a,s)=>Te(t,"PUT",n,a,s,r,e),head:async(t,n,r,a)=>Te(t,"HEAD",n,Ne(Ne({},r),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,n,r,a,s)=>Te(t,"DELETE",n,a,s,r,e)}}("storage"),{get:Oe,post:Pe,put:Ie,head:Ae,remove:De}=Re;var Le=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"storage";var a;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=(a=n)?function(){return a(...arguments)}:function(){return fetch(...arguments)},this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){try{return{data:await e(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}}},Me=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){try{return{data:(await this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ye(e))return{data:null,error:e};throw e}}};let ze;ze=Symbol.toStringTag;var Ue=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ze]="BlobDownloadBuilder",this.promise=null}asStream(){return new Me(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){try{return{data:await(await this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ye(e))return{data:null,error:e};throw e}}};const Fe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Be={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qe=class extends Le{constructor(e){let t=arguments.length>2?arguments[2]:void 0;super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>3?arguments[3]:void 0,"storage"),this.bucketId=t}async uploadOrUpdate(e,t,n,r){var a=this;return a.handleOperation(async()=>{let s;const i=Ne(Ne({},Be),r);let o=Ne(Ne({},a.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const l=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),l&&s.append("metadata",a.encodeMetadata(l)),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",i.cacheControl),l&&!s.has("metadata")&&s.append("metadata",a.encodeMetadata(l))):(s=n,o["cache-control"]="max-age=".concat(i.cacheControl),o["content-type"]=i.contentType,l&&(o["x-metadata"]=a.toBase64(a.encodeMetadata(l))),("undefined"!==typeof ReadableStream&&s instanceof ReadableStream||s&&"object"===typeof s&&"pipe"in s&&"function"===typeof s.pipe)&&!i.duplex&&(i.duplex="half")),(null===r||void 0===r?void 0:r.headers)&&(o=Ne(Ne({},o),r.headers));const c=a._removeEmptyFolders(t),u=a._getFinalPath(c),d=await("PUT"==e?Ie:Pe)(a.fetch,"".concat(a.url,"/object/").concat(u),s,Ne({headers:o},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const s=a._removeEmptyFolders(e),i=a._getFinalPath(s),o=new URL(a.url+"/object/upload/sign/".concat(i));return o.searchParams.set("token",t),a.handleOperation(async()=>{let e;const t=Ne({upsert:Be.upsert},r),i=Ne(Ne({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType),{path:s,fullPath:(await Ie(a.fetch,o.toString(),e,{headers:i})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const a=Ne({},n.headers);(null===t||void 0===t?void 0:t.upsert)&&(a["x-upsert"]="true");const s=await Pe(n.fetch,"".concat(n.url,"/object/upload/sign/").concat(r),{},{headers:a}),i=new URL(n.url+s.url),o=i.searchParams.get("token");if(!o)throw new ge("No token returned by API");return{signedUrl:i.toString(),path:e,token:o}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Pe(r.fetch,"".concat(r.url,"/object/move"),{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Pe(r.fetch,"".concat(r.url,"/object/copy"),{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let a=r._getFinalPath(e),s=await Pe(r.fetch,"".concat(r.url,"/object/sign/").concat(a),Ne({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:r.headers});const i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{signedUrl:encodeURI("".concat(r.url).concat(s.signedURL).concat(i))}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const a=await Pe(r.fetch,"".concat(r.url,"/object/sign/").concat(r.bucketId),{expiresIn:t,paths:e},{headers:r.headers}),s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return a.map(e=>Ne(Ne({},e),{},{signedUrl:e.signedURL?encodeURI("".concat(r.url).concat(e.signedURL).concat(s)):null}))})}download(e,t){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=r?"?".concat(r):"",s=this._getFinalPath(e);return new Ue(()=>Oe(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(s).concat(a),{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>xe(await Oe(t.fetch,"".concat(t.url,"/object/info/").concat(n),{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await Ae(t.fetch,"".concat(t.url,"/object/").concat(n),{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ye(r)&&r instanceof we){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&r.push(a);const s="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(s,"/public/").concat(n).concat(o))}}}async remove(e){var t=this;return t.handleOperation(async()=>await De(t.fetch,"".concat(t.url,"/object/").concat(t.bucketId),{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const a=Ne(Ne(Ne({},Fe),t),{},{prefix:e||""});return await Pe(r.fetch,"".concat(r.url,"/object/list/").concat(r.bucketId),a,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=Ne({},e);return await Pe(n.fetch,"".concat(n.url,"/object/list-v2/").concat(n.bucketId),r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}};const We={"X-Client-Info":"storage-js/".concat("2.93.1")};var Ke=class extends Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const a=new URL(e);(null===r||void 0===r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));super(a.href.replace(/\/$/,""),Ne(Ne({},We),t),n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Oe(t.fetch,"".concat(t.url,"/bucket").concat(n),{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Oe(t.fetch,"".concat(t.url,"/bucket/").concat(e),{headers:t.headers}))}async createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};var n=this;return n.handleOperation(async()=>await Pe(n.fetch,"".concat(n.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Ie(n.fetch,"".concat(n.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/bucket/").concat(e,"/empty"),{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await De(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Ve=class extends Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),Ne(Ne({},We),t),n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/bucket"),{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;void 0!==(null===e||void 0===e?void 0:e.limit)&&n.set("limit",e.limit.toString()),void 0!==(null===e||void 0===e?void 0:e.offset)&&n.set("offset",e.offset.toString()),(null===e||void 0===e?void 0:e.sortColumn)&&n.set("sortColumn",e.sortColumn),(null===e||void 0===e?void 0:e.sortOrder)&&n.set("sortOrder",e.sortOrder),(null===e||void 0===e?void 0:e.search)&&n.set("search",e.search);const r=n.toString(),a=r?"".concat(t.url,"/bucket?").concat(r):"".concat(t.url,"/bucket");return await Oe(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await De(t.fetch,"".concat(t.url,"/bucket/").concat(e),{},{headers:t.headers}))}from(e){var t=this;if(!(e=>!(!e||"string"!==typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new ge("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new ve({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(e,t){const n=e[t];return"function"!==typeof n?n:async function(){try{for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return{data:await n.apply(e,a),error:null}}catch(i){if(r)throw i;return{data:null,error:i}}}}})}},He=class extends Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),Ne(Ne({},We),{},{"Content-Type":"application/json"},t),n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/CreateIndex"),e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Pe(n.fetch,"".concat(n.url,"/GetIndex"),{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/ListIndexes"),e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Pe(n.fetch,"".concat(n.url,"/DeleteIndex"),{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},Je=class extends Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),Ne(Ne({},We),{},{"Content-Type":"application/json"},t),n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/PutVectors"),e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/GetVectors"),e,{headers:t.headers}))}async listVectors(e){var t=this;if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(e.segmentCount-1))}return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/ListVectors"),e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/QueryVectors"),e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/DeleteVectors"),e,{headers:t.headers})||{})}},Ge=class extends Le{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;super(e.replace(/\/$/,""),Ne(Ne({},We),{},{"Content-Type":"application/json"},t),n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/CreateVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/GetVectorBucket"),{vectorBucketName:e},{headers:t.headers}))}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/ListVectorBuckets"),e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Pe(t.fetch,"".concat(t.url,"/DeleteVectorBucket"),{vectorBucketName:e},{headers:t.headers})||{})}},$e=class extends Ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t.headers||{},t.fetch)}from(e){return new Ye(this.url,this.headers,e,this.fetch)}async createBucket(e){return(()=>super.createBucket)().call(this,e)}async getBucket(e){return(()=>super.getBucket)().call(this,e)}async listBuckets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listBuckets)().call(this,e)}async deleteBucket(e){return(()=>super.deleteBucket)().call(this,e)}},Ye=class extends He{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){return(()=>super.createIndex)().call(this,Ne(Ne({},e),{},{vectorBucketName:this.vectorBucketName}))}async listIndexes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(()=>super.listIndexes)().call(this,Ne(Ne({},e),{},{vectorBucketName:this.vectorBucketName}))}async getIndex(e){return(()=>super.getIndex)().call(this,this.vectorBucketName,e)}async deleteIndex(e){return(()=>super.deleteIndex)().call(this,this.vectorBucketName,e)}index(e){return new Xe(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Xe=class extends Je{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=this;return(()=>super.putVectors)().call(t,Ne(Ne({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(e){var t=this;return(()=>super.getVectors)().call(t,Ne(Ne({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return(()=>super.listVectors)().call(t,Ne(Ne({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(e){var t=this;return(()=>super.queryVectors)().call(t,Ne(Ne({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(e){var t=this;return(()=>super.deleteVectors)().call(t,Ne(Ne({},e),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Qe=class extends Ke{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new qe(this.url,this.headers,e,this.fetch)}get vectors(){return new $e(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ve(this.url+"/iceberg",this.headers,this.fetch)}};const Ze="2.93.1",et=3e4,tt=9e4,nt={"X-Client-Info":"gotrue-js/".concat(Ze)},rt="X-Supabase-Api-Version",at={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},st=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class it extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ot(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class lt extends it{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class ct extends it{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ut extends it{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class dt extends ut{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ht(e){return ot(e)&&"AuthSessionMissingError"===e.name}class ft extends ut{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pt extends ut{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mt extends ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vt extends ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gt extends ut{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yt extends ut{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function bt(e){return ot(e)&&"AuthRetryableFetchError"===e.name}class wt extends ut{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class xt extends ut{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_t=" \t\n\r=".split(""),St=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_t.length;t+=1)e[_t[t].charCodeAt(0)]=-2;for(let t=0;t<kt.length;t+=1)e[kt[t].charCodeAt(0)]=t;return e})();function jt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kt[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(kt[e]),t.queuedBits-=6}}function Nt(e,t,n){const r=St[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Et(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)Nt(e.charCodeAt(i),a,s);return t.join("")}function Ct(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Tt(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Ct(r,t)}}function Rt(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Nt(e.charCodeAt(a),n,r);return new Uint8Array(t)}function Ot(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>jt(e,n,r)),jt(null,n,r),t.join("")}const Pt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,It={tested:!1,writable:!1},At=()=>{if(!Pt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(It.tested)return It.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),It.tested=!0,It.writable=!0}catch(t){It.tested=!0,It.writable=!1}return It.writable};const Dt=e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)},Lt=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Mt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},zt=async(e,t)=>{await e.removeItem(t)};class Ut{constructor(){this.promise=new Ut.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ft(e){const t=e.split(".");if(3!==t.length)throw new xt("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!st.test(t[n]))throw new xt("JWT not in base64url format");return{header:JSON.parse(Et(t[0])),payload:JSON.parse(Et(t[1])),signature:Rt(t[2]),raw:{header:t[0],payload:t[1]}}}function Bt(e){return("0"+e.toString(16)).substr(-2)}async function qt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Bt).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Lt(e,"".concat(t,"-code-verifier"),a);const s=await qt(r);return[s,r===s?"plain":"s256"]}Ut.promiseConstructor=Promise;const Kt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Vt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ht(e){if(!Vt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Gt(e){return JSON.parse(JSON.stringify(e))}const $t=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yt=[502,503,504];async function Xt(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new yt($t(e),0);if(Yt.includes(e.status))throw new yt($t(e),e.status);let r,a;try{r=await e.json()}catch(i){throw new ct($t(i),i)}const s=function(e){const t=e.headers.get(rt);if(!t)return null;if(!t.match(Kt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(s&&s.getTime()>=at.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?a=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new wt($t(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new dt}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new wt($t(r),e.status,r.weak_password.reasons);throw new lt($t(r),e.status||500,a)}async function Qt(e,t,n,r){var a;const s=Object.assign({},null===r||void 0===r?void 0:r.headers);s[rt]||(s[rt]=at.name),(null===r||void 0===r?void 0:r.jwt)&&(s.Authorization="Bearer ".concat(r.jwt));const i=null!==(a=null===r||void 0===r?void 0:r.query)&&void 0!==a?a:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,s){const i=((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,s);let o;try{o=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new yt($t(l),0)}o.ok||await Xt(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Xt(l)}}(e,t,n+o,{headers:s,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Zt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function en(e){const t=Zt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function tn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function nn(e){return{data:e,error:null}}function rn(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,i=h(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function an(e){return e}const sn=["global","local","others"];class on{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=Dt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sn[0];if(sn.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(sn.join(", ")));try{return await Qt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Qt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:tn})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=h(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Qt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:rn,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(ot(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Qt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:tn})}catch(t){if(ot(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Qt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:an});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ot(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Ht(e);try{return await Qt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:tn})}catch(t){if(ot(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ht(e);try{return await Qt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:tn})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ht(e);try{return await Qt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:tn})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ht(e.userId);try{const{data:t,error:n}=await Qt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(ot(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ht(e.userId),Ht(e.id);try{return{data:await Qt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,a,s,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Qt(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:an});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ot(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Qt(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ot(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Qt(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ot(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Qt(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(e),{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Qt(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(e),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ot(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Qt(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(e,"/regenerate_secret"),{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ot(t))return{data:null,error:t};throw t}}}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const cn=!!(globalThis&&At()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class un extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dn extends un{}async function hn(e,t,n){cn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),cn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw cn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dn('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(cn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}cn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{cn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}function fn(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error('@supabase/auth-js: Address "'.concat(e,'" is invalid.'));return e.toLowerCase()}function pn(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class mn extends Error{constructor(e){let{message:t,code:n,cause:r,name:a}=e;var s;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(s=null!==a&&void 0!==a?a:r instanceof Error?r.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=n}}class vn extends mn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function gn(e){let{error:t,options:n}=e;var r,a,s;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new mn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new mn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===n.mediation&&"required"===(null===(a=i.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new mn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(s=i.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new mn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new mn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new mn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===i.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new mn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!Sn(e))return new mn({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==e)return new mn({message:'The RP ID "'.concat(i.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new mn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new mn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function yn(e){let{error:t,options:n}=e;const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(n.signal instanceof AbortSignal)return new mn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new mn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!Sn(e))return new mn({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:t});if(r.rpId!==e)return new mn({message:'The RP ID "'.concat(r.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new mn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const bn=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function wn(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=h(e,["challenge","user","excludeCredentials"]),s=Rt(t).buffer,i=Object.assign(Object.assign({},n),{id:Rt(n.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Rt(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function xn(e){if(!e)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=h(e,["challenge","allowCredentials"]),a=Rt(t).buffer,s=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Rt(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function kn(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ot(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ot(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function _n(e){var t;if("toJSON"in e&&"function"===typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ot(new Uint8Array(a.authenticatorData)),clientDataJSON:Ot(new Uint8Array(a.clientDataJSON)),signature:Ot(new Uint8Array(a.signature)),userHandle:a.userHandle?Ot(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Sn(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function jn(){var e,t;return!!(Pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Nn={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},En={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cn(){const e=e=>null!==e&&"object"===typeof e&&!Array.isArray(e),t=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];for(const i of a)if(i)for(const r in i){const a=i[r];if(void 0!==a)if(Array.isArray(a))n[r]=a;else if(t(a))n[r]=a;else if(e(a)){const t=n[r];e(t)?n[r]=Cn(t,a):n[r]=Cn(a)}else n[r]=a}return n}class Tn{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge(e,t){let{factorId:n,webauthn:r,friendlyName:a,signal:s}=e;try{const{data:e,error:i}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!e)return{data:null,error:i};const o=null!==s&&void 0!==s?s:bn.createNewAbortSignal();if("create"===e.webauthn.type){const{user:t}=e.webauthn.credential_options.publicKey;t.name||(t.name="".concat(t.id,":").concat(a)),t.displayName||(t.displayName=t.name)}switch(e.webauthn.type){case"create":{const r=function(e,t){return Cn(Nn,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.create),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vn("Browser returned unexpected credential type",t)}:{data:null,error:new vn("Empty credential response",t)}}catch(t){return{data:null,error:gn({error:t,options:e})}}}({publicKey:r,signal:o});return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}case"request":{const r=function(e,t){return Cn(En,e,t||{})}(e.webauthn.credential_options.publicKey,null===t||void 0===t?void 0:t.request),{data:a,error:s}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new vn("Browser returned unexpected credential type",t)}:{data:null,error:new vn("Empty credential response",t)}}catch(t){return{data:null,error:yn({error:t,options:e})}}}(Object.assign(Object.assign({},e.webauthn.credential_options),{publicKey:r,signal:o}));return a?{data:{factorId:n,challengeId:e.id,webauthn:{type:e.webauthn.type,credential_response:a}},error:null}:{data:null,error:s}}}}catch(i){return ot(i)?{data:null,error:i}:{data:null,error:new ct("Unexpected error in challenge",i)}}}async _verify(e){let{challengeId:t,factorId:n,webauthn:r}=e;return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate(e,t){let{factorId:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!r)return{data:null,error:new it("rpId is required for WebAuthn authentication")};try{if(!jn())return{data:null,error:new ct("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:a},signal:s},{request:t});if(!e)return{data:null,error:i};const{webauthn:o}=e;return this._verify({factorId:n,challengeId:e.challengeId,webauthn:{type:o.type,rpId:r,rpOrigins:a,credential_response:o.credential_response}})}catch(i){return ot(i)?{data:null,error:i}:{data:null,error:new ct("Unexpected error in authenticate",i)}}}async _register(e,t){let{friendlyName:n,webauthn:{rpId:r=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:a=("undefined"!==typeof window?[window.location.origin]:void 0),signal:s}={}}=e;if(!r)return{data:null,error:new it("rpId is required for WebAuthn registration")};try{if(!jn())return{data:null,error:new ct("Browser does not support WebAuthn",null)};const{data:e,error:i}=await this._enroll({friendlyName:n});if(!e)return await this.client.mfa.listFactors().then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.all.find(e=>"webauthn"===e.factor_type&&e.friendly_name===n&&"unverified"!==e.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null===e||void 0===e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:e.id,friendlyName:e.friendly_name,webauthn:{rpId:r,rpOrigins:a},signal:s},{create:t});return o?this._verify({factorId:e.id,challengeId:o.challengeId,webauthn:{rpId:r,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(i){return ot(i)?{data:null,error:i}:{data:null,error:new ct("Unexpected error in register",i)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Rn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function On(e,t,n){return await n()}const Pn={};class In{get jwks(){var e,t;return null!==(t=null===(e=Pn[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Pn[this.storageKey]=Object.assign(Object.assign({},Pn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Pn[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pn[this.storageKey]=Object.assign(Object.assign({},Pn[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Rn),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=In.nextInstanceID[this.storageKey])&&void 0!==t?t:0,In.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Pt()){const e="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new on({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Dt(a.fetch),this.lock=a.lock||On,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Pt()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=hn:this.lock=On,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tn(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:At()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ln(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ln(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e);try{await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}catch(t){this._debug("#broadcastChannel","error",t)}})}this.initialize().catch(e=>{this._debug("#initialize()","error",e)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(Ze,") ").concat((new Date).toISOString())}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(this._logPrefix(),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},n="none";if(Pt()&&(t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Pt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return ot(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return{error:a}}const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ot(t)?this._returnResult({error:t}):this._returnResult({error:new ct("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Qt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Zt}),{data:s,error:i}=a;if(i||!s)return this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Wt(this.storage,this.storageKey)),a=await Qt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Zt})}else{if(!("phone"in e))throw new pt("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Qt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Zt})}}const{data:s,error:i}=a;if(i||!s)return await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:i});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(a){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:en})}else{if(!("phone"in e))throw new pt("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:en})}}const{data:n,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const e=new ft;return this._returnResult({data:{user:null,session:null},error:e})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}}async signInWithEthereum(e){var t,n,r,a,s,i,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:m}=e;let v;if(Pt())if("object"===typeof d)v=d;else{const e=window;if(!("ethereum"in e)||"object"!==typeof e.ethereum||!("request"in e.ethereum)||"function"!==typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");v=e.ethereum}else{if("object"!==typeof d||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=d}const g=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await v.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=fn(y[0]);let w=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!w){const e=await v.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(n));if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(i));if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(h));if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(e.statement));const f=fn(e.address),p=u?"".concat(u,"://").concat(r):r,m=e.statement?"".concat(e.statement,"\n"):"",v="".concat(p," wants you to sign in with your Ethereum account:\n").concat(f,"\n\n").concat(m);let g="URI: ".concat(d,"\nVersion: ").concat(h,"\nChain ID: ").concat(n).concat(i?"\nNonce: ".concat(i):"","\nIssued At: ").concat(s.toISOString());if(a&&(g+="\nExpiration Time: ".concat(a.toISOString())),o&&(g+="\nNot Before: ".concat(o.toISOString())),l&&(g+="\nRequest ID: ".concat(l)),c){let e="\nResources:";for(const t of c){if(!t||"string"!==typeof t)throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(t));e+="\n- ".concat(t)}g+=e}return"".concat(v,"\n").concat(g)}({domain:g.host,address:b,statement:p,uri:g.href,version:"1",chainId:w,nonce:null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(s=null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(i=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await v.request({method:"personal_sign",params:[pn(h),b]})}try{const{data:t,error:n}=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Zt});if(n)throw n;if(!t||!t.session||!t.user){const e=new ft;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(p){if(ot(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,n,r,a,s,i,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:v}=e;let g;if(Pt())if("object"===typeof h)g=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof h||!(null===v||void 0===v?void 0:v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(t=null===v||void 0===v?void 0:v.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===v||void 0===v?void 0:v.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(y.host," wants you to sign in with your Solana account:"),g.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(r=null===(n=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(a=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(v.signInWithSolana.notBefore)]:[],...(null===(s=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===s?void 0:s.expirationTime)?["Expiration Time: ".concat(v.signInWithSolana.expirationTime)]:[],...(null===(i=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(v.signInWithSolana.chainId)]:[],...(null===(o=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(v.signInWithSolana.nonce)]:[],...(null===(l=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(v.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===v||void 0===v?void 0:v.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...v.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ot(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Zt});if(n)throw n;if(!t||!t.session||!t.user){const e=new ft;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:n})}catch(m){if(ot(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await Mt(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{if(!n&&"pkce"===this.flowType)throw new gt;const{data:t,error:a}=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Zt});if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;if(!t||!t.session||!t.user){const e=new ft;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:a})}catch(a){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:s}=e,i=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Zt}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new ft;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,r,a,s;try{if("email"in e){const{email:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Wt(this.storage,this.storageKey));const{error:o}=await Qt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Qt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(s=null===n||void 0===n?void 0:n.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o})}throw new pt("You must provide either an email or phone number.")}catch(i){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:i}=await Qt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Zt});if(i)throw i;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(r){if(ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,n,r,a,s;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Wt(this.storage,this.storageKey));const l=await Qt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:nn});return(null===(a=l.data)||void 0===a?void 0:a.url)&&Pt()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(i){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new dt;const{error:r}=await Qt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(ot(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:a}=e,{error:s}=await Qt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:s,error:i}=await Qt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:i})}throw new pt("You must provide either an email or phone number and a type")}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Mt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<tt;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Mt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=Jt()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"===typeof n){const t=n.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,n,r)}return t.value||"string"!==typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Qt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:tn}):await this._useSession(async e=>{var t,n,r;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Qt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:tn}):{data:{user:null},error:new dt}})}catch(t){if(ot(t))return ht(t)&&(await this._removeSession(),await zt(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new dt;const s=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Wt(this.storage,this.storageKey));const{data:l,error:c}=await Qt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:tn});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dt;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:s}=Ft(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)return this._returnResult({data:{user:null,session:null},error:s});a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(ot(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new dt;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Pt())throw new mt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new vt("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new mt("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vt("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:l}=e;if(!a||!i||!s||!l)throw new mt("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=et&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const v={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(ot(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return"function"===typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Mt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a&&!ht(a))return this._returnResult({error:a});const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return ot(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status)&&!ht(t))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await zt(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await Wt(this.storage,this.storageKey,!0));try{return await Qt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,s,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Qt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Pt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),this._returnResult({data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null})}catch(n){if(ot(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:s,provider:i,token:o,access_token:l,nonce:c}=e,u=await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:null!==(n=null===a||void 0===a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Zt}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new ft})}catch(r){if(await zt(this.storage,"".concat(this.storageKey,"-code-verifier")),ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)throw s;return await Qt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Qt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Zt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&bt(t)&&Date.now()+n-a<et},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null,t))return void e(t)}catch(a){if(!r(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),ot(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Pt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Mt(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Mt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await Lt(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:Jt()}else if(a&&!a.user&&!a.user){const e=await Mt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await zt(this.storage,this.storageKey+"-user"),await Lt(this.storage,this.storageKey,a)):a.user=Jt()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<tt;if(this._debug(n,"session has".concat(s?"":" not"," expired with margin of ").concat(tt,"s")),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),bt(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new Ut;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new dt;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),ot(a)){const e={data:null,error:a};return bt(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zt(this.storage,"".concat(this.storageKey,"-code-verifier"));const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Lt(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Gt(e);await Lt(this.storage,this.storageKey,r)}else{const e=Gt(t);await Lt(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),et);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&"object"===typeof t&&"function"===typeof t.unref?t.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/et);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(et,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof un))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await Wt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):await Qt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await Qt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),this._returnResult({data:o,error:null}))})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?kn(e.webauthn.credential_response):_n(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Qt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:s,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await Qt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:e,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});if(s.error)return s;const{data:i}=s;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:wn(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:xn(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null===t||void 0===t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,r,a;if(e)try{const{payload:r}=Ft(e);let a=null;r.aal&&(a=r.aal);let s=a;const{data:{user:i},error:o}=await this.getUser(e);if(o)return this._returnResult({data:null,error:o});(null!==(n=null===(t=null===i||void 0===i?void 0:i.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:r.amr||[]},error:null}}catch(u){if(ot(u))return this._returnResult({data:null,error:u});throw u}const{data:{session:s},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ft(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;(null!==(a=null===(r=s.user.factors)||void 0===r?void 0:r.filter(e=>"verified"===e.status))&&void 0!==a?a:[]).length>0&&(c="aal2");return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:o.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await Qt(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(e),{headers:this.headers,jwt:n.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new dt})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new dt});const s=await Qt(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Pt()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new dt});const s=await Qt(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(e,"/consent"),{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Pt()&&!(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Qt(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new dt})})}catch(e){if(ot(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?(await Qt(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new dt})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:a}=await Qt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});n=e.session.access_token}const{header:r,payload:a,signature:s,raw:{header:i,payload:o}}=Ft(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,s,function(e){const t=[];return Tt(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new xt("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}}In.nextInstanceID={};const An=In;let Dn="";Dn="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ln={headers:function(){const e={"X-Client-Info":"supabase-js-".concat(Dn,"/").concat("2.93.1")},t=function(){const e=globalThis.process;if(e&&e.platform){const t=e.platform;if("darwin"===t)return"macOS";if("win32"===t)return"Windows";if("linux"===t)return"Linux";if("android"===t)return"Android"}if("undefined"!==typeof navigator&&navigator.userAgentData&&navigator.userAgentData.platform){const e=navigator.userAgentData.platform;if("macOS"===e)return"macOS";if("Windows"===e)return"Windows";if("Linux"===e)return"Linux";if("Android"===e)return"Android";if("iOS"===e)return"iOS"}return null}();t&&(e["X-Supabase-Client-Platform"]=t);const n=function(){const e=globalThis.process;if(e){const n=e.versions;if(n&&n.node&&"undefined"===typeof window)try{const e=globalThis.require;if(e)return e("os").release()}catch(t){return null}}if("undefined"!==typeof Deno&&Deno.osRelease)try{return Deno.osRelease()}catch(t){return null}return"undefined"!==typeof navigator&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}();n&&(e["X-Supabase-Client-Platform-Version"]=n);const r=function(){if("undefined"!==typeof Deno)return"deno";if("undefined"!==typeof Bun)return"bun";const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return"node"}return null}();r&&(e["X-Supabase-Client-Runtime"]=r);const a=function(){if("undefined"!==typeof Deno&&Deno.version)return Deno.version.deno;if("undefined"!==typeof Bun&&Bun.version)return Bun.version;const e=globalThis.process;if(e){const t=e.versions;if(t&&t.node)return t.node}return null}();return a&&(e["X-Supabase-Client-Runtime-Version"]=a),e}()},Mn={schema:"public"},zn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Un={};function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bn(e){var t=function(e,t){if("object"!=Fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fn(t)?t:t+""}function qn(e,t,n){return(t=Bn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach(function(t){qn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Vn=(e,t,n)=>{const r=(e=>e?function(){return e(...arguments)}:function(){return fetch(...arguments)})(n),a=Headers;return async(n,s)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new a(null===s||void 0===s?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Kn(Kn({},s),{},{headers:l}))}};var Hn=class extends An{constructor(e){super(e)}},Jn=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const s=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const i="sb-".concat(s.hostname.split(".")[0],"-auth-token"),o=function(e,t){var n,r;const{db:a,auth:s,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Kn(Kn({},l),a),auth:Kn(Kn({},c),s),realtime:Kn(Kn({},u),i),storage:{},global:Kn(Kn(Kn({},d),o),{},{headers:Kn(Kn({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Mn,realtime:Un,auth:Kn(Kn({},zn),{},{storageKey:i}),global:Ln});var l;(this.storageKey=null!==(r=o.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=o.global.headers)&&void 0!==a?a:{},o.accessToken)?(this.accessToken=o.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(l=o.auth)&&void 0!==l?l:{},this.headers,o.global.fetch);this.fetch=Vn(t,this._getAccessToken.bind(this),o.global.fetch),this.realtime=this._initRealtimeClient(Kn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},o.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new E(new URL("rest/v1",s).href,{headers:this.headers,schema:o.db.schema,fetch:this.fetch}),this.storage=new Qe(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),o.accessToken||this._listenForAuthEvents()}get functions(){return new w(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{head:!1,get:!1,count:void 0};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,n=this;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:n.supabaseKey}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d,throwOnError:h}=e;const f={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Hn({url:this.authUrl.href,headers:Kn(Kn({},f),t),storageKey:l,autoRefreshToken:r,persistSession:a,detectSessionInUrl:s,storage:i,userStorage:o,flowType:c,lock:u,debug:d,throwOnError:h,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new ce(this.realtimeUrl.href,Kn(Kn({},e),{},{params:Kn(Kn({},{apikey:this.supabaseKey}),null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}};(function(){if("undefined"!==typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(void 0===t||null===t)return!1;const n=t.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Gn="https://frbdzhddqbkuzwaqwvwi.supabase.co",$n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyYmR6aGRkcWJrdXp3YXF3dndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MTYxNzEsImV4cCI6MjA4NTA5MjE3MX0.yLOrB38FQ3F_6r7wpVq2z8aVdOjSFuea9nyqP6xzkKE",Yn=Gn&&$n?((e,t,n)=>new Jn(e,t,n))(Gn,$n):null,Xn=()=>!!Yn;const Qn="ADD_TOAST",Zn="UPDATE_TOAST",er="DISMISS_TOAST",tr="REMOVE_TOAST";let nr=0;const rr=new Map,ar=e=>{if(rr.has(e))return;const t=setTimeout(()=>{rr.delete(e),lr({type:tr,toastId:e})},1e6);rr.set(e,t)},sr=(e,t)=>{switch(t.type){case Qn:return u(u({},e),{},{toasts:[t.toast,...e.toasts].slice(0,1)});case Zn:return u(u({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?u(u({},e),t.toast):e)});case er:{const{toastId:n}=t;return n?ar(n):e.toasts.forEach(e=>{ar(e.id)}),u(u({},e),{},{toasts:e.toasts.map(e=>e.id===n||void 0===n?u(u({},e),{},{open:!1}):e)})}case tr:return void 0===t.toastId?u(u({},e),{},{toasts:[]}):u(u({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});default:return e}},ir=[];let or={toasts:[]};function lr(e){or=sr(or,e),ir.forEach(e=>{e(or)})}function cr(e){let t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));const n=(nr=(nr+1)%Number.MAX_SAFE_INTEGER,nr.toString()),r=()=>lr({type:er,toastId:n});return lr({type:Qn,toast:u(u({},t),{},{id:n,open:!0,onOpenChange:e=>{e||r()}})}),{id:n,dismiss:r,update:e=>lr({type:Zn,toast:u(u({},e),{},{id:n})})}}function ur(){const[e,t]=r.useState(or);return r.useEffect(()=>(ir.push(t),()=>{const e=ir.indexOf(t);e>-1&&ir.splice(e,1)}),[e]),u(u({},e),{},{toast:cr,dismiss:e=>lr({type:er,toastId:e})})}var dr=n(579);const hr=[{value:"low",label:"\u05e0\u05de\u05d5\u05da",icon:"\ud83c\udf19",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05e0\u05de\u05d5\u05db\u05d4",color:"#22c55e"},{value:"medium",label:"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9",icon:"\u2600\ufe0f",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9\u05ea",color:"#f59e0b"},{value:"high",label:"\u05d2\u05d1\u05d5\u05d4",icon:"\u26a1",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d2\u05d1\u05d5\u05d4\u05d4",color:"#ef4444"}],fr=[{value:"work",label:"\u05e2\u05d1\u05d5\u05d3\u05d4",color:"#6366f1"},{value:"family",label:"\u05de\u05e9\u05e4\u05d7\u05d4",color:"#ec4899",override:!0},{value:"health",label:"\u05d1\u05e8\u05d9\u05d0\u05d5\u05ea",color:"#22c55e"},{value:"personal",label:"\u05d0\u05d9\u05e9\u05d9",color:"#8b5cf6"},{value:"urgent",label:"\u05d3\u05d7\u05d5\u05e3",color:"#ef4444"},{value:"waiting",label:"\u05de\u05de\u05ea\u05d9\u05df",color:"#64748b"}];const pr=function(e){let{task:t,onClose:n,onUpdate:a}=e;const[s,i]=(0,r.useState)(u({},t)),[o]=(0,r.useState)(u({},t)),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(e.preventDefault(),n())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]);const m=(e,t)=>{i(n=>u(u({},n),{},{[e]:t})),f.includes(e)||p(t=>[...t,e])},v=()=>(s.labels||[]).includes("family"),g=async()=>{const e=f.map(e=>({field:e,original:o[e],corrected:s[e],timestamp:(new Date).toISOString()}));try{await Yn.from("correction_signals").insert({user_id:"dan",entity_type:"task",entity_id:t.id,corrections:e,created_at:(new Date).toISOString()})}catch(n){console.error("Log correction signal error:",n)}};return(0,dr.jsx)("div",{className:"task-card-overlay",onClick:n,children:(0,dr.jsxs)("div",{className:"task-card",onClick:e=>e.stopPropagation(),children:[(0,dr.jsxs)("header",{className:"task-card-header",children:[(0,dr.jsx)("button",{className:"task-card-cancel-btn",onClick:n,children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,dr.jsx)("h2",{children:"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05e9\u05d9\u05de\u05d4"}),(0,dr.jsx)("button",{className:"task-card-save-btn",onClick:async()=>{c(!0);try{if(Xn()){const{error:e}=await Yn.from("tasks").update({text:s.text,title:s.title||s.text,labels:s.labels,energy_level:s.energy_level,frozen:s.frozen,archived:s.archived,assignee:s.assignee,family_override:v(),updated_at:(new Date).toISOString()}).eq("id",t.id);e&&console.warn("Supabase save failed, continuing with local update:",e),f.length>0&&g().catch(console.warn)}cr({title:"\u2713 \u05e0\u05e9\u05de\u05e8",description:"\u05d4\u05de\u05e9\u05d9\u05de\u05d4 \u05e2\u05d5\u05d3\u05db\u05e0\u05d4"}),a&&a(s),n()}catch(e){console.error("Save task error:",e),a&&a(s),n()}finally{c(!1)}},disabled:l||0===f.length,children:l?"...":"\u05e9\u05de\u05d5\u05e8"})]}),(0,dr.jsxs)("div",{className:"task-card-field",children:[(0,dr.jsx)("label",{children:"\u05ea\u05d9\u05d0\u05d5\u05e8 \u05d4\u05de\u05e9\u05d9\u05de\u05d4"}),(0,dr.jsx)("textarea",{className:"task-card-textarea",value:s.text||s.title||"",onChange:e=>m("text",e.target.value),rows:3})]}),(0,dr.jsxs)("div",{className:"task-card-field",children:[(0,dr.jsx)("label",{children:"\u05e8\u05de\u05ea \u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05e0\u05d3\u05e8\u05e9\u05ea"}),(0,dr.jsx)("div",{className:"task-card-energy",children:hr.map(e=>(0,dr.jsxs)("button",{className:"task-card-energy-btn ".concat(s.energy_level===e.value?"active":""),style:{"--energy-color":e.color},onClick:()=>m("energy_level",e.value),title:e.tooltip,children:[(0,dr.jsx)("span",{className:"task-card-energy-icon",title:e.tooltip,children:e.icon}),(0,dr.jsx)("span",{children:e.label})]},e.value))})]}),(0,dr.jsxs)("div",{className:"task-card-field",children:[(0,dr.jsx)("label",{children:"\u05ea\u05d5\u05d5\u05d9\u05d5\u05ea"}),(0,dr.jsx)("div",{className:"task-card-labels",children:fr.map(e=>(0,dr.jsxs)("button",{className:"task-card-label ".concat((s.labels||[]).includes(e.value)?"active":""),style:{"--label-color":e.color},onClick:()=>(e=>{const t=s.labels||[],n=t.includes(e)?t.filter(t=>t!==e):[...t,e];m("labels",n)})(e.value),children:[e.label,e.override&&(0,dr.jsx)("span",{className:"task-card-override-badge",title:"Always takes priority",children:"\ud83d\udc51"})]},e.value))}),v()&&(0,dr.jsx)("p",{className:"task-card-override-note",children:"\ud83c\udfe0 \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05de\u05e9\u05e4\u05d7\u05d4 \u05de\u05e7\u05d1\u05dc\u05d5\u05ea \u05e2\u05d3\u05d9\u05e4\u05d5\u05ea \u05e2\u05dc \u05e4\u05e0\u05d9 \u05e2\u05d1\u05d5\u05d3\u05d4"})]}),(0,dr.jsxs)("div",{className:"task-card-field",children:[(0,dr.jsx)("label",{children:"\u05d0\u05d7\u05e8\u05d0\u05d9"}),(0,dr.jsxs)("select",{className:"task-card-select",value:s.assignee||"dan",onChange:e=>m("assignee",e.target.value),children:[(0,dr.jsx)("option",{value:"dan",children:"\u05d3\u05df"}),(0,dr.jsx)("option",{value:"pa",children:"\u05e2\u05d5\u05d6\u05e8 \u05d0\u05d9\u05e9\u05d9"}),(0,dr.jsx)("option",{value:"mikka",children:"\u05de\u05d9\u05e7\u05d4"})]})]}),(0,dr.jsxs)("div",{className:"task-card-field",children:[(0,dr.jsx)("label",{children:"\u05ea\u05dc\u05d5\u05d9\u05d5\u05ea"}),(0,dr.jsx)("input",{type:"text",className:"task-card-input",placeholder:"\u05de\u05d7\u05db\u05d4 \u05dc...",value:s.dependencies||"",onChange:e=>m("dependencies",e.target.value)})]}),(0,dr.jsxs)("div",{className:"task-card-actions-row",children:[(0,dr.jsx)("button",{className:"task-card-action-btn ".concat(s.frozen?"active":""),onClick:()=>{m("frozen",!s.frozen)},children:s.frozen?"\ud83d\udd13 \u05e9\u05d7\u05e8\u05e8":"\ud83d\udd12 \u05d4\u05e7\u05e4\u05d0"}),(0,dr.jsx)("button",{className:"task-card-action-btn danger",onClick:()=>h(!0),children:"\ud83d\udce6 \u05d0\u05e8\u05db\u05d9\u05d1"})]}),d&&(0,dr.jsxs)("div",{className:"task-card-confirm",children:[(0,dr.jsx)("p",{children:"\u05dc\u05d4\u05e2\u05d1\u05d9\u05e8 \u05dc\u05d0\u05e8\u05db\u05d9\u05d5\u05df?"}),(0,dr.jsxs)("div",{className:"task-card-confirm-actions",children:[(0,dr.jsx)("button",{onClick:async()=>{m("archived",!0),h(!1)},children:"\u05db\u05df"}),(0,dr.jsx)("button",{onClick:()=>h(!1),children:"\u05dc\u05d0"})]})]}),f.length>0&&(0,dr.jsxs)("div",{className:"task-card-edit-indicator",children:["\u270f\ufe0f ",f.length," \u05e9\u05d3\u05d5\u05ea \u05e9\u05d5\u05e0\u05d5"]})]})})};function mr(e){let{width:t,height:n,className:r="",variant:a="default"}=e;const s={width:t||"100%",height:n||"1em"};return(0,dr.jsx)("div",{className:"skeleton skeleton-".concat(a," ").concat(r),style:s,"aria-hidden":"true"})}function vr(e){let{lines:t=3}=e;return(0,dr.jsxs)("div",{className:"skeleton-card",children:[(0,dr.jsxs)("div",{className:"skeleton-card-header",children:[(0,dr.jsx)(mr,{width:"2rem",height:"2rem",variant:"circle"}),(0,dr.jsx)(mr,{width:"40%",height:"0.75rem"})]}),(0,dr.jsx)("div",{className:"skeleton-card-body",children:Array.from({length:t}).map((e,n)=>(0,dr.jsx)(mr,{width:n===t-1?"60%":"100%",height:"0.875rem"},n))})]})}function gr(){return(0,dr.jsxs)("div",{className:"cmd-skeleton",children:[(0,dr.jsxs)("div",{className:"cmd-skeleton-header",children:[(0,dr.jsx)(mr,{width:"180px",height:"2rem"}),(0,dr.jsx)(mr,{width:"120px",height:"1rem"}),(0,dr.jsx)(mr,{width:"80px",height:"1.5rem",variant:"pill"})]}),(0,dr.jsxs)("div",{className:"cmd-skeleton-cards",children:[(0,dr.jsx)(vr,{lines:2}),(0,dr.jsx)(vr,{lines:3}),(0,dr.jsx)(vr,{lines:2})]})]})}const yr=(new Date).toISOString().split("T")[0];function br(){return new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Nicosia"}))}function wr(e){let{onComplete:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){if(Xn()){try{var e;const{data:t}=await Yn.from("daily_briefs").select("metadata").eq("user_id","dan").eq("date",yr).single();null!==t&&void 0!==t&&null!==(e=t.metadata)&&void 0!==e&&e.morning_anchor&&a(t.metadata.morning_anchor)}catch(t){}i(!1)}else i(!1)}()},[]);const o=async e=>{if(a(e),t&&t(e),Xn())try{const{data:t}=await Yn.from("daily_briefs").select("metadata").eq("user_id","dan").eq("date",yr).single(),n=u(u({},(null===t||void 0===t?void 0:t.metadata)||{}),{},{morning_anchor:e,morning_anchor_time:(new Date).toISOString()});if(t){const{error:e}=await Yn.from("daily_briefs").update({metadata:n}).eq("user_id","dan").eq("date",yr);if(e)throw e}else{const{error:e}=await Yn.from("daily_briefs").insert({user_id:"dan",date:yr,doing_today:[],not_doing_today:[],load_score:0,metadata:n});if(e)throw e}}catch(n){console.error("Morning anchor save error:",n),a(null),cr({title:"Failed to save",description:"Morning anchor wasn't saved. Try again.",variant:"destructive"})}};return br().getHours()>=11||s?null:"done"===n?(0,dr.jsxs)("div",{className:"cmd-card cmd-card-anchor cmd-card-anchor-done",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u2705"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05e2\u05d5\u05d2\u05df \u05d1\u05d5\u05e7\u05e8"}),(0,dr.jsx)("span",{className:"cmd-card-value cmd-anchor-done-text",children:"\u05d4\u05d5\u05e9\u05dc\u05dd \u2014 \u05d9\u05d5\u05dd \u05d8\u05d5\u05d1 \u05de\u05ea\u05d7\u05d9\u05dc \u05db\u05d0\u05df"})]})]}):"skipped"===n?null:(0,dr.jsxs)("div",{className:"cmd-card cmd-card-anchor",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u2600\ufe0f"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05e2\u05d5\u05d2\u05df \u05d1\u05d5\u05e7\u05e8"}),(0,dr.jsx)("span",{className:"cmd-card-value",children:"\u05e1\u05e7\u05d9\u05e8\u05d4 / \u05e7\u05e4\u05d4 / \u05ea\u05e0\u05d5\u05e2\u05d4 \u05e7\u05dc\u05d4"}),(0,dr.jsxs)("div",{className:"cmd-anchor-actions",children:[(0,dr.jsx)("button",{className:"cmd-anchor-btn cmd-anchor-done",onClick:()=>o("done"),children:"\u2705 \u05e1\u05d9\u05d9\u05de\u05ea\u05d9"}),(0,dr.jsx)("button",{className:"cmd-anchor-btn cmd-anchor-skip",onClick:()=>o("skipped"),children:"\u23ed\ufe0f \u05d3\u05dc\u05d2"})]})]})]})}function xr(e,t,n){const r=br(),a=t?new Date(t):null,s=n?new Date(n):null;return s&&s<r?"past":a&&a<=r&&(!s||s>=r)?"ongoing":a&&a>r?"upcoming":a&&a<r?"past":"upcoming"}const kr=function(){var e;const[t,n]=(0,r.useState)(null),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(br()),[d,h]=(0,r.useState)({total:0,breakdown:[]}),[f,p]=(0,r.useState)(!1),[m,v]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&("j"===e.key||"ArrowDown"===e.key?(e.preventDefault(),w(e=>Math.min(e+1,5))):"k"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),w(e=>Math.max(e-1,0))))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const x=(0,r.useCallback)(async()=>{if(Xn()){try{const[e,t]=await Promise.all([Yn.from("daily_briefs").select("*").eq("user_id","dan").eq("date",yr).single(),Yn.from("goals").select("*").eq("user_id","dan").eq("status","active")]);e.data&&n(e.data),t.data&&s(t.data)}catch(e){console.error("Brief fetch error:",e)}o(!1)}else o(!1)},[]),k=(0,r.useCallback)(async()=>{if(!Xn())return;const e=[];let t=0;try{var n;const{data:r}=await Yn.from("tasks").select("id").eq("user_id","dan").eq("completed",!0).gte("completed_at","".concat(yr,"T00:00:00Z")).lte("completed_at","".concat(yr,"T23:59:59Z")),a=(null===r||void 0===r?void 0:r.length)||0;a>0&&(e.push({label:"\u05de\u05e9\u05d9\u05de\u05d5\u05ea",count:a}),t+=a);const s=(new Date).toISOString(),{data:i}=await Yn.from("events").select("id").eq("user_id","dan").gte("start_time","".concat(yr,"T00:00:00Z")).lte("start_time","".concat(yr,"T23:59:59Z")).lt("end_time",s),o=(null===i||void 0===i?void 0:i.length)||0;o>0&&(e.push({label:"\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd",count:o}),t+=o);const{data:l}=await Yn.from("daily_briefs").select("metadata").eq("user_id","dan").eq("date",yr).single();"done"===(null===l||void 0===l||null===(n=l.metadata)||void 0===n?void 0:n.morning_anchor)&&(e.push({label:"\u05e2\u05d5\u05d2\u05df \u05d1\u05d5\u05e7\u05e8",count:1}),t+=1);const{data:c}=await Yn.from("health_data").select("*").eq("user_id","dan").eq("date",yr).single();null!==c&&void 0!==c&&c.steps&&c.steps>5e3&&(e.push({label:"\u05e4\u05e2\u05d9\u05dc\u05d5\u05ea \u05d2\u05d5\u05e4\u05e0\u05d9\u05ea",count:1}),t+=1)}catch(r){console.error("Closures calc error:",r)}h({total:t,breakdown:e})},[]);(0,r.useEffect)(()=>{k();const e=setInterval(k,12e4);return()=>clearInterval(e)},[k,m]),(0,r.useEffect)(()=>{x()},[x]),(0,r.useEffect)(()=>{const e=setInterval(()=>{c(br())},6e4);return()=>clearInterval(e)},[]);const _=e=>{const t={id:e.id||e.taskId||"temp-".concat(Date.now()),text:e.text,title:e.text,labels:e.labels||[],energy_level:e.energy_level||"medium",dependencies:e.dependencies||"",frozen:e.frozen||!1,archived:e.archived||!1,assignee:e.assignee||"dan"};y(t)},S=()=>{var e,n;if(!t)return{ongoing:[],upcoming:[],past:[],tasks:[]};const r=(null===(e=t.doing_today_structured)||void 0===e?void 0:e.length)>0?t.doing_today_structured:(null===(n=t.metadata)||void 0===n?void 0:n.doing_today_structured)||[];if(r.length>0){const e=r.map(e=>u(u({},e),{},{liveStatus:xr(e.text,e.startTime,e.endTime)}));return{ongoing:e.filter(e=>"ongoing"===e.liveStatus),upcoming:e.filter(e=>"upcoming"===e.liveStatus),past:e.filter(e=>"past"===e.liveStatus),tasks:e.filter(e=>"task"===e.timeStatus)}}const a=(t.doing_today||[]).map((e,t)=>{const n=e.match(/^(\d{1,2}:\d{2})\s/);if(n){const[r,a]=n[1].split(":").map(Number),s=new Date(l);s.setHours(r,a,0,0);const i=new Date(s.getTime()+36e5);return{text:e,liveStatus:xr(0,s,i),isEvent:!0,id:"event-".concat(t)}}return{text:e,liveStatus:"upcoming",isEvent:!1,isTask:!0,id:"task-".concat(t)}});return{ongoing:a.filter(e=>"ongoing"===e.liveStatus),upcoming:a.filter(e=>"upcoming"===e.liveStatus),past:a.filter(e=>"past"===e.liveStatus),tasks:a.filter(e=>!e.isEvent)}};if(i)return(0,dr.jsx)("div",{className:"cmd",children:(0,dr.jsx)(gr,{})});const j=(()=>{const{ongoing:e,upcoming:t,tasks:n}=S();return e.length>0?{text:e[0].text,status:"ongoing"}:t.length>0?{text:t[0].text,status:"upcoming"}:n.length>0?{text:n[0].text,status:"task"}:null})(),N=(()=>{const{ongoing:e,upcoming:t,tasks:n}=S();return[...e,...t,...n].slice(1,4)})(),E=(()=>{var e;const{past:n}=S(),r=(null===t||void 0===t?void 0:t.completed_events)||(null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.completed_events)||[];return[...n,...r.filter(e=>!n.some(t=>t.text===e.text))].slice(0,3)})(),C=(()=>{var e;return null!==t&&void 0!==t&&null!==(e=t.not_doing_today)&&void 0!==e&&e.length?t.not_doing_today.slice(0,2):null})(),T=(null===t||void 0===t?void 0:t.warning)||null,R=(null===t||void 0===t?void 0:t.small_action)||null,O=(()=>{const e=(null===t||void 0===t?void 0:t.load_score)||0;return e>=70?{label:"\u05d9\u05d5\u05dd \u05e2\u05de\u05d5\u05e1",level:"heavy",message:"\u05e4\u05d7\u05d5\u05ea = \u05d9\u05d5\u05ea\u05e8. \u05d4\u05de\u05e1\u05da \u05e8\u05d9\u05e7 \u05d1\u05db\u05d5\u05d5\u05e0\u05d4."}:e>=45?{label:"\u05d9\u05d5\u05dd \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9",level:"medium",message:""}:{label:"\u05d9\u05d5\u05dd \u05e7\u05dc\u05d9\u05dc",level:"light",message:""}})(),P=(()=>{var e;return(null===t||void 0===t?void 0:t.sleep_confidence)||(null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.sleep_confidence)||null})(),I=(null===t||void 0===t?void 0:t.no_active_focus)||(null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.no_active_focus)||!j;return(0,dr.jsxs)("div",{className:"cmd",children:[(0,dr.jsxs)("div",{className:"cmd-container",children:[(0,dr.jsxs)("header",{className:"cmd-header",children:[(0,dr.jsxs)("h1",{className:"cmd-greeting",children:[(()=>{const e=l.getHours();return e<6?"\u05dc\u05d9\u05dc\u05d4 \u05d8\u05d5\u05d1":e<12?"\u05d1\u05d5\u05e7\u05e8 \u05d8\u05d5\u05d1":e<17?"\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd \u05d8\u05d5\u05d1\u05d9\u05dd":e<21?"\u05e2\u05e8\u05d1 \u05d8\u05d5\u05d1":"\u05dc\u05d9\u05dc\u05d4 \u05d8\u05d5\u05d1"})(),", Dan"]}),(0,dr.jsx)("p",{className:"cmd-date",children:(()=>{const e=new Date;return"\u05d9\u05d5\u05dd ".concat(["\u05e8\u05d0\u05e9\u05d5\u05df","\u05e9\u05e0\u05d9","\u05e9\u05dc\u05d9\u05e9\u05d9","\u05e8\u05d1\u05d9\u05e2\u05d9","\u05d7\u05de\u05d9\u05e9\u05d9","\u05e9\u05d9\u05e9\u05d9","\u05e9\u05d1\u05ea"][e.getDay()],", ").concat(e.getDate()," ").concat(["\u05d9\u05e0\u05d5\u05d0\u05e8","\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8","\u05de\u05e8\u05e5","\u05d0\u05e4\u05e8\u05d9\u05dc","\u05de\u05d0\u05d9","\u05d9\u05d5\u05e0\u05d9","\u05d9\u05d5\u05dc\u05d9","\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8","\u05e1\u05e4\u05d8\u05de\u05d1\u05e8","\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8","\u05e0\u05d5\u05d1\u05de\u05d1\u05e8","\u05d3\u05e6\u05de\u05d1\u05e8"][e.getMonth()])})()}),null!=(null===t||void 0===t?void 0:t.load_score)&&(0,dr.jsx)("div",{className:"cmd-load cmd-load-".concat(O.level),children:O.label})]}),(0,dr.jsx)(wr,{onComplete:e=>{"done"===e&&v(!0)}}),(0,dr.jsxs)("div",{className:"cmd-cards",children:[j?(0,dr.jsxs)("div",{className:"cmd-card cmd-card-focus ".concat("ongoing"===j.status?"cmd-card-ongoing":""," ").concat(j.isTask?"cmd-card-clickable":""),onClick:()=>j.isTask&&_(j),style:j.isTask?{cursor:"pointer"}:{},children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\ud83c\udfaf"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"ongoing"===j.status?"\u05e2\u05db\u05e9\u05d9\u05d5":"\u05d4\u05d1\u05d0"}),(0,dr.jsx)("span",{className:"cmd-card-value",children:j.text}),"ongoing"===j.status&&(0,dr.jsx)("span",{className:"cmd-card-badge cmd-badge-live",children:"\u25cf \u05e4\u05e2\u05d9\u05dc"}),j.isTask&&(0,dr.jsx)("span",{className:"cmd-card-badge cmd-badge-edit",children:"\u270f\ufe0f \u05dc\u05d7\u05e5 \u05dc\u05e2\u05e8\u05d9\u05db\u05d4"})]})]}):I?(0,dr.jsxs)("div",{className:"cmd-card cmd-card-focus cmd-card-clear",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u2728"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05e9\u05d0\u05e8\u05d9\u05ea \u05d4\u05d9\u05d5\u05dd"}),(0,dr.jsx)("span",{className:"cmd-card-value",children:"\u05db\u05dc \u05d4\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd \u05d4\u05e1\u05ea\u05d9\u05d9\u05de\u05d5. \u05d4\u05d6\u05de\u05df \u05e9\u05dc\u05da."})]})]}):null,N.length>0&&(0,dr.jsxs)("div",{className:"cmd-card cmd-card-upcoming",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\ud83d\udccb"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05d0\u05d7\u05e8 \u05db\u05da"}),N.map((e,t)=>(0,dr.jsxs)("span",{className:"cmd-card-value cmd-card-upcoming-item ".concat(e.isTask?"cmd-card-clickable-item":""),onClick:()=>e.isTask&&_(e),style:e.isTask?{cursor:"pointer"}:{},children:[e.text,e.isTask&&(0,dr.jsx)("span",{className:"cmd-edit-hint",children:" \u270f\ufe0f"})]},t))]})]}),C&&C.length>0&&(0,dr.jsxs)("div",{className:"cmd-card cmd-card-not-today",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u26d4"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05dc\u05d0 \u05d4\u05d9\u05d5\u05dd"}),C.map((e,t)=>(0,dr.jsx)("span",{className:"cmd-card-value cmd-card-strike",children:e},t))]})]}),T&&(0,dr.jsxs)("div",{className:"cmd-card cmd-card-warning",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u26a0\ufe0f"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsxs)("span",{className:"cmd-card-label",children:["\u05e9\u05d9\u05dd \u05dc\u05d1","low"===P&&T.includes("sleep")&&(0,dr.jsx)("span",{className:"cmd-confidence-tag",children:" \xb7 \u05de\u05d9\u05d3\u05e2 \u05d7\u05dc\u05e7\u05d9"})]}),(0,dr.jsx)("span",{className:"cmd-card-value",children:T})]})]}),R&&(0,dr.jsxs)("div",{className:"cmd-card cmd-card-action",children:[(0,dr.jsx)("div",{className:"cmd-card-icon",children:"\u26a1"}),(0,dr.jsxs)("div",{className:"cmd-card-content",children:[(0,dr.jsx)("span",{className:"cmd-card-label",children:"\u05d4\u05d7\u05dc\u05d8\u05d4"}),(0,dr.jsx)("span",{className:"cmd-card-value",children:R})]})]})]}),E.length>0&&(0,dr.jsxs)("div",{className:"cmd-completed",children:[(0,dr.jsx)("span",{className:"cmd-completed-label",children:"\u2713 \u05d4\u05d5\u05e9\u05dc\u05dd"}),(0,dr.jsx)("div",{className:"cmd-completed-items",children:E.map((e,t)=>(0,dr.jsx)("span",{className:"cmd-completed-item",children:e.text},t))})]}),"heavy"===O.level&&O.message&&(0,dr.jsx)("p",{className:"cmd-heavy-msg",children:O.message}),!t&&(0,dr.jsxs)("div",{className:"cmd-empty",children:[(0,dr.jsx)("p",{className:"cmd-empty-text",children:"\u05d0\u05d9\u05df \u05d1\u05e8\u05d9\u05e3 \u05dc\u05d4\u05d9\u05d5\u05dd."}),(0,dr.jsx)("p",{className:"cmd-empty-sub",children:"\u05d4\u05e8\u05e5 \u05d0\u05ea \u05de\u05e0\u05d5\u05e2 \u05d4\u05d4\u05d7\u05dc\u05d8\u05d5\u05ea \u05dc\u05d9\u05e6\u05d9\u05e8\u05ea \u05d1\u05e8\u05d9\u05e3."})]}),(()=>{const e=(()=>{var e,t;if(!a||0===a.length)return null;const n=[...a].sort((e,t)=>(t.priority||0)-(e.priority||0))[0];return n?{title:n.title,confidence:(null===(e=n.metrics)||void 0===e?void 0:e.confidence)||(null===(t=n.metadata)||void 0===t?void 0:t.confidence)||"unknown",domain:n.domain}:null})(),n=(()=>{if(!a||0===a.length)return null;for(const e of a)if(e.protection_rules&&e.protection_rules.length>0&&(null===t||void 0===t?void 0:t.load_score)>=70&&"health"===e.domain)return"\u26a0\ufe0f ".concat(e.title,": ").concat(e.protection_rules[0]);return null})();return e||n?(0,dr.jsxs)("div",{className:"cmd-goal-context",children:[e&&(0,dr.jsxs)("span",{className:"cmd-goal-hint",children:["\ud83c\udfaf ",e.title,"behind"===e.confidence&&(0,dr.jsx)("span",{className:"cmd-goal-behind",children:" \xb7 \u05d1\u05e4\u05d9\u05d2\u05d5\u05e8"})]}),n&&(0,dr.jsx)("span",{className:"cmd-goal-warning",children:n})]}):null})(),d.total>0&&(0,dr.jsxs)("div",{className:"cmd-closures",onClick:()=>p(!f),children:[(0,dr.jsxs)("span",{className:"cmd-closures-label",children:["\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05d4\u05d9\u05d5\u05dd: ",d.total]}),f&&d.breakdown.length>0&&(0,dr.jsx)("div",{className:"cmd-closures-breakdown",children:d.breakdown.map((e,t)=>(0,dr.jsxs)("span",{className:"cmd-closures-item",children:[e.label,": ",e.count]},t))})]})]}),g&&(0,dr.jsx)(pr,{task:g,onClose:()=>y(null),onUpdate:e=>{x(),k()}})]})},_r=(new Date).toISOString().split("T")[0];const Sr=function(){var e,t,n,a,s,i;const[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,p]=(0,r.useState)([]),[m,v]=(0,r.useState)([]),[g,y]=(0,r.useState)(!0),b=(0,r.useCallback)(async()=>{if(Xn()){try{const e="".concat(_r,"T00:00:00Z"),t="".concat(_r,"T23:59:59Z"),[n,r,a,s,i]=await Promise.all([Yn.from("daily_briefs").select("*").eq("user_id","dan").eq("date",_r).single(),Yn.from("health_data").select("*").eq("user_id","dan").order("date",{ascending:!1}).limit(7),Yn.from("events").select("*").gte("start_time",e).lte("start_time",t).eq("user_id","dan").order("start_time"),Yn.from("habits").select("*").eq("user_id","dan"),Yn.from("goals").select("*").eq("user_id","dan").eq("status","active")]);n.data&&l(n.data),r.data&&u(r.data),a.data&&h(a.data),s.data&&p(s.data),i.data&&v(i.data)}catch(e){console.error("Transparency fetch error:",e)}y(!1)}else y(!1)},[]);(0,r.useEffect)(()=>{b()},[b]);const w=c.find(e=>e.date===_r),x=(null===o||void 0===o?void 0:o.metadata)||{},k=(e=>{switch(e){case"good":return{text:"Normal",color:"var(--green)",bg:"var(--green-soft)"};case"declining":return{text:"Declining",color:"var(--amber)",bg:"var(--amber-soft)"};case"conservation":return{text:"Conservation mode",color:"var(--red)",bg:"var(--red-soft)"};default:return{text:"Unknown",color:"var(--text-muted)",bg:"var(--bg-muted)"}}})(null===o||void 0===o?void 0:o.sleep_trend),_=f.filter(e=>{if(!e.last_seen)return!1;const t=(Date.now()-new Date(e.last_seen))/864e5;return"daily"===e.baseline_frequency&&t>2||("3x_week"===e.baseline_frequency&&t>4||"weekly"===e.baseline_frequency&&t>10)});return g?(0,dr.jsx)("div",{className:"brain",children:(0,dr.jsxs)("div",{className:"brain-loading",children:[(0,dr.jsx)("div",{className:"brain-pulse"}),(0,dr.jsx)("span",{children:"\u05d8\u05d5\u05e2\u05df \u05d0\u05ea \u05d4\u05de\u05d5\u05d7..."})]})}):(0,dr.jsx)("div",{className:"brain",children:(0,dr.jsxs)("div",{className:"brain-container",children:[(0,dr.jsxs)("header",{className:"brain-header",children:[(0,dr.jsx)("h1",{children:"\ud83e\udde0 \u05d4\u05e8\u05d0\u05d4 \u05dc\u05d9 \u05d0\u05ea \u05d4\u05de\u05d5\u05d7"}),(0,dr.jsx)("p",{className:"brain-sub",children:"\u05dc\u05de\u05d4 \u05d4\u05de\u05e2\u05e8\u05db\u05ea \u05d4\u05d7\u05dc\u05d9\u05d8\u05d4 \u05de\u05d4 \u05e9\u05d4\u05d7\u05dc\u05d9\u05d8\u05d4"})]}),o&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsxs)("h2",{className:"brain-section-title",children:["\u05e2\u05d5\u05de\u05e1 \u05d9\u05d5\u05de\u05d9 \u2014 ",o.load_score,"/100"]}),(0,dr.jsx)("div",{className:"brain-load-bar",children:(0,dr.jsx)("div",{className:"brain-load-fill",style:{width:"".concat(o.load_score||0,"%"),background:o.load_score>=70?"var(--red)":o.load_score>=45?"var(--amber)":"var(--green)"}})}),(0,dr.jsxs)("div",{className:"brain-load-breakdown",children:[(0,dr.jsxs)("div",{className:"brain-load-item",children:[(0,dr.jsx)("span",{className:"brain-load-label",children:"\ud83d\udcc5 \u05d9\u05d5\u05de\u05df"}),(0,dr.jsxs)("span",{className:"brain-load-detail",children:[(null===(e=x.calendar_hours)||void 0===e?void 0:e.toFixed(1))||0," \u05e9\u05e2\u05d5\u05ea \u2022 ",x.event_count||0," \u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd"]})]}),(0,dr.jsxs)("div",{className:"brain-load-item",children:[(0,dr.jsx)("span",{className:"brain-load-label",children:"\ud83d\udca4 \u05e9\u05d9\u05e0\u05d4"}),(0,dr.jsxs)("span",{className:"brain-load-detail",style:{color:k.color},children:[k.text," ",x.sleep_avg?"\u2022 \u05de\u05de\u05d5\u05e6\u05e2 ".concat(x.sleep_avg," \u05e9\u05e2\u05d5\u05ea"):"",x.sleep_deficit>0?" \u2022 \u05d2\u05e8\u05e2\u05d5\u05df ".concat(x.sleep_deficit," \u05e9\u05e2\u05d5\u05ea"):"","low"===x.sleep_confidence&&(0,dr.jsx)("span",{className:"brain-confidence-inline",children:" \xb7 \u05de\u05d9\u05d3\u05e2 \u05d7\u05dc\u05e7\u05d9"})]})]}),(0,dr.jsxs)("div",{className:"brain-load-item",children:[(0,dr.jsx)("span",{className:"brain-load-label",children:"\u26a1 \u05d0\u05e0\u05e8\u05d2\u05d9\u05d4"}),(0,dr.jsxs)("span",{className:"brain-load-detail",children:["\u05ea\u05e7\u05e6\u05d9\u05d1: ",x.energy_budget||"\u2014"," \u2022 \u05e0\u05d5\u05e6\u05dc: ",x.energy_used||0]})]})]})]}),o&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05d4\u05d7\u05dc\u05d8\u05d5\u05ea \u05d4\u05d9\u05d5\u05dd"}),(null===(t=o.doing_today)||void 0===t?void 0:t.length)>0&&(0,dr.jsxs)("div",{className:"brain-decision",children:[(0,dr.jsx)("h3",{children:"\u2705 \u05e0\u05d1\u05d7\u05e8\u05d5 \u05dc\u05d4\u05d9\u05d5\u05dd"}),(0,dr.jsx)("ul",{children:o.doing_today.map((e,t)=>(0,dr.jsx)("li",{children:e},t))})]}),(null===(n=o.not_doing_today)||void 0===n?void 0:n.length)>0&&(0,dr.jsxs)("div",{className:"brain-decision",children:[(0,dr.jsx)("h3",{children:"\u26d4 \u05e0\u05d3\u05d7\u05d5 \u05de\u05d4\u05d9\u05d5\u05dd"}),(0,dr.jsx)("ul",{className:"brain-deferred",children:o.not_doing_today.map((e,t)=>(0,dr.jsx)("li",{children:e},t))}),(0,dr.jsx)("p",{className:"brain-reason",children:o.load_score>=70?"\u05e2\u05d5\u05de\u05e1 \u05d2\u05d1\u05d5\u05d4 \u2014 \u05d4\u05de\u05e2\u05e8\u05db\u05ea \u05e7\u05d9\u05e6\u05e6\u05d4 \u05d1\u05db\u05d5\u05d5\u05e0\u05d4.":x.sleep_avg&&x.sleep_avg<7?"\u05e9\u05d9\u05e0\u05d4 \u05d2\u05e8\u05d5\u05e2\u05d4 \u2014 \u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05de\u05d5\u05d2\u05d1\u05dc\u05ea.":"\u05ea\u05d5\u05e2\u05d3\u05e3 \u05dc\u05e4\u05d9 \u05d3\u05d3\u05dc\u05d9\u05d9\u05e0\u05d9\u05dd \u05d5\u05ea\u05dc\u05d5\u05d9\u05d5\u05ea."})]}),(null===(a=x.all_warnings)||void 0===a?void 0:a.length)>0&&(0,dr.jsxs)("div",{className:"brain-decision",children:[(0,dr.jsx)("h3",{children:"\u26a0\ufe0f \u05e1\u05d9\u05d2\u05e0\u05dc\u05d9\u05dd"}),(0,dr.jsx)("ul",{className:"brain-warnings-list",children:x.all_warnings.map((e,t)=>(0,dr.jsx)("li",{children:e},t))})]})]}),(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05d1\u05e8\u05d9\u05d0\u05d5\u05ea \u2014 \u05d4\u05d9\u05d5\u05dd"}),w?(0,dr.jsxs)("div",{className:"brain-health-grid",children:[w.sleep_hours&&(0,dr.jsxs)("div",{className:"brain-stat",children:[(0,dr.jsx)("span",{className:"brain-stat-icon",children:"\ud83d\udca4"}),(0,dr.jsxs)("span",{className:"brain-stat-value",children:[w.sleep_hours," \u05e9\u05e2\u05d5\u05ea"]}),(0,dr.jsx)("span",{className:"brain-stat-label",children:"\u05e9\u05d9\u05e0\u05d4"})]}),w.body_battery&&(0,dr.jsxs)("div",{className:"brain-stat",children:[(0,dr.jsx)("span",{className:"brain-stat-icon",children:"\ud83d\udd0b"}),(0,dr.jsx)("span",{className:"brain-stat-value",children:w.body_battery}),(0,dr.jsx)("span",{className:"brain-stat-label",children:"\u05e1\u05d5\u05dc\u05dc\u05ea \u05d2\u05d5\u05e3"})]}),w.stress_level&&(0,dr.jsxs)("div",{className:"brain-stat",children:[(0,dr.jsx)("span",{className:"brain-stat-icon",children:"\ud83d\ude30"}),(0,dr.jsx)("span",{className:"brain-stat-value",children:w.stress_level}),(0,dr.jsx)("span",{className:"brain-stat-label",children:"\u05de\u05ea\u05d7"})]}),w.steps&&(0,dr.jsxs)("div",{className:"brain-stat",children:[(0,dr.jsx)("span",{className:"brain-stat-icon",children:"\ud83d\udc5f"}),(0,dr.jsx)("span",{className:"brain-stat-value",children:w.steps.toLocaleString()}),(0,dr.jsx)("span",{className:"brain-stat-label",children:"\u05e6\u05e2\u05d3\u05d9\u05dd"})]}),w.resting_hr&&(0,dr.jsxs)("div",{className:"brain-stat",children:[(0,dr.jsx)("span",{className:"brain-stat-icon",children:"\u2764\ufe0f"}),(0,dr.jsx)("span",{className:"brain-stat-value",children:w.resting_hr}),(0,dr.jsx)("span",{className:"brain-stat-label",children:"\u05d3\u05d5\u05e4\u05e7 \u05de\u05e0\u05d5\u05d7\u05d4"})]})]}):(0,dr.jsx)("p",{className:"brain-empty",children:"\u05d0\u05d9\u05df \u05e0\u05ea\u05d5\u05e0\u05d9 \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea \u05dc\u05d4\u05d9\u05d5\u05dd"})]}),c.length>0&&(()=>{const e=c.filter(e=>e.sleep_hours&&parseFloat(e.sleep_hours)>0).length,t=e<4;return(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsxs)("h2",{className:"brain-section-title",children:["\u05e9\u05d9\u05e0\u05d4 \u2014 7 \u05d9\u05de\u05d9\u05dd",t&&(0,dr.jsxs)("span",{className:"brain-confidence-tag partial",children:["\u05de\u05d9\u05d3\u05e2 \u05d7\u05dc\u05e7\u05d9 (",e,"/7 \u05d9\u05de\u05d9\u05dd)"]})]}),(0,dr.jsx)("div",{className:"brain-sleep-chart",children:c.slice().reverse().map(e=>{const t=parseFloat(e.sleep_hours)||0,n=Math.min(100,t/9*100),r=t<7;return(0,dr.jsxs)("div",{className:"brain-sleep-col",children:[(0,dr.jsx)("span",{className:"brain-sleep-value",children:t>0?t.toFixed(1):"\u2014"}),(0,dr.jsx)("div",{className:"brain-sleep-bar-bg",children:(0,dr.jsx)("div",{className:"brain-sleep-bar ".concat(r?"low":"good"),style:{height:"".concat(n,"%")}})}),(0,dr.jsx)("span",{className:"brain-sleep-date",children:e.date?new Date(e.date).toLocaleDateString("he-IL",{weekday:"short"}):"\u2014"})]},e.date)})})]})})(),m.length>0&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05d9\u05e2\u05d3\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd"}),(0,dr.jsx)("div",{className:"brain-goals",children:m.map(e=>{var t,n;const r=(null===(t=e.metrics)||void 0===t?void 0:t.confidence)||(null===(n=x.goal_confidence)||void 0===n?void 0:n[e.id])||"unknown",a=e.domain||"personal";return(0,dr.jsxs)("div",{className:"brain-goal",children:[(0,dr.jsxs)("div",{className:"brain-goal-header",children:[(0,dr.jsx)("span",{className:"brain-goal-title",children:e.title}),(0,dr.jsx)("button",{className:"brain-goal-confidence confidence-".concat(r),title:"\u05dc\u05d7\u05e5 \u05dc\u05e2\u05d3\u05db\u05d5\u05df \u05e1\u05d8\u05d8\u05d5\u05e1",onClick:()=>{const e=["on_track","behind","ahead","unknown"],t=e.indexOf(r),n=e[(t+1)%e.length];cr({title:"\u05e2\u05d3\u05db\u05d5\u05df \u05e1\u05d8\u05d8\u05d5\u05e1",description:"\u05e1\u05d8\u05d8\u05d5\u05e1 \u05d7\u05d3\u05e9: ".concat("on_track"===n?"\u05d1\u05de\u05e1\u05dc\u05d5\u05dc":"behind"===n?"\u05d1\u05e4\u05d9\u05d2\u05d5\u05e8":"ahead"===n?"\u05de\u05e7\u05d3\u05d9\u05dd":"\u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2")})},children:"on_track"===r?"\u2705 \u05d1\u05de\u05e1\u05dc\u05d5\u05dc":"behind"===r?"\u26a0\ufe0f \u05d1\u05e4\u05d9\u05d2\u05d5\u05e8":"ahead"===r?"\ud83d\ude80 \u05de\u05e7\u05d3\u05d9\u05dd":"\u2753 \u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2"})]}),(0,dr.jsxs)("div",{className:"brain-goal-meta",children:[(0,dr.jsx)("span",{className:"brain-goal-domain",children:{health:"\ud83c\udfc3 \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea",work:"\ud83d\udcbc \u05e2\u05d1\u05d5\u05d3\u05d4",personal:"\ud83c\udf31 \u05d0\u05d9\u05e9\u05d9"}[a]||a}),e.priority&&(0,dr.jsxs)("span",{className:"brain-goal-priority",children:["\u05e2\u05d3\u05d9\u05e4\u05d5\u05ea ",e.priority,"/5"]})]}),e.protection_rules&&e.protection_rules.length>0&&(0,dr.jsx)("div",{className:"brain-goal-rules",children:e.protection_rules.map((e,t)=>(0,dr.jsxs)("span",{className:"brain-goal-rule",children:["\ud83d\udee1\ufe0f ",e]},t))})]},e.id)})})]}),_.length>0&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05d4\u05e8\u05d2\u05dc\u05d9\u05dd \u05e9\u05d4\u05d5\u05d7\u05de\u05e6\u05d5"}),(0,dr.jsx)("div",{className:"brain-habits",children:_.map(e=>{const t=Math.round((Date.now()-new Date(e.last_seen))/864e5);return(0,dr.jsxs)("div",{className:"brain-habit",children:[(0,dr.jsx)("span",{className:"brain-habit-name",children:e.title}),(0,dr.jsxs)("span",{className:"brain-habit-days",children:[t," \u05d9\u05de\u05d9\u05dd"]})]},e.id)})})]}),d.length>0&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05dc\u05d5\u05d7 \u05d6\u05de\u05e0\u05d9\u05dd \u2014 \u05d4\u05d9\u05d5\u05dd"}),(0,dr.jsx)("div",{className:"brain-timeline",children:d.map(e=>{const t=e.start_time?new Date(e.start_time).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"}):"";return(0,dr.jsxs)("div",{className:"brain-event",children:[(0,dr.jsx)("span",{className:"brain-event-time",children:t}),(0,dr.jsx)("span",{className:"brain-event-title",children:e.title}),e.energy_level&&(0,dr.jsx)("span",{className:"brain-tag energy-".concat(e.energy_level),children:e.energy_level})]},e.id)})})]}),(null===(s=x.active_projects)||void 0===s?void 0:s.length)>0&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsxs)("h2",{className:"brain-section-title",children:["\u05e4\u05e8\u05d5\u05d9\u05e7\u05d8\u05d9\u05dd \u05e4\u05e2\u05d9\u05dc\u05d9\u05dd \u2014 ",x.active_projects.length,"/3"]}),(0,dr.jsx)("div",{className:"brain-projects",children:x.active_projects.map((e,t)=>(0,dr.jsx)("div",{className:"brain-project",children:e},t))}),x.active_projects.length>3&&(0,dr.jsx)("p",{className:"brain-over-limit",children:"\u26a0\ufe0f \u05d7\u05e8\u05d9\u05d2\u05d4 \u05de\u05d4\u05de\u05d2\u05d1\u05dc\u05d4 \u2014 \u05d4\u05e7\u05e4\u05d0 \u05e4\u05e8\u05d5\u05d9\u05e7\u05d8"})]}),(null===(i=x.pending_dependencies)||void 0===i?void 0:i.length)>0&&(0,dr.jsxs)("section",{className:"brain-section",children:[(0,dr.jsx)("h2",{className:"brain-section-title",children:"\u05ea\u05dc\u05d5\u05d9\u05d5\u05ea \u05e4\u05ea\u05d5\u05d7\u05d5\u05ea"}),(0,dr.jsx)("div",{className:"brain-deps",children:x.pending_dependencies.map((e,t)=>(0,dr.jsxs)("div",{className:"brain-dep",children:[(0,dr.jsxs)("span",{className:"brain-dep-person",children:["\u23f3 ",e.person]}),(0,dr.jsx)("span",{className:"brain-dep-for",children:e.for})]},t))})]})]})})};function jr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Nr=n(950);const Er="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function Cr(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function Tr(e){return"nodeType"in e}function Rr(e){var t,n;return e?Cr(e)?e:Tr(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function Or(e){const{Document:t}=Rr(e);return e instanceof t}function Pr(e){return!Cr(e)&&e instanceof Rr(e).HTMLElement}function Ir(e){return e instanceof Rr(e).SVGElement}function Ar(e){return e?Cr(e)?e.document:Tr(e)?Or(e)?e:Pr(e)||Ir(e)?e.ownerDocument:document:document:document}const Dr=Er?r.useLayoutEffect:r.useEffect;function Lr(e){const t=(0,r.useRef)(e);return Dr(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function Mr(e,t){void 0===t&&(t=[e]);const n=(0,r.useRef)(e);return Dr(()=>{n.current!==e&&(n.current=e)},t),n}function zr(e,t){const n=(0,r.useRef)();return(0,r.useMemo)(()=>{const t=e(n.current);return n.current=t,t},[...t])}function Ur(e){const t=Lr(e),n=(0,r.useRef)(null),a=(0,r.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,a]}function Fr(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let Br={};function qr(e,t){return(0,r.useMemo)(()=>{if(t)return t;const n=null==Br[e]?0:Br[e]+1;return Br[e]=n,e+"-"+n},[e,t])}function Wr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[a,s]of r){const n=t[a];null!=n&&(t[a]=n+e*s)}return t},u({},t))}}const Kr=Wr(1),Vr=Wr(-1);function Hr(e){if(!e)return!1;const{KeyboardEvent:t}=Rr(e.target);return t&&e instanceof t}function Jr(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=Rr(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Gr=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Gr.Translate.toString(e),Gr.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$r="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Yr(e){return e.matches($r)?e:e.querySelector($r)}const Xr={display:"none"};function Qr(e){let{id:t,value:n}=e;return r.createElement("div",{id:t,style:Xr},n)}function Zr(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;return r.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},n)}const ea=["transform"],ta=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],na=(0,r.createContext)(null);const ra={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},aa={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sa(e){let{announcements:t=aa,container:n,hiddenTextDescribedById:a,screenReaderInstructions:s=ra}=e;const{announce:i,announcement:o}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),l=qr("DndLiveRegion"),[c,u]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{u(!0)},[]),function(e){const t=(0,r.useContext)(na);(0,r.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,r.useMemo)(()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}}),[i,t])),!c)return null;const d=r.createElement(r.Fragment,null,r.createElement(Qr,{id:a,value:s.draggable}),r.createElement(Zr,{id:l,announcement:o}));return n?(0,Nr.createPortal)(d,n):d}var ia;function oa(){}function la(e,t){return(0,r.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(ia||(ia={}));const ca=Object.freeze({x:0,y:0});function ua(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function da(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ha(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function fa(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function pa(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function ma(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const va=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=ma(t,t.left,t.top),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=ua(ma(t),a);s.push({id:e,data:{droppableContainer:i,value:n}})}}return s.sort(da)};function ga(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=a-r,o=s-n;if(r<a&&n<s){const n=t.width*t.height,r=e.width*e.height,a=i*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const ya=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=ga(r,t);n>0&&a.push({id:e,data:{droppableContainer:s,value:n}})}}return a.sort(ha)};function ba(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ca}function wa(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>u(u({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),u({},t))}}const xa=wa(1);function ka(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const _a={ignoreTransform:!1};function Sa(e,t){void 0===t&&(t=_a);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=Rr(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=ka(t);if(!r)return e;const{scaleX:a,scaleY:s,x:i,y:o}=r,l=e.left-i-(1-a)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?e.width/a:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:a,width:s,height:i,bottom:o,right:l}=n;return{top:r,left:a,width:s,height:i,bottom:o,right:l}}function ja(e){return Sa(e,{ignoreTransform:!0})}function Na(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(Or(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Pr(a)||Ir(a))return n;if(n.includes(a))return n;const s=Rr(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=Rr(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"===typeof r&&n.test(r)})}(a,s)&&n.push(a),function(e,t){return void 0===t&&(t=Rr(e).getComputedStyle(e)),"fixed"===t.position}(a,s)?n:r(a.parentNode)}(e):n}function Ea(e){const[t]=Na(e,1);return null!=t?t:null}function Ca(e){return Er&&e?Cr(e)?e:Tr(e)?Or(e)||e===Ar(e).scrollingElement?window:Pr(e)?e:null:null:null}function Ta(e){return Cr(e)?e.scrollX:e.scrollLeft}function Ra(e){return Cr(e)?e.scrollY:e.scrollTop}function Oa(e){return{x:Ta(e),y:Ra(e)}}var Pa;function Ia(e){return!(!Er||!e)&&e===document.scrollingElement}function Aa(e){const t={x:0,y:0},n=Ia(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Pa||(Pa={}));const Da={x:.2,y:.2};function La(e,t,n,r,a){let{top:s,left:i,right:o,bottom:l}=n;void 0===r&&(r=10),void 0===a&&(a=Da);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=Aa(e),f={x:0,y:0},p={x:0,y:0},m=t.height*a.y,v=t.width*a.x;return!c&&s<=t.top+m?(f.y=Pa.Backward,p.y=r*Math.abs((t.top+m-s)/m)):!u&&l>=t.bottom-m&&(f.y=Pa.Forward,p.y=r*Math.abs((t.bottom-m-l)/m)),!h&&o>=t.right-v?(f.x=Pa.Forward,p.x=r*Math.abs((t.right-v-o)/v)):!d&&i<=t.left+v&&(f.x=Pa.Backward,p.x=r*Math.abs((t.left+v-i)/v)),{direction:f,speed:p}}function Ma(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function za(e){return e.reduce((e,t)=>Kr(e,Oa(t)),ca)}function Ua(e,t){if(void 0===t&&(t=Sa),!e)return;const{top:n,left:r,bottom:a,right:s}=t(e);Ea(e)&&(a<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Fa=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+Ta(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+Ra(t),0)}]];class Ba{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Na(t),r=za(n);this.rect=u({},e),this.width=e.width,this.height=e.height;for(const[a,s,i]of Fa)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(n),s=r[a]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class qa{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Wa(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Ka,Va;function Ha(e){e.preventDefault()}function Ja(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Ka||(Ka={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(Va||(Va={}));const Ga={start:[Va.Space,Va.Enter],cancel:[Va.Esc],end:[Va.Space,Va.Enter,Va.Tab]},$a=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Va.Right:return u(u({},n),{},{x:n.x+25});case Va.Left:return u(u({},n),{},{x:n.x-25});case Va.Down:return u(u({},n),{},{y:n.y+25});case Va.Up:return u(u({},n),{},{y:n.y-25})}};class Ya{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new qa(Ar(t)),this.windowListeners=new qa(Rr(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ka.Resize,this.handleCancel),this.windowListeners.add(Ka.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ka.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Ua(n),t(ca)}handleKeyDown(e){if(Hr(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=Ga,coordinateGetter:s=$a,scrollBehavior:i="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:ca;this.referenceCoordinates||(this.referenceCoordinates=c);const u=s(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=Vr(u,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:d,minScroll:h}=Aa(n),f=Ma(n),p={x:Math.min(a===Va.Right?f.right-f.width/2:f.right,Math.max(a===Va.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(a===Va.Down?f.bottom-f.height/2:f.bottom,Math.max(a===Va.Down?f.top:f.top+f.height/2,u.y))},m=a===Va.Right&&!o||a===Va.Left&&!l,v=a===Va.Down&&!c||a===Va.Up&&!s;if(m&&p.x!==u.x){const e=n.scrollLeft+t.x,s=a===Va.Right&&e<=d.x||a===Va.Left&&e>=h.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:i});r.x=s?n.scrollLeft-e:a===Va.Right?n.scrollLeft-d.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:i});break}if(v&&p.y!==u.y){const e=n.scrollTop+t.y,s=a===Va.Down&&e<=d.y||a===Va.Up&&e>=h.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:i});r.y=s?n.scrollTop-e:a===Va.Down?n.scrollTop-d.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,Kr(Vr(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Xa(e){return Boolean(e&&"distance"in e)}function Qa(e){return Boolean(e&&"delay"in e)}Ya.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ga,onActivation:a}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class Za{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=Rr(e);return e instanceof t?e:Ar(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:s}=a;this.props=e,this.events=t,this.document=Ar(s),this.documentListeners=new qa(this.document),this.listeners=new qa(n),this.windowListeners=new qa(Rr(s)),this.initialCoordinates=null!=(r=Jr(a))?r:ca,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ka.Resize,this.handleCancel),this.windowListeners.add(Ka.DragStart,Ha),this.windowListeners.add(Ka.VisibilityChange,this.handleCancel),this.windowListeners.add(Ka.ContextMenu,Ha),this.documentListeners.add(Ka.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Qa(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Xa(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ka.Click,Ja,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ka.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!r)return;const o=null!=(t=Jr(e))?t:ca,l=Vr(r,o);if(!n&&i){if(Xa(i)){if(null!=i.tolerance&&Wa(l,i.tolerance))return this.handleCancel();if(Wa(l,i.distance))return this.handleStart()}return Qa(i)&&Wa(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Va.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const es={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ts extends Za{constructor(e){const{event:t}=e,n=Ar(t.target);super(e,es,n)}}ts.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const ns={move:{name:"mousemove"},end:{name:"mouseup"}};var rs;!function(e){e[e.RightClick=2]="RightClick"}(rs||(rs={}));(class extends Za{constructor(e){super(e,ns,Ar(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==rs.RightClick&&(null==r||r({event:n}),!0)}}];const as={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ss,is;function os(e){let{acceleration:t,activator:n=ss.Pointer,canScroll:a,draggingRect:s,enabled:i,interval:o=5,order:l=is.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:f}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=Fr(t);return zr(e=>{if(n||!r||!e)return ls;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Pa.Backward]:e.x[Pa.Backward]||-1===a.x,[Pa.Forward]:e.x[Pa.Forward]||1===a.x},y:{[Pa.Backward]:e.y[Pa.Backward]||-1===a.y,[Pa.Forward]:e.y[Pa.Forward]||1===a.y}}},[n,t,r])}({delta:h,disabled:!i}),[m,v]=function(){const e=(0,r.useRef)(null);return[(0,r.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),g=(0,r.useRef)({x:0,y:0}),y=(0,r.useRef)({x:0,y:0}),b=(0,r.useMemo)(()=>{switch(n){case ss.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case ss.DraggableRect:return s}},[n,s,c]),w=(0,r.useRef)(null),x=(0,r.useCallback)(()=>{const e=w.current;if(!e)return;const t=g.current.x*y.current.x,n=g.current.y*y.current.y;e.scrollBy(t,n)},[]),k=(0,r.useMemo)(()=>l===is.TreeOrder?[...u].reverse():u,[l,u]);(0,r.useEffect)(()=>{if(i&&u.length&&b){for(const e of k){if(!1===(null==a?void 0:a(e)))continue;const n=u.indexOf(e),r=d[n];if(!r)continue;const{direction:s,speed:i}=La(e,r,b,t,f);for(const e of["x","y"])p[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return v(),w.current=e,m(x,o),g.current=i,void(y.current=s)}g.current={x:0,y:0},y.current={x:0,y:0},v()}else v()},[t,x,a,v,i,o,JSON.stringify(b),JSON.stringify(p),m,u,k,d,JSON.stringify(f)])}(class extends Za{constructor(e){super(e,as)}static setup(){return window.addEventListener(as.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(as.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(ss||(ss={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(is||(is={}));const ls={x:{[Pa.Backward]:!1,[Pa.Forward]:!1},y:{[Pa.Backward]:!1,[Pa.Forward]:!1}};var cs,us;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(cs||(cs={})),function(e){e.Optimized="optimized"}(us||(us={}));const ds=new Map;function hs(e,t){return zr(n=>e?n||("function"===typeof t?t(e):e):null,[t,e])}function fs(e){let{callback:t,disabled:n}=e;const a=Lr(t),s=(0,r.useMemo)(()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(a)},[n]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function ps(e){return new Ba(Sa(e),e)}function ms(e,t,n){void 0===t&&(t=ps);const[a,s]=(0,r.useState)(null);function i(){s(r=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=r?r:n)?a:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s})}const o=function(e){let{callback:t,disabled:n}=e;const a=Lr(t),s=(0,r.useMemo)(()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(a)},[a,n]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),l=fs({callback:i});return Dr(()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())},[e]),a}const vs=[];function gs(e,t){void 0===t&&(t=[]);const n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current=null},t),(0,r.useEffect)(()=>{const t=e!==ca;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?Vr(e,n.current):ca}function ys(e){return(0,r.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const bs=[];function ws(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pr(t)?t:e}const xs=[{sensor:ts,options:{}},{sensor:Ya,options:{}}],ks={current:{}},_s={draggable:{measure:ja},droppable:{measure:ja,strategy:cs.WhileDragging,frequency:us.Optimized},dragOverlay:{measure:Sa}};class Ss extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const js={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ss,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:oa},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_s,measureDroppableContainers:oa,windowRect:null,measuringScheduled:!1},Ns={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:oa,draggableNodes:new Map,over:null,measureDroppableContainers:oa},Es=(0,r.createContext)(Ns),Cs=(0,r.createContext)(js);function Ts(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ss}}}function Rs(e,t){switch(t.type){case ia.DragStart:return u(u({},e),{},{draggable:u(u({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case ia.DragMove:return null==e.draggable.active?e:u(u({},e),{},{draggable:u(u({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case ia.DragEnd:case ia.DragCancel:return u(u({},e),{},{draggable:u(u({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case ia.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Ss(e.droppable.containers);return a.set(r,n),u(u({},e),{},{droppable:u(u({},e.droppable),{},{containers:a})})}case ia.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Ss(e.droppable.containers);return i.set(n,u(u({},s),{},{disabled:a})),u(u({},e),{},{droppable:u(u({},e.droppable),{},{containers:i})})}case ia.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const s=new Ss(e.droppable.containers);return s.delete(n),u(u({},e),{},{droppable:u(u({},e.droppable),{},{containers:s})})}default:return e}}function Os(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:s}=(0,r.useContext)(Es),i=Fr(a),o=Fr(null==n?void 0:n.id);return(0,r.useEffect)(()=>{if(!t&&!a&&i&&null!=o){if(!Hr(i))return;if(document.activeElement===i.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Yr(e);if(t){t.focus();break}}})}},[a,t,s,o,i]),null}function Ps(e,t){let{transform:n}=t,r=jr(t,ea);return null!=e&&e.length?e.reduce((e,t)=>t(u({transform:e},r)),n):n}const Is=(0,r.createContext)(u(u({},ca),{},{scaleX:1,scaleY:1}));var As;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(As||(As={}));const Ds=(0,r.memo)(function(e){var t,n,a,s;let{id:i,accessibility:o,autoScroll:l=!0,children:c,sensors:d=xs,collisionDetection:h=ya,measuring:f,modifiers:p}=e,m=jr(e,ta);const v=(0,r.useReducer)(Rs,void 0,Ts),[g,y]=v,[b,w]=function(){const[e]=(0,r.useState)(()=>new Set),t=(0,r.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,r.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[x,k]=(0,r.useState)(As.Uninitialized),_=x===As.Initialized,{draggable:{active:S,nodes:j,translate:N},droppable:{containers:E}}=g,C=null!=S?j.get(S):null,T=(0,r.useRef)({initial:null,translated:null}),R=(0,r.useMemo)(()=>{var e;return null!=S?{id:S,data:null!=(e=null==C?void 0:C.data)?e:ks,rect:T}:null},[S,C]),O=(0,r.useRef)(null),[P,I]=(0,r.useState)(null),[A,D]=(0,r.useState)(null),L=Mr(m,Object.values(m)),M=qr("DndDescribedBy",i),z=(0,r.useMemo)(()=>E.getEnabled(),[E]),U=(F=f,(0,r.useMemo)(()=>({draggable:u(u({},_s.draggable),null==F?void 0:F.draggable),droppable:u(u({},_s.droppable),null==F?void 0:F.droppable),dragOverlay:u(u({},_s.dragOverlay),null==F?void 0:F.dragOverlay)}),[null==F?void 0:F.draggable,null==F?void 0:F.droppable,null==F?void 0:F.dragOverlay]));var F;const{droppableRects:B,measureDroppableContainers:q,measuringScheduled:W}=function(e,t){let{dragging:n,dependencies:a,config:s}=t;const[i,o]=(0,r.useState)(null),{frequency:l,measure:c,strategy:u}=s,d=(0,r.useRef)(e),h=function(){switch(u){case cs.Always:return!1;case cs.BeforeDragging:return n;default:return!n}}(),f=Mr(h),p=(0,r.useCallback)(function(e){void 0===e&&(e=[]),f.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),m=(0,r.useRef)(null),v=zr(t=>{if(h&&!n)return ds;if(!t||t===ds||d.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Ba(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,i,n,h,c]);return(0,r.useEffect)(()=>{d.current=e},[e]),(0,r.useEffect)(()=>{h||p()},[n,h]),(0,r.useEffect)(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),(0,r.useEffect)(()=>{h||"number"!==typeof l||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},l))},[l,h,p,...a]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:null!=i}}(z,{dragging:_,dependencies:[N.x,N.y],config:U.droppable}),K=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return zr(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(j,S),V=(0,r.useMemo)(()=>A?Jr(A):null,[A]),H=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,n=_&&!e&&!t;if("object"===typeof l)return u(u({},l),{},{enabled:n});return{enabled:n}}(),J=function(e,t){return hs(e,t)}(K,U.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:a,config:s=!0}=e;const i=(0,r.useRef)(!1),{x:o,y:l}="boolean"===typeof s?{x:s,y:s}:s;Dr(()=>{if(!o&&!l||!t)return void(i.current=!1);if(i.current||!a)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=ba(n(e),a);if(o||(r.x=0),l||(r.y=0),i.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=Ea(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,o,l,a,n])}({activeNode:null!=S?j.get(S):null,config:H.layoutShiftCompensation,initialRect:J,measure:U.draggable.measure});const G=ms(K,U.draggable.measure,J),$=ms(K?K.parentElement:null),Y=(0,r.useRef)({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=E.getNodeFor(null==(t=Y.current.over)?void 0:t.id),Q=function(e){let{measure:t}=e;const[n,a]=(0,r.useState)(null),s=fs({callback:(0,r.useCallback)(e=>{for(const{target:n}of e)if(Pr(n)){a(e=>{const r=t(n);return e?u(u({},e),{},{width:r.width,height:r.height}):r});break}},[t])}),i=(0,r.useCallback)(e=>{const n=ws(e);null==s||s.disconnect(),n&&(null==s||s.observe(n)),a(n?t(n):null)},[t,s]),[o,l]=Ur(i);return(0,r.useMemo)(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}({measure:U.dragOverlay.measure}),Z=null!=(n=Q.nodeRef.current)?n:K,ee=_?null!=(a=Q.rect)?a:G:null,te=Boolean(Q.nodeRef.current&&Q.rect),ne=ba(re=te?null:G,hs(re));var re;const ae=ys(Z?Rr(Z):null),se=function(e){const t=(0,r.useRef)(e),n=zr(n=>e?n&&n!==vs&&e&&t.current&&e.parentNode===t.current.parentNode?n:Na(e):vs,[e]);return(0,r.useEffect)(()=>{t.current=e},[e]),n}(_?null!=X?X:K:null),ie=function(e,t){void 0===t&&(t=Sa);const[n]=e,a=ys(n?Rr(n):null),[s,i]=(0,r.useState)(bs);function o(){i(()=>e.length?e.map(e=>Ia(e)?a:new Ba(t(e),e)):bs)}const l=fs({callback:o});return Dr(()=>{null==l||l.disconnect(),o(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(se),oe=Ps(p,{transform:{x:N.x-ne.x,y:N.y-ne.y,scaleX:1,scaleY:1},activatorEvent:A,active:R,activeNodeRect:G,containerNodeRect:$,draggingNodeRect:ee,over:Y.current.over,overlayNodeRect:Q.rect,scrollableAncestors:se,scrollableAncestorRects:ie,windowRect:ae}),le=V?Kr(V,N):null,ce=function(e){const[t,n]=(0,r.useState)(null),a=(0,r.useRef)(e),s=(0,r.useCallback)(e=>{const t=Ca(e.target);t&&n(e=>e?(e.set(t,Oa(t)),new Map(e)):null)},[]);return(0,r.useEffect)(()=>{const t=a.current;if(e!==t){r(t);const i=e.map(e=>{const t=Ca(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,Oa(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),a.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=Ca(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,r.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>Kr(e,t),ca):za(e):ca,[e,t])}(se),ue=gs(ce),de=gs(ce,[G]),he=Kr(oe,ue),fe=ee?xa(ee,oe):null,pe=R&&fe?h({active:R,collisionRect:fe,droppableRects:B,droppableContainers:z,pointerCoordinates:le}):null,me=pa(pe,"id"),[ve,ge]=(0,r.useState)(null),ye=function(e,t,n){return u(u({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(te?oe:Kr(oe,de),null!=(s=null==ve?void 0:ve.rect)?s:null,G),be=(0,r.useRef)(null),we=(0,r.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==O.current)return;const a=j.get(O.current);if(!a)return;const s=e.nativeEvent,i=new n({active:O.current,activeNode:a,event:s,options:r,context:Y,onAbort(e){if(!j.get(e))return;const{onDragAbort:t}=L.current,n={id:e};null==t||t(n),b({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!j.get(e))return;const{onDragPending:a}=L.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(s),b({type:"onDragPending",event:s})},onStart(e){const t=O.current;if(null==t)return;const n=j.get(t);if(!n)return;const{onDragStart:r}=L.current,a={activatorEvent:s,active:{id:t,data:n.data,rect:T}};(0,Nr.unstable_batchedUpdates)(()=>{null==r||r(a),k(As.Initializing),y({type:ia.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:a}),I(be.current),D(s)})},onMove(e){y({type:ia.DragMove,coordinates:e})},onEnd:o(ia.DragEnd),onCancel:o(ia.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=Y.current;let i=null;if(t&&a){const{cancelDrop:o}=L.current;if(i={activatorEvent:s,active:t,collisions:n,delta:a,over:r},e===ia.DragEnd&&"function"===typeof o){await Promise.resolve(o(i))&&(e=ia.DragCancel)}}O.current=null,(0,Nr.unstable_batchedUpdates)(()=>{y({type:e}),k(As.Uninitialized),ge(null),I(null),D(null),be.current=null;const t=e===ia.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=L.current[t];null==e||e(i),b({type:t,event:i})}})}}be.current=i},[j]),xe=(0,r.useCallback)((e,t)=>(n,r)=>{const a=n.nativeEvent,s=j.get(r);if(null!==O.current||!s||a.dndKit||a.defaultPrevented)return;const i={active:s};!0===e(n,t.options,i)&&(a.dndKit={capturedBy:t.sensor},O.current=r,we(n,t))},[j,we]),ke=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(d,xe);!function(e){(0,r.useEffect)(()=>{if(!Er)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(d),Dr(()=>{G&&x===As.Initializing&&k(As.Initialized)},[G,x]),(0,r.useEffect)(()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:n,collisions:r,over:a}=Y.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:he.x,y:he.y},over:a};(0,Nr.unstable_batchedUpdates)(()=>{null==e||e(s),b({type:"onDragMove",event:s})})},[he.x,he.y]),(0,r.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=Y.current;if(!e||null==O.current||!t||!a)return;const{onDragOver:s}=L.current,i=r.get(me),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:o};(0,Nr.unstable_batchedUpdates)(()=>{ge(o),null==s||s(l),b({type:"onDragOver",event:l})})},[me]),Dr(()=>{Y.current={activatorEvent:A,active:R,activeNode:K,collisionRect:fe,collisions:pe,droppableRects:B,draggableNodes:j,draggingNode:Z,draggingNodeRect:ee,droppableContainers:E,over:ve,scrollableAncestors:se,scrollAdjustedTranslate:he},T.current={initial:ee,translated:fe}},[R,K,pe,fe,j,Z,ee,B,E,ve,se,he]),os(u(u({},H),{},{delta:N,draggingRect:fe,pointerCoordinates:le,scrollableAncestors:se,scrollableAncestorRects:ie}));const _e=(0,r.useMemo)(()=>({active:R,activeNode:K,activeNodeRect:G,activatorEvent:A,collisions:pe,containerNodeRect:$,dragOverlay:Q,draggableNodes:j,droppableContainers:E,droppableRects:B,over:ve,measureDroppableContainers:q,scrollableAncestors:se,scrollableAncestorRects:ie,measuringConfiguration:U,measuringScheduled:W,windowRect:ae}),[R,K,G,A,pe,$,Q,j,E,B,ve,q,se,ie,U,W,ae]),Se=(0,r.useMemo)(()=>({activatorEvent:A,activators:ke,active:R,activeNodeRect:G,ariaDescribedById:{draggable:M},dispatch:y,draggableNodes:j,over:ve,measureDroppableContainers:q}),[A,ke,R,G,y,M,j,ve,q]);return r.createElement(na.Provider,{value:w},r.createElement(Es.Provider,{value:Se},r.createElement(Cs.Provider,{value:_e},r.createElement(Is.Provider,{value:ye},c)),r.createElement(Os,{disabled:!1===(null==o?void 0:o.restoreFocus)})),r.createElement(sa,u(u({},o),{},{hiddenTextDescribedById:M})))}),Ls=(0,r.createContext)(null),Ms="button";function zs(e){let{id:t,data:n,disabled:a=!1,attributes:s}=e;const i=qr("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:f}=(0,r.useContext)(Es),{role:p=Ms,roleDescription:m="draggable",tabIndex:v=0}=null!=s?s:{},g=(null==c?void 0:c.id)===t,y=(0,r.useContext)(g?Is:Ls),[b,w]=Ur(),[x,k]=Ur(),_=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e},{}),[e,t])}(o,t),S=Mr(n);Dr(()=>(h.set(t,{id:t,key:i,node:b,activatorNode:x,data:S}),()=>{const e=h.get(t);e&&e.key===i&&h.delete(t)}),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,r.useMemo)(()=>({role:p,tabIndex:v,"aria-disabled":a,"aria-pressed":!(!g||p!==Ms)||void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[a,p,v,g,m,d.draggable]),isDragging:g,listeners:a?void 0:_,node:b,over:f,setNodeRef:w,setActivatorNodeRef:k,transform:y}}function Us(){return(0,r.useContext)(Cs)}const Fs={timeout:25};function Bs(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function qs(e,t){return e.reduce((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e},Array(e.length))}function Ws(e){return null!==e&&e>=0}const Ks=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const s=Bs(t,r,n),i=t[a],o=s[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},Vs={scaleX:1,scaleY:1},Hs=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:s,overIndex:i}=e;const o=null!=(t=s[n])?t:r;if(!o)return null;if(a===n){const e=s[i];return e?u({x:0,y:n<i?e.top+e.height-(o.top+o.height):e.top-o.top},Vs):null}const l=function(e,t,n){const r=e[t],a=e[t-1],s=e[t+1];if(!r)return 0;if(n<t)return a?r.top-(a.top+a.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):a?r.top-(a.top+a.height):0}(s,a,n);return u(a>n&&a<=i?{x:0,y:-o.height-l}:a<n&&a>=i?{x:0,y:o.height+l}:{x:0,y:0},Vs)};const Js="Sortable",Gs=r.createContext({activeIndex:-1,containerId:Js,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ks,disabled:{draggable:!1,droppable:!1}});function $s(e){let{children:t,id:n,items:a,strategy:s=Ks,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=Us(),h=qr(Js,n),f=Boolean(null!==l.rect),p=(0,r.useMemo)(()=>a.map(e=>"object"===typeof e&&"id"in e?e.id:e),[a]),m=null!=o,v=o?p.indexOf(o.id):-1,g=u?p.indexOf(u.id):-1,y=(0,r.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,y.current),w=-1!==g&&-1===v||b,x=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(i);Dr(()=>{b&&m&&d(p)},[b,p,m,d]),(0,r.useEffect)(()=>{y.current=p},[p]);const k=(0,r.useMemo)(()=>({activeIndex:v,containerId:h,disabled:x,disableTransforms:w,items:p,overIndex:g,useDragOverlay:f,sortedRects:qs(p,c),strategy:s}),[v,h,x.draggable,x.droppable,w,p,g,c,f,s]);return r.createElement(Gs.Provider,{value:k},t)}const Ys=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Bs(n,r,a).indexOf(t)},Xs=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===s||a!==i)&&(!!n||i!==a&&t===l))},Qs={duration:200,easing:"ease"},Zs="transform",ei=Gr.Transition.toString({property:Zs,duration:0,easing:"linear"}),ti={roleDescription:"sortable"};function ni(e){let{animateLayoutChanges:t=Xs,attributes:n,disabled:a,data:s,getNewIndex:i=Ys,id:o,strategy:l,resizeObserverConfig:c,transition:d=Qs}=e;const{items:h,containerId:f,activeIndex:p,disabled:m,disableTransforms:v,sortedRects:g,overIndex:y,useDragOverlay:b,strategy:w}=(0,r.useContext)(Gs),x=function(e,t){var n,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(a,m),k=h.indexOf(o),_=(0,r.useMemo)(()=>u({sortable:{containerId:f,index:k,items:h}},s),[f,s,k,h]),S=(0,r.useMemo)(()=>h.slice(h.indexOf(o)),[h,o]),{rect:j,node:N,isOver:E,setNodeRef:C}=function(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:s}=e;const i=qr("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,r.useContext)(Es),h=(0,r.useRef)({disabled:n}),f=(0,r.useRef)(!1),p=(0,r.useRef)(null),m=(0,r.useRef)(null),{disabled:v,updateMeasurementsFor:g,timeout:y}=u(u({},Fs),s),b=Mr(null!=g?g:a),w=fs({callback:(0,r.useCallback)(()=>{f.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),m.current=null},y)):f.current=!0},[y]),disabled:v||!o}),x=(0,r.useCallback)((e,t)=>{w&&(t&&(w.unobserve(t),f.current=!1),e&&w.observe(e))},[w]),[k,_]=Ur(x),S=Mr(t);return(0,r.useEffect)(()=>{w&&k.current&&(w.disconnect(),f.current=!1,w.observe(k.current))},[k,w]),(0,r.useEffect)(()=>(l({type:ia.RegisterDroppable,element:{id:a,key:i,disabled:n,node:k,rect:p,data:S}}),()=>l({type:ia.UnregisterDroppable,key:i,id:a})),[a]),(0,r.useEffect)(()=>{n!==h.current.disabled&&(l({type:ia.SetDroppableDisabled,id:a,key:i,disabled:n}),h.current.disabled=n)},[a,i,n,l]),{active:o,rect:p,isOver:(null==c?void 0:c.id)===a,node:k,over:c,setNodeRef:_}}({id:o,data:_,disabled:x.droppable,resizeObserverConfig:u({updateMeasurementsFor:S},c)}),{active:T,activatorEvent:R,activeNodeRect:O,attributes:P,setNodeRef:I,listeners:A,isDragging:D,over:L,setActivatorNodeRef:M,transform:z}=zs({id:o,data:_,attributes:u(u({},ti),n),disabled:x.draggable}),U=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(C,I),F=Boolean(T),B=F&&!v&&Ws(p)&&Ws(y),q=!b&&D,W=q&&B?z:null,K=B?null!=W?W:(null!=l?l:w)({rects:g,activeNodeRect:O,activeIndex:p,overIndex:y,index:k}):null,V=Ws(p)&&Ws(y)?i({id:o,items:h,activeIndex:p,overIndex:y}):k,H=null==T?void 0:T.id,J=(0,r.useRef)({activeId:H,items:h,newIndex:V,containerId:f}),G=h!==J.current.items,$=t({active:T,containerId:f,isDragging:D,isSorting:F,id:o,index:k,items:h,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:d,wasDragging:null!=J.current.activeId}),Y=function(e){let{disabled:t,index:n,node:a,rect:s}=e;const[i,o]=(0,r.useState)(null),l=(0,r.useRef)(n);return Dr(()=>{if(!t&&n!==l.current&&a.current){const e=s.current;if(e){const t=Sa(a.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==l.current&&(l.current=n)},[t,n,a,s]),(0,r.useEffect)(()=>{i&&o(null)},[i]),i}({disabled:!$,index:k,node:N,rect:j});return(0,r.useEffect)(()=>{F&&J.current.newIndex!==V&&(J.current.newIndex=V),f!==J.current.containerId&&(J.current.containerId=f),h!==J.current.items&&(J.current.items=h)},[F,V,f,h]),(0,r.useEffect)(()=>{if(H===J.current.activeId)return;if(null!=H&&null==J.current.activeId)return void(J.current.activeId=H);const e=setTimeout(()=>{J.current.activeId=H},50);return()=>clearTimeout(e)},[H]),{active:T,activeIndex:p,attributes:P,data:_,rect:j,index:k,newIndex:V,items:h,isOver:E,isSorting:F,isDragging:D,listeners:A,node:N,overIndex:y,over:L,setNodeRef:U,setActivatorNodeRef:M,setDroppableNodeRef:C,setDraggableNodeRef:I,transform:null!=Y?Y:K,transition:function(){if(Y||G&&J.current.newIndex===k)return ei;if(q&&!Hr(R)||!d)return;if(F||$)return Gr.Transition.toString(u(u({},d),{},{property:Zs}));return}()}}function ri(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const ai=[Va.Down,Va.Right,Va.Up,Va.Left],si=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:s,over:i,scrollableAncestors:o}}=t;if(ai.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;const s=a.get(n.id);if(s)switch(e.code){case Va.Down:r.top<s.top&&t.push(n);break;case Va.Up:r.top>s.top&&t.push(n);break;case Va.Left:r.left>s.left&&t.push(n);break;case Va.Right:r.left<s.left&&t.push(n)}});const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=fa(t),s=[];for(const i of r){const{id:e}=i,t=n.get(e);if(t){const n=fa(t),r=a.reduce((e,t,r)=>e+ua(n[r],t),0),o=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:i,value:o}})}}return s.sort(da)})({active:n,collisionRect:r,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let c=pa(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(n.id),t=s.get(c),i=t?a.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const n=Na(l).some((e,t)=>o[t]!==e),a=ii(e,t),s=function(e,t){if(!ri(e)||!ri(t))return!1;if(!ii(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!a?{x:0,y:0}:{x:s?r.width-i.width:0,y:s?r.height-i.height:0},u={x:i.left,y:i.top};return c.x&&c.y?u:Vr(u,c)}}}};function ii(e,t){return!(!ri(e)||!ri(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}function oi(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=oi(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function li(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=oi(e))&&(r&&(r+=" "),r+=t);return r}const ci=["class","className"],ui=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,di=li,hi=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return di(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:s}=t,i=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const i=ui(t)||ui(r);return a[e][i]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=jr(t,ci);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes(u(u({},s),o)[t]):u(u({},s),o)[t]===n})?[...e,n,r]:e},[]);return di(e,i,l,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)};function fi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return li(t)}const pi=["className","variant","size","asChild"],mi=hi("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 min-h-[44px] px-4 py-2",sm:"h-10 min-h-[40px] rounded-md px-3",lg:"h-12 min-h-[48px] rounded-md px-8",icon:"h-11 w-11 min-h-[44px] min-w-[44px]"}},defaultVariants:{variant:"default",size:"default"}}),vi=r.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:s}=e,i=jr(e,pi);return(0,dr.jsx)("button",u({className:fi(mi({variant:r,size:a,className:n})),ref:t},i))});vi.displayName="Button";const gi=["className","type"],yi=r.forwardRef((e,t)=>{let{className:n,type:r}=e,a=jr(e,gi);return(0,dr.jsx)("input",u({type:r,className:fi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},a))});yi.displayName="Input";const bi=["className","autoResize"],wi=r.forwardRef((e,t)=>{let{className:n,autoResize:a}=e,s=jr(e,bi);const i=r.useRef(null),o=t||i;return r.useEffect(()=>{if(a&&o.current){const e=o.current,t=()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"};return t(),e.addEventListener("input",t),()=>e.removeEventListener("input",t)}},[a,o]),(0,dr.jsx)("textarea",u({className:fi("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"resize-none overflow-hidden",n),ref:o},s))});wi.displayName="Textarea";const xi=["className","variant"],ki=hi("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",done:"border-transparent bg-green-500/20 text-green-400","in-progress":"border-transparent bg-amber-500/20 text-amber-400",waiting:"border-transparent bg-blue-500/20 text-blue-400",todo:"border-transparent bg-muted text-muted-foreground"}},defaultVariants:{variant:"default"}}),_i=r.forwardRef((e,t)=>{let{className:n,variant:r}=e,a=jr(e,xi);return(0,dr.jsx)("div",u({ref:t,className:fi(ki({variant:r}),n)},a))});function Si(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function ji(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=Si(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():Si(t[e],null)}}}}function Ni(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useCallback(ji(...t),t)}_i.displayName="Badge";const Ei=["children"],Ci=["scope","children"];function Ti(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];const a=()=>{const t=n.map(e=>r.createContext(e));return function(n){const a=(null===n||void 0===n?void 0:n[e])||t;return r.useMemo(()=>({["__scope".concat(e)]:u(u({},n),{},{[e]:a})}),[n,a])}};return a.scopeName=e,[function(t,a){const s=r.createContext(a),i=n.length;n=[...n,a];const o=t=>{var n;const{scope:a,children:o}=t,l=jr(t,Ci),c=(null===a||void 0===a||null===(n=a[e])||void 0===n?void 0:n[i])||s,u=r.useMemo(()=>l,Object.values(l));return(0,dr.jsx)(c.Provider,{value:u,children:o})};return o.displayName=t+"Provider",[o,function(n,o){var l;const c=(null===o||void 0===o||null===(l=o[e])||void 0===l?void 0:l[i])||s,u=r.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},Ri(a,...t)]}function Ri(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t[0];if(1===t.length)return a;const s=()=>{const e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){const n=e.reduce((e,n)=>{let{useScope:r,scopeName:a}=n;const s=r(t)["__scope".concat(a)];return u(u({},e),s)},{});return r.useMemo(()=>({["__scope".concat(a.scopeName)]:n}),[n])}};return s.scopeName=a.scopeName,s}"undefined"===typeof window||!window.document||window.document.createElement;function Oi(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}var Pi=null!==globalThis&&void 0!==globalThis&&globalThis.document?r.useLayoutEffect:()=>{},Ii=a[" useInsertionEffect ".trim().toString()]||Pi;function Ai(e){let{prop:t,defaultProp:n,onChange:a=()=>{},caller:s}=e;const[i,o,l]=function(e){let{defaultProp:t,onChange:n}=e;const[a,s]=r.useState(t),i=r.useRef(a),o=r.useRef(n);return Ii(()=>{o.current=n},[n]),r.useEffect(()=>{var e;i.current!==a&&(null===(e=o.current)||void 0===e||e.call(o,a),i.current=a)},[a,i]),[a,s,o]}({defaultProp:n,onChange:a}),c=void 0!==t,u=c?t:i;{const e=r.useRef(void 0!==t);r.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(e," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,s])}const d=r.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(t):e;var n;if(r!==t)null===(n=l.current)||void 0===n||n.call(l,r)}else o(e)},[c,t,o,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");var Di=e=>{const{present:t,children:n}=e,a=function(e){const[t,n]=r.useState(),a=r.useRef(null),s=r.useRef(e),i=r.useRef("none"),o=e?"mounted":"unmounted",[l,c]=function(e,t){return r.useReducer((e,n)=>{const r=t[e][n];return null!==r&&void 0!==r?r:e},e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const e=Li(a.current);i.current="mounted"===l?e:"none"},[l]),Pi(()=>{const t=a.current,n=s.current;if(n!==e){const r=i.current,a=Li(t);if(e)c("MOUNT");else if("none"===a||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}s.current=e}},[e,c]),Pi(()=>{if(t){var e;let n;const r=null!==(e=t.ownerDocument.defaultView)&&void 0!==e?e:window,o=e=>{const i=Li(a.current).includes(CSS.escape(e.animationName));if(e.target===t&&i&&(c("ANIMATION_END"),!s.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",n=r.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},l=e=>{e.target===t&&(i.current=Li(a.current))};return t.addEventListener("animationstart",l),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{r.clearTimeout(n),t.removeEventListener("animationstart",l),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:r.useCallback(e=>{a.current=e?getComputedStyle(e):null,n(e)},[])}}(t),s="function"===typeof n?n({present:a.isPresent}):r.Children.only(n),i=Ni(a.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(s));return"function"===typeof n||a.isPresent?r.cloneElement(s,{ref:i}):null};function Li(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}Di.displayName="Presence";const Mi=["children"],zi=["children"];function Ui(e){const t=Fi(e),n=r.forwardRef((e,n)=>{const{children:a}=e,s=jr(e,Mi),i=r.Children.toArray(a),o=i.find(qi);if(o){const e=o.props.children,a=i.map(t=>t===o?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t);return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null}))}return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}function Fi(e){const t=r.forwardRef((e,t)=>{const{children:n}=e,a=jr(e,zi);if(r.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n=u({},t);for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=function(){const e=s(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=u(u({},a),s):"className"===r&&(n[r]=[a,s].filter(Boolean).join(" "))}return u(u({},e),n)}(a,n.props);return n.type!==r.Fragment&&(s.ref=t?ji(t,e):e),r.cloneElement(n,s)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var Bi=Symbol("radix.slottable");function qi(e){return r.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Bi}const Wi=["asChild"];var Ki=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=Ui("Primitive.".concat(t)),a=r.forwardRef((e,r)=>{const{asChild:a}=e,s=jr(e,Wi),i=a?n:t;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,dr.jsx)(i,u(u({},s),{},{ref:r}))});return a.displayName="Primitive.".concat(t),u(u({},e),{},{[t]:a})},{});function Vi(e,t){e&&Nr.flushSync(()=>e.dispatchEvent(t))}const Hi=["__scopeCheckbox","onKeyDown","onClick"],Ji=["__scopeCheckbox","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],Gi=["__scopeCheckbox","forceMount"],$i=["__scopeCheckbox"];var Yi="Checkbox",[Xi,Qi]=Ti(Yi),[Zi,eo]=Xi(Yi);function to(e){const{__scopeCheckbox:t,checked:n,children:a,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:f}=e,[p,m]=Ai({prop:n,defaultProp:null!==s&&void 0!==s&&s,onChange:c,caller:Yi}),[v,g]=r.useState(null),[y,b]=r.useState(null),w=r.useRef(!1),x=!v||(!!o||!!v.closest("form")),k={checked:p,disabled:i,setChecked:m,control:v,setControl:g,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:w,required:d,defaultChecked:!uo(s)&&s,isFormControl:x,bubbleInput:y,setBubbleInput:b};return(0,dr.jsx)(Zi,u(u({scope:t},k),{},{children:co(f)?f(k):a}))}var no="CheckboxTrigger",ro=r.forwardRef((e,t)=>{let{__scopeCheckbox:n,onKeyDown:a,onClick:s}=e,i=jr(e,Hi);const{control:o,value:l,disabled:c,checked:d,required:h,setControl:f,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:g}=eo(no,n),y=Ni(t,f),b=r.useRef(d);return r.useEffect(()=>{const e=null===o||void 0===o?void 0:o.form;if(e){const t=()=>p(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,p]),(0,dr.jsx)(Ki.button,u(u({type:"button",role:"checkbox","aria-checked":uo(d)?"mixed":d,"aria-required":h,"data-state":ho(d),"data-disabled":c?"":void 0,disabled:c,value:l},i),{},{ref:y,onKeyDown:Oi(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:Oi(s,e=>{p(e=>!!uo(e)||!e),g&&v&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}))});ro.displayName=no;var ao=r.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:i,disabled:o,value:l,onCheckedChange:c,form:d}=e,h=jr(e,Ji);return(0,dr.jsx)(to,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:o,required:i,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(ro,u(u({},h),{},{ref:t,__scopeCheckbox:n})),r&&(0,dr.jsx)(lo,{__scopeCheckbox:n})]})}})});ao.displayName=Yi;var so="CheckboxIndicator",io=r.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r}=e,a=jr(e,Gi),s=eo(so,n);return(0,dr.jsx)(Di,{present:r||uo(s.checked)||!0===s.checked,children:(0,dr.jsx)(Ki.span,u(u({"data-state":ho(s.checked),"data-disabled":s.disabled?"":void 0},a),{},{ref:t,style:u({pointerEvents:"none"},e.style)}))})});io.displayName=so;var oo="CheckboxBubbleInput",lo=r.forwardRef((e,t)=>{let{__scopeCheckbox:n}=e,a=jr(e,$i);const{control:s,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:c,disabled:d,name:h,value:f,form:p,bubbleInput:m,setBubbleInput:v}=eo(oo,n),g=Ni(t,v),y=function(e){const t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(o),b=function(e){const[t,n]=r.useState(void 0);return Pi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let a,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,s=t.blockSize}else a=e.offsetWidth,s=e.offsetHeight;n({width:a,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(s);r.useEffect(()=>{const e=m;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(y!==o&&n){const t=new Event("click",{bubbles:r});e.indeterminate=uo(o),n.call(e,!uo(o)&&o),e.dispatchEvent(t)}},[m,y,o,i]);const w=r.useRef(!uo(o)&&o);return(0,dr.jsx)(Ki.input,u(u({type:"checkbox","aria-hidden":!0,defaultChecked:null!==l&&void 0!==l?l:w.current,required:c,disabled:d,name:h,value:f,form:p},a),{},{tabIndex:-1,ref:g,style:u(u(u({},a.style),b),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"})}))});function co(e){return"function"===typeof e}function uo(e){return"indeterminate"===e}function ho(e){return uo(e)?"indeterminate":e?"checked":"unchecked"}lo.displayName=oo;const fo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},po=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)};var mo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vo=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],go=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:c}=e,d=jr(e,vo);return(0,r.createElement)("svg",u(u(u({ref:t},mo),{},{width:a,height:a,stroke:n,strokeWidth:i?24*Number(s)/Number(a):s,className:fo("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),yo=["className"],bo=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{className:s}=n,i=jr(n,yo);return(0,r.createElement)(go,u({ref:a,iconNode:t,className:fo("lucide-".concat((o=po(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},i));var o});return n.displayName=po(e),n},wo=bo("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),xo=["className"],ko=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,xo);return(0,dr.jsx)(ao,u(u({ref:t,className:fi("peer relative h-5 w-5 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","before:absolute before:inset-[-12px] before:content-['']",n)},r),{},{children:(0,dr.jsx)(io,{className:fi("flex items-center justify-center text-current"),children:(0,dr.jsx)(wo,{className:"h-4 w-4"})})}))});ko.displayName=ao.displayName;var _o=a[" useId ".trim().toString()]||(()=>{}),So=0;function jo(e){const[t,n]=r.useState(_o());return Pi(()=>{e||n(e=>null!==e&&void 0!==e?e:String(So++))},[e]),e||(t?"radix-".concat(t):"")}function No(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call(t,...r)},[])}const Eo=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var Co,To="dismissableLayer.update",Ro="dismissableLayer.pointerDownOutside",Oo="dismissableLayer.focusOutside",Po=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Io=r.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c}=e,d=jr(e,Eo),h=r.useContext(Po),[f,p]=r.useState(null),m=null!==(n=null===f||void 0===f?void 0:f.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,v]=r.useState({}),g=Ni(t,e=>p(e)),y=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=y.indexOf(b),x=f?y.indexOf(f):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,_=x>=w,S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=No(e),a=r.useRef(!1),s=r.useRef(()=>{});return r.useEffect(()=>{const e=e=>{if(e.target&&!a.current){let r=function(){Lo(Ro,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);a.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}(e=>{const t=e.target,n=[...h.branches].some(e=>e.contains(t));_&&!n&&(null===i||void 0===i||i(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())},m),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=No(e),a=r.useRef(!1);return r.useEffect(()=>{const e=e=>{if(e.target&&!a.current){Lo(Oo,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{const t=e.target;[...h.branches].some(e=>e.contains(t))||(null===o||void 0===o||o(e),null===l||void 0===l||l(e),e.defaultPrevented||null===c||void 0===c||c())},m);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const n=No(e);r.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{x===h.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},m),r.useEffect(()=>{if(f)return a&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(Co=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),Do(),()=>{a&&1===h.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=Co)}},[f,m,a,h]),r.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),Do())},[f,h]),r.useEffect(()=>{const e=()=>v({});return document.addEventListener(To,e),()=>document.removeEventListener(To,e)},[]),(0,dr.jsx)(Ki.div,u(u({},d),{},{ref:g,style:u({pointerEvents:k?_?"auto":"none":void 0},e.style),onFocusCapture:Oi(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Oi(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Oi(e.onPointerDownCapture,S.onPointerDownCapture)}))});Io.displayName="DismissableLayer";var Ao=r.forwardRef((e,t)=>{const n=r.useContext(Po),a=r.useRef(null),s=Ni(t,a);return r.useEffect(()=>{const e=a.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,dr.jsx)(Ki.div,u(u({},e),{},{ref:s}))});function Do(){const e=new CustomEvent(To);document.dispatchEvent(e)}function Lo(e,t,n,r){let{discrete:a}=r;const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?Vi(s,i):s.dispatchEvent(i)}Ao.displayName="DismissableLayerBranch";var Mo=Io,zo=Ao;const Uo=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var Fo="focusScope.autoFocusOnMount",Bo="focusScope.autoFocusOnUnmount",qo={bubbles:!1,cancelable:!0},Wo=r.forwardRef((e,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:i}=e,o=jr(e,Uo),[l,c]=r.useState(null),d=No(s),h=No(i),f=r.useRef(null),p=Ni(t,e=>c(e)),m=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect(()=>{if(a){let e=function(e){if(m.paused||!l)return;const t=e.target;l.contains(t)?f.current=t:Jo(f.current,{select:!0})},t=function(e){if(m.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Jo(f.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Jo(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[a,l,m.paused]),r.useEffect(()=>{if(l){Go.add(m);const t=document.activeElement;if(!l.contains(t)){const n=new CustomEvent(Fo,qo);l.addEventListener(Fo,d),l.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(Jo(r,{select:t}),document.activeElement!==n)return}((e=Ko(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Jo(l))}return()=>{l.removeEventListener(Fo,d),setTimeout(()=>{const e=new CustomEvent(Bo,qo);l.addEventListener(Bo,h),l.dispatchEvent(e),e.defaultPrevented||Jo(null!==t&&void 0!==t?t:document.body,{select:!0}),l.removeEventListener(Bo,h),Go.remove(m)},0)}}var e},[l,d,h,m]);const v=r.useCallback(e=>{if(!n&&!a)return;if(m.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[a,s]=function(e){const t=Ko(e),n=Vo(t,e),r=Vo(t.reverse(),e);return[n,r]}(t);a&&s?e.shiftKey||r!==s?e.shiftKey&&r===a&&(e.preventDefault(),n&&Jo(s,{select:!0})):(e.preventDefault(),n&&Jo(a,{select:!0})):r===t&&e.preventDefault()}},[n,a,m.paused]);return(0,dr.jsx)(Ki.div,u(u({tabIndex:-1},o),{},{ref:p,onKeyDown:v}))});function Ko(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Vo(e,t){for(const n of e)if(!Ho(n,{upTo:t}))return n}function Ho(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Jo(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Wo.displayName="FocusScope";var Go=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=$o(e,t),e.unshift(t)},remove(t){var n;e=$o(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function $o(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const Yo=["container"];var Xo=r.forwardRef((e,t)=>{var n;const{container:a}=e,s=jr(e,Yo),[i,o]=r.useState(!1);Pi(()=>o(!0),[]);const l=a||i&&(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body);return l?Nr.createPortal((0,dr.jsx)(Ki.div,u(u({},s),{},{ref:t})),l):null});Xo.displayName="Portal";var Qo=0;function Zo(){r.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:el()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:el()),Qo++,()=>{1===Qo&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Qo--}},[])}function el(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var tl="right-scroll-bar-position",nl="width-before-scroll-bar";function rl(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var al="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,sl=new WeakMap;function il(e,t){var n=function(e,t){var n=(0,r.useState)(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}})[0];return n.callback=t,n.facade}(t||null,function(t){return e.forEach(function(e){return rl(e,t)})});return al(function(){var t=sl.get(n);if(t){var r=new Set(t),a=new Set(e),s=n.current;r.forEach(function(e){a.has(e)||rl(e,null)}),a.forEach(function(e){r.has(e)||rl(e,s)})}sl.set(n,e)},[e]),n}function ol(e){return e}function ll(e,t){void 0===t&&(t=ol);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(s)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}var cl=function(e){void 0===e&&(e={});var t=ll(null);return t.options=d({async:!0,ssr:!1},e),t}(),ul=function(){},dl=r.forwardRef(function(e,t){var n=r.useRef(null),a=r.useState({onScrollCapture:ul,onWheelCapture:ul,onTouchMoveCapture:ul}),s=a[0],i=a[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,p=e.shards,m=e.sideCar,v=e.noRelative,g=e.noIsolation,y=e.inert,b=e.allowPinchZoom,w=e.as,x=void 0===w?"div":w,k=e.gapMode,_=h(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,j=il([n,t]),N=d(d({},_),s);return r.createElement(r.Fragment,null,f&&r.createElement(S,{sideCar:cl,removeScrollBar:u,shards:p,noRelative:v,noIsolation:g,inert:y,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:k}),o?r.cloneElement(r.Children.only(l),d(d({},N),{ref:j})):r.createElement(x,d({},N,{className:c,ref:j}),l))});dl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},dl.classNames={fullWidth:nl,zeroRight:tl};var hl,fl=function(e){var t=e.sideCar,n=h(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return r.createElement(a,d({},n))};fl.isSideCarExport=!0;function pl(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hl||n.nc;return t&&e.setAttribute("nonce",t),e}var ml=function(){var e=0,t=null;return{add:function(n){var r,a;0==e&&(t=pl())&&(a=n,(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vl=function(){var e=function(){var e=ml();return function(t,n){r.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},gl={left:0,top:0,right:0,gap:0},yl=function(e){return parseInt(e||"",10)||0},bl=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return gl;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[yl(n),yl(r),yl(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},wl=vl(),xl="data-scroll-locked",kl=function(e,t,n,r){var a=e.left,s=e.top,i=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(xl,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(tl," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(nl," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(tl," .").concat(tl," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(nl," .").concat(nl," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(xl,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},_l=function(){var e=parseInt(document.body.getAttribute(xl)||"0",10);return isFinite(e)?e:0},Sl=function(e){var t=e.noRelative,n=e.noImportant,a=e.gapMode,s=void 0===a?"margin":a;r.useEffect(function(){return document.body.setAttribute(xl,(_l()+1).toString()),function(){var e=_l()-1;e<=0?document.body.removeAttribute(xl):document.body.setAttribute(xl,e.toString())}},[]);var i=r.useMemo(function(){return bl(s)},[s]);return r.createElement(wl,{styles:kl(i,!t,s,n?"":"!important")})},jl=!1;if("undefined"!==typeof window)try{var Nl=Object.defineProperty({},"passive",{get:function(){return jl=!0,!0}});window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch(Wh){jl=!1}var El=!!jl&&{passive:!1},Cl=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Tl=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Rl(e,r)){var a=Ol(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Rl=function(e,t){return"v"===e?function(e){return Cl(e,"overflowY")}(t):function(e){return Cl(e,"overflowX")}(t)},Ol=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Pl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Il=function(e){return[e.deltaX,e.deltaY]},Al=function(e){return e&&"current"in e?e.current:e},Dl=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Ll=0,Ml=[];function zl(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ul=(Fl=function(e){var t=r.useRef([]),n=r.useRef([0,0]),a=r.useRef(),s=r.useState(Ll++)[0],i=r.useState(vl)[0],o=r.useRef(e);r.useEffect(function(){o.current=e},[e]),r.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=p([e.lockRef.current],(e.shards||[]).map(Al),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=r.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var r,s=Pl(e),i=n.current,l="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=window.getSelection(),f=h&&h.anchorNode;if(f&&(f===u||f.contains(u)))return!1;var p=Tl(d,u);if(!p)return!0;if(p?r=d:(r="v"===d?"h":"v",p=Tl(d,u)),!p)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=r),!r)return!0;var m=a.current||r;return function(e,t,n,r,a){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=s*r,o=n.target,l=t.contains(o),c=!1,u=i>0,d=0,h=0;do{if(!o)break;var f=Ol(e,o),p=f[0],m=f[1]-f[2]-s*p;(p||m)&&Rl(e,o)&&(d+=m,h+=p);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&(a&&Math.abs(d)<1||!a&&i>d)||!u&&(a&&Math.abs(h)<1||!a&&-i>h))&&(c=!0),c}(m,t,e,"h"===m?l:c,!0)},[]),c=r.useCallback(function(e){var n=e;if(Ml.length&&Ml[Ml.length-1]===i){var r="deltaY"in n?Il(n):Pl(n),a=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,a=r,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)n.cancelable&&n.preventDefault();else if(!a){var s=(o.current.shards||[]).map(Al).filter(Boolean).filter(function(e){return e.contains(n.target)});(s.length>0?l(n,s[0]):!o.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),u=r.useCallback(function(e,n,r,a){var s={name:e,delta:n,target:r,should:a,shadowParent:zl(r)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),d=r.useCallback(function(e){n.current=Pl(e),a.current=void 0},[]),h=r.useCallback(function(t){u(t.type,Il(t),t.target,l(t,e.lockRef.current))},[]),f=r.useCallback(function(t){u(t.type,Pl(t),t.target,l(t,e.lockRef.current))},[]);r.useEffect(function(){return Ml.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,El),document.addEventListener("touchmove",c,El),document.addEventListener("touchstart",d,El),function(){Ml=Ml.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,El),document.removeEventListener("touchmove",c,El),document.removeEventListener("touchstart",d,El)}},[]);var m=e.removeScrollBar,v=e.inert;return r.createElement(r.Fragment,null,v?r.createElement(i,{styles:Dl(s)}):null,m?r.createElement(Sl,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},cl.useMedium(Fl),fl);var Fl,Bl=r.forwardRef(function(e,t){return r.createElement(dl,d({},e,{ref:t,sideCar:Ul}))});Bl.classNames=dl.classNames;const ql=Bl;var Wl=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},Kl=new WeakMap,Vl=new WeakMap,Hl={},Jl=0,Gl=function(e){return e&&(e.host||Gl(e.parentNode))},$l=function(e,t,n,r){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Gl(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Hl[n]||(Hl[n]=new WeakMap);var s=Hl[n],i=[],o=new Set,l=new Set(a),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};a.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,l=(Kl.get(e)||0)+1,c=(s.get(e)||0)+1;Kl.set(e,l),s.set(e,c),i.push(e),1===l&&a&&Vl.set(e,!0),1===c&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(d){console.error("aria-hidden: cannot operate on ",e,d)}})};return u(t),o.clear(),Jl++,function(){i.forEach(function(e){var t=Kl.get(e)-1,a=s.get(e)-1;Kl.set(e,t),s.set(e,a),t||(Vl.has(e)||e.removeAttribute(r),Vl.delete(e)),a||e.removeAttribute(n)}),--Jl||(Kl=new WeakMap,Kl=new WeakMap,Vl=new WeakMap,Hl={})}},Yl=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=t||Wl(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),$l(r,a,n,"aria-hidden")):function(){return null}};const Xl=["children"],Ql=["children"];function Zl(e){const t=ec(e),n=r.forwardRef((e,n)=>{const{children:a}=e,s=jr(e,Xl),i=r.Children.toArray(a),o=i.find(nc);if(o){const e=o.props.children,a=i.map(t=>t===o?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t);return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null}))}return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}function ec(e){const t=r.forwardRef((e,t)=>{const{children:n}=e,a=jr(e,Ql);if(r.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n=u({},t);for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=function(){const e=s(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=u(u({},a),s):"className"===r&&(n[r]=[a,s].filter(Boolean).join(" "))}return u(u({},e),n)}(a,n.props);return n.type!==r.Fragment&&(s.ref=t?ji(t,e):e),r.cloneElement(n,s)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var tc=Symbol("radix.slottable");function nc(e){return r.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===tc}const rc=["__scopeDialog"],ac=["forceMount"],sc=["__scopeDialog"],ic=["forceMount"],oc=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],lc=["__scopeDialog"],cc=["__scopeDialog"],uc=["__scopeDialog"];var dc="Dialog",[hc,fc]=Ti(dc),[pc,mc]=hc(dc),vc=e=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=r.useRef(null),c=r.useRef(null),[u,d]=Ai({prop:a,defaultProp:null!==s&&void 0!==s&&s,onChange:i,caller:dc});return(0,dr.jsx)(pc,{scope:t,triggerRef:l,contentRef:c,contentId:jo(),titleId:jo(),descriptionId:jo(),open:u,onOpenChange:d,onOpenToggle:r.useCallback(()=>d(e=>!e),[d]),modal:o,children:n})};vc.displayName=dc;var gc="DialogTrigger",yc=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=jr(e,rc),a=mc(gc,n),s=Ni(t,a.triggerRef);return(0,dr.jsx)(Ki.button,u(u({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":zc(a.open)},r),{},{ref:s,onClick:Oi(e.onClick,a.onOpenToggle)}))});yc.displayName=gc;var bc="DialogPortal",[wc,xc]=hc(bc,{forceMount:void 0}),kc=e=>{const{__scopeDialog:t,forceMount:n,children:a,container:s}=e,i=mc(bc,t);return(0,dr.jsx)(wc,{scope:t,forceMount:n,children:r.Children.map(a,e=>(0,dr.jsx)(Di,{present:n||i.open,children:(0,dr.jsx)(Xo,{asChild:!0,container:s,children:e})}))})};kc.displayName=bc;var _c="DialogOverlay",Sc=r.forwardRef((e,t)=>{const n=xc(_c,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=jr(e,ac),s=mc(_c,e.__scopeDialog);return s.modal?(0,dr.jsx)(Di,{present:r||s.open,children:(0,dr.jsx)(Nc,u(u({},a),{},{ref:t}))}):null});Sc.displayName=_c;var jc=Zl("DialogOverlay.RemoveScroll"),Nc=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=jr(e,sc),a=mc(_c,n);return(0,dr.jsx)(ql,{as:jc,allowPinchZoom:!0,shards:[a.contentRef],children:(0,dr.jsx)(Ki.div,u(u({"data-state":zc(a.open)},r),{},{ref:t,style:u({pointerEvents:"auto"},r.style)}))})}),Ec="DialogContent",Cc=r.forwardRef((e,t)=>{const n=xc(Ec,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=jr(e,ic),s=mc(Ec,e.__scopeDialog);return(0,dr.jsx)(Di,{present:r||s.open,children:s.modal?(0,dr.jsx)(Tc,u(u({},a),{},{ref:t})):(0,dr.jsx)(Rc,u(u({},a),{},{ref:t}))})});Cc.displayName=Ec;var Tc=r.forwardRef((e,t)=>{const n=mc(Ec,e.__scopeDialog),a=r.useRef(null),s=Ni(t,n.contentRef,a);return r.useEffect(()=>{const e=a.current;if(e)return Yl(e)},[]),(0,dr.jsx)(Oc,u(u({},e),{},{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Oi(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Oi(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Oi(e.onFocusOutside,e=>e.preventDefault())}))}),Rc=r.forwardRef((e,t)=>{const n=mc(Ec,e.__scopeDialog),a=r.useRef(!1),s=r.useRef(!1);return(0,dr.jsx)(Oc,u(u({},e),{},{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,i;(null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented)||(a.current||null===(i=n.triggerRef.current)||void 0===i||i.focus(),t.preventDefault());a.current=!1,s.current=!1},onInteractOutside:t=>{var r,i;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(s.current=!0));const o=t.target;(null===(i=n.triggerRef.current)||void 0===i?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}}))}),Oc=r.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:i}=e,o=jr(e,oc),l=mc(Ec,n),c=r.useRef(null),d=Ni(t,c);return Zo(),(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(Wo,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:i,children:(0,dr.jsx)(Io,u(u({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":zc(l.open)},o),{},{ref:d,onDismiss:()=>l.onOpenChange(!1)}))}),(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(qc,{titleId:l.titleId}),(0,dr.jsx)(Wc,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Pc="DialogTitle",Ic=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=jr(e,lc),a=mc(Pc,n);return(0,dr.jsx)(Ki.h2,u(u({id:a.titleId},r),{},{ref:t}))});Ic.displayName=Pc;var Ac="DialogDescription",Dc=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=jr(e,cc),a=mc(Ac,n);return(0,dr.jsx)(Ki.p,u(u({id:a.descriptionId},r),{},{ref:t}))});Dc.displayName=Ac;var Lc="DialogClose",Mc=r.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=jr(e,uc),a=mc(Lc,n);return(0,dr.jsx)(Ki.button,u(u({type:"button"},r),{},{ref:t,onClick:Oi(e.onClick,()=>a.onOpenChange(!1))}))});function zc(e){return e?"open":"closed"}Mc.displayName=Lc;var Uc="DialogTitleWarning",[Fc,Bc]=function(e,t){const n=r.createContext(t),a=e=>{const{children:t}=e,a=jr(e,Ei),s=r.useMemo(()=>a,Object.values(a));return(0,dr.jsx)(n.Provider,{value:s,children:t})};return a.displayName=e+"Provider",[a,function(a){const s=r.useContext(n);if(s)return s;if(void 0!==t)return t;throw new Error("`".concat(a,"` must be used within `").concat(e,"`"))}]}(Uc,{contentName:Ec,titleName:Pc,docsSlug:"dialog"}),qc=e=>{let{titleId:t}=e;const n=Bc(Uc),a="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return r.useEffect(()=>{if(t){document.getElementById(t)||console.error(a)}},[a,t]),null},Wc=e=>{let{contentRef:t,descriptionId:n}=e;const a=Bc("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(a.contentName,"}.");return r.useEffect(()=>{var e;const r=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(n&&r){document.getElementById(n)||console.warn(s)}},[s,t,n]),null},Kc=vc,Vc=kc,Hc=Sc,Jc=Cc,Gc=Ic,$c=Dc,Yc=Mc;const Xc=bo("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qc=["className"],Zc=["className","children","onEscapeKeyDown"],eu=["className"],tu=["className"],nu=["className"],ru=["className"],au=Kc,su=Vc,iu=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,Qc);return(0,dr.jsx)(Hc,u({ref:t,className:fi("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n)},r))});iu.displayName=Hc.displayName;const ou=r.forwardRef((e,t)=>{let{className:n,children:r,onEscapeKeyDown:a}=e,s=jr(e,Zc);return(0,dr.jsxs)(su,{children:[(0,dr.jsx)(iu,{}),(0,dr.jsxs)(Jc,u(u({ref:t,onEscapeKeyDown:a,className:fi("fixed left-[50%] top-[50%] z-50 flex flex-col w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg","max-h-[calc(100vh-2rem)] overscroll-contain","pb-[env(safe-area-inset-bottom,0px)]",n)},s),{},{children:[r,(0,dr.jsxs)(Yc,{className:"absolute right-2 top-2 h-11 w-11 flex items-center justify-center rounded-md opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,dr.jsx)(Xc,{className:"h-5 w-5"}),(0,dr.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});ou.displayName=Jc.displayName;const lu=e=>{let{className:t}=e,n=jr(e,eu);return(0,dr.jsx)("div",u({className:fi("flex flex-col space-y-1.5 text-center sm:text-left",t)},n))};lu.displayName="DialogHeader";const cu=e=>{let{className:t}=e,n=jr(e,tu);return(0,dr.jsx)("div",u({className:fi("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},n))};cu.displayName="DialogFooter";const uu=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,nu);return(0,dr.jsx)(Gc,u({ref:t,className:fi("text-lg font-semibold leading-none tracking-tight",n)},r))});uu.displayName=Gc.displayName;const du=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,ru);return(0,dr.jsx)($c,u({ref:t,className:fi("text-sm text-muted-foreground",n)},r))});du.displayName=$c.displayName;const hu={done:{label:"Done",variant:"done"},"in-progress":{label:"In Progress",variant:"in-progress"},waiting:{label:"Waiting",variant:"waiting"},todo:{label:"To Do",variant:"todo"}};function fu(e){let{task:t,onUpdate:n,onStatusChange:a,onDelete:s,className:i}=e;const[o,l]=r.useState(!1),[c,d]=r.useState(!1),[h,f]=r.useState(t.title),[p,m]=r.useState(t.description||""),[v,g]=r.useState(!1),[y,b]=r.useState(t),w=r.useRef(null);r.useEffect(()=>{b(t),f(t.title),m(t.description||"")},[t]),r.useEffect(()=>{c&&w.current&&(w.current.focus(),w.current.select())},[c]);const x=r.useCallback(async()=>{if(!n)return;const e={title:h.trim()||t.title,description:p.trim()};b(t=>u(u({},t),e)),g(!0),d(!1);try{await n(t.id,e)}catch(r){b(t),f(t.title),m(t.description||""),console.error("Failed to save task:",r)}finally{g(!1)}},[t,h,p,n]),k=r.useCallback(async e=>{if(e.stopPropagation(),!a)return;const n="done"===y.status?"todo":"done";b(e=>u(u({},e),{},{status:n}));try{await a(t.id,n)}catch(r){b(t),console.error("Failed to update status:",r)}},[t,y.status,a]),_=r.useCallback(e=>{"Escape"===e.key?c?(e.preventDefault(),e.stopPropagation(),f(y.title),m(y.description||""),d(!1)):l(!1):(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),c&&x())},[c,y,x]),S=hu[y.status]||hu.todo,j="done"===y.status;return(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>l(!0),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l(!0))},className:fi("group relative flex items-start gap-3 rounded-lg border border-border bg-card p-4 transition-all","hover:border-primary/50 hover:bg-card/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","cursor-pointer select-text",j&&"opacity-60",i),children:[(0,dr.jsx)(ko,{checked:j,onCheckedChange:()=>k({stopPropagation:()=>{}}),onClick:e=>e.stopPropagation(),className:"mt-0.5 shrink-0","aria-label":"Mark task as ".concat(j?"incomplete":"complete")}),(0,dr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dr.jsx)("h3",{className:fi("font-medium leading-tight",j&&"line-through text-muted-foreground"),children:y.title}),y.description&&(0,dr.jsx)("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:y.description})]}),(0,dr.jsx)(_i,{variant:S.variant,className:"shrink-0",children:S.label}),v&&(0,dr.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-card/50 rounded-lg",children:(0,dr.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"})})]}),(0,dr.jsx)(au,{open:o,onOpenChange:l,children:(0,dr.jsxs)(ou,{className:"sm:max-w-[500px]",onKeyDown:_,onEscapeKeyDown:e=>{c&&e.preventDefault()},children:[(0,dr.jsxs)(lu,{children:[c?(0,dr.jsx)(yi,{ref:w,value:h,onChange:e=>f(e.target.value),placeholder:"Task title...",className:"text-lg font-semibold"}):(0,dr.jsx)(uu,{className:fi("cursor-pointer hover:text-primary transition-colors",j&&"line-through text-muted-foreground"),onClick:()=>d(!0),children:y.title}),(0,dr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,dr.jsx)(_i,{variant:S.variant,children:S.label}),y.priority&&(0,dr.jsx)(_i,{variant:"outline",children:y.priority})]})]}),(0,dr.jsx)("div",{className:"space-y-4",children:c?(0,dr.jsx)(wi,{value:p,onChange:e=>m(e.target.value),placeholder:"Add a description...",autoResize:!0,className:"min-h-[100px]"}):(0,dr.jsx)(du,{className:fi("cursor-pointer min-h-[60px] p-3 rounded-md border border-transparent hover:border-border transition-colors",!y.description&&"text-muted-foreground italic"),onClick:()=>d(!0),children:y.description||"Click to add a description..."})}),(0,dr.jsx)(cu,{className:"gap-2 sm:gap-0",children:c?(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(vi,{variant:"ghost",onClick:()=>{f(y.title),m(y.description||""),d(!1)},children:"Cancel"}),(0,dr.jsx)(vi,{onClick:x,disabled:v,children:v?"Saving...":"Save"})]}):(0,dr.jsxs)(dr.Fragment,{children:[s&&(0,dr.jsx)(vi,{variant:"destructive",onClick:()=>{s(t.id),l(!1)},children:"Delete"}),(0,dr.jsx)(vi,{variant:"secondary",onClick:()=>d(!0),children:"Edit"}),(0,dr.jsx)(vi,{onClick:()=>l(!1),children:"Close"})]})}),(0,dr.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:c?"Cmd+Enter to save \u2022 Escape to cancel":"Press Escape to close"})]})})]})}function pu(e){let{open:t,onOpenChange:n,title:r,description:a,children:s,footer:i,size:o="default",className:l}=e;return(0,dr.jsx)(au,{open:t,onOpenChange:n,children:(0,dr.jsxs)(ou,{className:fi({sm:"sm:max-w-[400px]",default:"sm:max-w-[500px]",lg:"sm:max-w-[700px]",xl:"sm:max-w-[900px]",full:"sm:max-w-[95vw] sm:max-h-[95vh]"}[o],l),children:[(r||a)&&(0,dr.jsxs)(lu,{className:"shrink-0",children:[r&&(0,dr.jsx)(uu,{children:r}),a&&(0,dr.jsx)(du,{children:a})]}),(0,dr.jsx)("div",{className:"py-4 overflow-y-auto flex-1 min-h-0",children:s}),i&&(0,dr.jsx)(cu,{className:"shrink-0 pt-4 border-t border-border",children:i})]})})}function mu(e){let{open:t,onOpenChange:n,title:r="Are you sure?",description:a,confirmLabel:s="Confirm",cancelLabel:i="Cancel",variant:o="default",onConfirm:l,onCancel:c,loading:u=!1}=e;return(0,dr.jsx)(pu,{open:t,onOpenChange:n,title:r,description:a,size:"sm",footer:(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(vi,{variant:"ghost",onClick:()=>{c&&c(),n(!1)},disabled:u,children:i}),(0,dr.jsx)(vi,{variant:"destructive"===o?"destructive":"default",onClick:async()=>{l&&await l(),n(!1)},disabled:u,children:u?"Loading...":s})]})})}function vu(e){let{open:t,onOpenChange:n,title:r,description:a,actionLabel:s="OK"}=e;return(0,dr.jsx)(pu,{open:t,onOpenChange:n,title:r,description:a,size:"sm",footer:(0,dr.jsx)(vi,{onClick:()=>n(!1),children:s})})}function gu(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[t,n]=r.useState(e);return{isOpen:t,open:r.useCallback(()=>n(!0),[]),close:r.useCallback(()=>n(!1),[]),toggle:r.useCallback(()=>n(e=>!e),[]),setIsOpen:n}}const yu=()=>(0,dr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,dr.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,dr.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),bu=()=>(0,dr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,dr.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,dr.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]});function wu(e){let{id:t,children:n,selected:r=!1,onSelect:a,onEdit:s,onDelete:i,onClick:o,disabled:l=!1,className:c}=e;return(0,dr.jsxs)("div",{role:o?"button":void 0,tabIndex:o?0:void 0,onClick:e=>{e.target.closest("[data-action]")||e.target.closest('[role="checkbox"]')||o&&o(t)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||e.target.closest("[data-action]")||e.target.closest('[role="checkbox"]')||e.target.closest("input")||e.target.closest("textarea")||e.target.closest("[contenteditable]")||(e.preventDefault(),o&&o(t))},className:fi("group relative flex items-center gap-3 px-4 py-3 border-b border-border transition-colors","hover:bg-accent/50",o&&"cursor-pointer",r&&"bg-accent",l&&"opacity-50 pointer-events-none","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-inset",c),children:[a&&(0,dr.jsx)(ko,{checked:r,onCheckedChange:e=>{a&&a(t,e)},onClick:e=>e.stopPropagation(),disabled:l,className:"shrink-0","aria-label":"Select row"}),(0,dr.jsx)("div",{className:"flex-1 min-w-0 select-text",children:n}),(s||i)&&(0,dr.jsxs)("div",{className:fi("flex items-center gap-1 opacity-40 hover:opacity-100 transition-opacity",r&&"opacity-100"),children:[s&&(0,dr.jsx)(vi,{"data-action":"edit",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:e=>{e.stopPropagation(),s(t)},"aria-label":"Edit",children:(0,dr.jsx)(yu,{})}),i&&(0,dr.jsx)(vi,{"data-action":"delete",variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:e=>{e.stopPropagation(),i(t)},"aria-label":"Delete",children:(0,dr.jsx)(bu,{})})]})]})}function xu(e){let{children:t,selectedIds:n=[],onSelectAll:a,onClearSelection:s,bulkActions:i,emptyState:o,className:l}=e;const c=r.Children.toArray(t).length>0,u=n.length>0;return(0,dr.jsxs)("div",{className:fi("rounded-lg border border-border overflow-hidden",l),children:[u&&i&&(0,dr.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-accent border-b border-border",children:[(0,dr.jsxs)("span",{className:"text-sm text-muted-foreground",children:[n.length," selected"]}),(0,dr.jsx)("div",{className:"flex-1"}),i,s&&(0,dr.jsx)(vi,{variant:"ghost",size:"sm",onClick:s,children:"Clear"})]}),c?(0,dr.jsx)("div",{className:"divide-y divide-border",children:t}):(0,dr.jsx)(ku,{children:o||"No items yet"})]})}function ku(e){let{children:t,className:n}=e;return(0,dr.jsxs)("div",{className:fi("flex flex-col items-center justify-center py-12 px-4 text-center",n),children:[(0,dr.jsx)("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,dr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[(0,dr.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,dr.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,dr.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),(0,dr.jsx)("p",{className:"text-muted-foreground text-sm",children:t})]})}const _u=["id","children"];function Su(e){let{id:t,children:n}=e,r=jr(e,_u);const{attributes:a,listeners:s,setNodeRef:i,transform:o,transition:l,isDragging:c}=ni({id:t}),d={transform:Gr.Transform.toString(o),transition:l,opacity:c?.5:1,zIndex:c?10:0};return(0,dr.jsx)("div",u(u({ref:i,style:d},a),{},{children:(0,dr.jsxs)("div",{className:"flex items-center",children:[(0,dr.jsx)("div",u(u({className:"wb-drag-handle cursor-grab px-2 text-muted-foreground opacity-40 hover:opacity-80"},s),{},{children:"\u283f"})),(0,dr.jsx)("div",{className:"flex-1",children:(0,dr.jsx)(wu,u(u({id:t},r),{},{children:n}))})]})}))}const ju={work:{label:"XBO",color:"#3b82f6"},xbo:{label:"XBO",color:"#3b82f6"},realestate:{label:"DSP",color:"#10b981"},dsp:{label:"DSP",color:"#10b981"},health:{label:"\u05d1\u05e8\u05d9\u05d0\u05d5\u05ea",color:"#22c55e"},family:{label:"\u05de\u05e9\u05e4\u05d7\u05d4",color:"#f59e0b"},salon:{label:"La Luce",color:"#ec4899"},laluce:{label:"La Luce",color:"#ec4899"},personal:{label:"\u05d3\u05df",color:"#8b5cf6"},dan:{label:"\u05d3\u05df",color:"#8b5cf6"},tlm:{label:"TLM",color:"#6366f1"},investments:{label:"TLM",color:"#6366f1"},sport:{label:"\u05e1\u05e4\u05d5\u05e8\u05d8",color:"#22c55e"},travel:{label:"\u05d8\u05d9\u05d5\u05dc\u05d9\u05dd",color:"#f97316"}},Nu=[{id:"all",label:"\ud83d\udccb \u05d4\u05db\u05dc",icon:"\ud83d\udccb",areas:null},{id:"xbo",label:"\ud83d\udcbc XBO",icon:"\ud83d\udcbc",areas:["work","xbo"]},{id:"laluce",label:"\ud83c\udfe0 La Luce",icon:"\ud83c\udfe0",areas:["salon","laluce"]},{id:"dsp",label:"\ud83c\udfe2 DSP",icon:"\ud83c\udfe2",areas:["realestate","dsp","investments"]},{id:"tlm",label:"\ud83d\udcb0 TLM",icon:"\ud83d\udcb0",areas:["tlm"]},{id:"dan",label:"\ud83d\udc64 \u05d3\u05df",icon:"\ud83d\udc64",areas:["personal","dan"]},{id:"family",label:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \u05de\u05e9\u05e4\u05d7\u05d4",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",areas:["family"]},{id:"sport",label:"\ud83c\udfc3 \u05e1\u05e4\u05d5\u05e8\u05d8",icon:"\ud83c\udfc3",areas:["sport","health"]}];function Eu(e){return e?ju[e]||ju[null===e||void 0===e?void 0:e.toLowerCase()]||{label:e,color:"#a8a29e"}:{label:"\u2014",color:"#a8a29e"}}const Cu=[{value:"low",label:"\u05e0\u05de\u05d5\u05da",icon:"\ud83c\udf19",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05e0\u05de\u05d5\u05db\u05d4",color:"#22c55e"},{value:"medium",label:"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9",icon:"\u2600\ufe0f",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9\u05ea",color:"#f59e0b"},{value:"high",label:"\u05d2\u05d1\u05d5\u05d4",icon:"\u26a1",tooltip:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d2\u05d1\u05d5\u05d4\u05d4",color:"#ef4444"}],Tu=[{value:"work",label:"\u05e2\u05d1\u05d5\u05d3\u05d4",color:"#6366f1"},{value:"family",label:"\u05de\u05e9\u05e4\u05d7\u05d4",color:"#ec4899",override:!0},{value:"health",label:"\u05d1\u05e8\u05d9\u05d0\u05d5\u05ea",color:"#22c55e"},{value:"personal",label:"\u05d0\u05d9\u05e9\u05d9",color:"#8b5cf6"},{value:"urgent",label:"\u05d3\u05d7\u05d5\u05e3",color:"#ef4444"},{value:"waiting",label:"\u05de\u05de\u05ea\u05d9\u05df",color:"#64748b"}],Ru=[{value:"them",label:"\u05de\u05de\u05ea\u05d9\u05df \u05dc\u05d4\u05dd",icon:"\u23f3"},{value:"me",label:"\u05d0\u05e0\u05d9 \u05d7\u05d9\u05d9\u05d1",icon:"\ud83d\udce4"}];function Ou(e){let{item:t,type:n,onChange:a,onArchive:s,onFreeze:i,onDelete:o,onSave:l,onCancel:c,saving:u}=e;const[d,h]=r.useState(""),f=(t.labels||[]).includes("family"),p="dependency"===n,m=(t.text||t.title||"").slice(0,30),v=m.length>=30?m+"...":m;return(0,dr.jsxs)("div",{className:"space-y-5",children:[v&&(0,dr.jsxs)("div",{className:"text-sm text-muted-foreground truncate -mt-2 mb-2 pb-2 border-b border-border/50",children:["\ud83d\udcdd ",v]}),(0,dr.jsxs)("div",{className:"flex gap-3 pb-3 border-b border-border",children:[(0,dr.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,dr.jsx)("div",{className:"flex-1"}),(0,dr.jsx)(vi,{onClick:()=>{(t.text||t.title||"").trim()?(h(""),l()):h("\u05e0\u05d0 \u05dc\u05d4\u05d6\u05d9\u05df \u05ea\u05d9\u05d0\u05d5\u05e8 \u05dc\u05de\u05e9\u05d9\u05de\u05d4")},disabled:u,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-6 font-semibold shadow-sm",children:u?"\u23f3 \u05e9\u05d5\u05de\u05e8...":"\u2713 \u05e9\u05de\u05d5\u05e8 \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd"})]}),p?(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05e1\u05d5\u05d2 \u05ea\u05dc\u05d5\u05ea"}),(0,dr.jsx)("div",{className:"flex gap-2",children:Ru.map(e=>{const n=t.direction===e.value;return(0,dr.jsxs)("button",{type:"button",onClick:()=>a("direction",e.value),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg border-2 transition-all flex-1 justify-center ".concat(n?"border-primary bg-primary/15":"border-border hover:border-primary/50"),children:[(0,dr.jsx)("span",{children:e.icon}),(0,dr.jsx)("span",{className:n?"font-semibold":"",children:e.label})]},e.value)})})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05de\u05de\u05d9? *"}),(0,dr.jsx)(yi,{value:t.waiting_on||"",onChange:e=>{a("waiting_on",e.target.value),d&&h("")},placeholder:"\u05e9\u05dd \u05d4\u05d0\u05d3\u05dd \u05d0\u05d5 \u05d4\u05d2\u05d5\u05e8\u05dd...",className:d&&!t.waiting_on?"border-red-500":""})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05de\u05d4 \u05de\u05d7\u05db\u05d9\u05dd? *"}),(0,dr.jsx)(wi,{value:t.waiting_for||"",onChange:e=>{a("waiting_for",e.target.value),d&&h("")},rows:2,placeholder:"\u05ea\u05e9\u05d5\u05d1\u05d4, \u05de\u05e1\u05de\u05da, \u05d0\u05d9\u05e9\u05d5\u05e8...",className:d&&!t.waiting_for?"border-red-500":""})]})]}):(0,dr.jsx)(dr.Fragment,{children:(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05ea\u05d9\u05d0\u05d5\u05e8 *"}),(0,dr.jsx)(wi,{value:t.text||t.title||"",onChange:e=>{a("text",e.target.value),d&&h("")},rows:4,className:"resize-y min-h-[100px] ".concat(d?"border-red-500 focus:ring-red-500":""),placeholder:"\u05d4\u05d6\u05df \u05ea\u05d9\u05d0\u05d5\u05e8 \u05dc\u05de\u05e9\u05d9\u05de\u05d4..."}),d&&(0,dr.jsxs)("p",{className:"text-sm flex items-center gap-1",style:{color:"#ef4444"},children:["\u274c ",d]})]})}),d&&p&&(0,dr.jsxs)("p",{className:"text-sm flex items-center gap-1",style:{color:"#ef4444"},children:["\u274c ",d]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:["\u05ea\u05d0\u05e8\u05d9\u05da \u05d9\u05e2\u05d3",(0,dr.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:"(\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"})]}),(0,dr.jsx)(yi,{type:"date",value:t.due_date||"",onChange:e=>a("due_date",e.target.value),className:"w-full"})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05d0\u05d6\u05d5\u05e8 \u05d1\u05d7\u05d9\u05d9\u05dd"}),(0,dr.jsx)("div",{className:"flex flex-wrap gap-2",children:Nu.filter(e=>"all"!==e.id).map(e=>{var n;const r=null===(n=e.areas)||void 0===n?void 0:n.some(e=>(t.area||"").toLowerCase()===e||(t.domain||"").toLowerCase()===e);return(0,dr.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-3 py-2 rounded-lg border text-sm transition-all ".concat(r?"bg-accent text-white border-accent":"bg-background border-border hover:border-accent/50"),onClick:()=>{var t;return a("area",(null===(t=e.areas)||void 0===t?void 0:t[0])||e.id)},children:[(0,dr.jsx)("span",{children:e.icon}),(0,dr.jsx)("span",{children:e.label.replace(e.icon+" ","")})]},e.id)})})]}),!p&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05e8\u05de\u05ea \u05d0\u05e0\u05e8\u05d2\u05d9\u05d4"}),(0,dr.jsx)("div",{className:"flex gap-2",children:Cu.map(e=>{const n=t.energy_level===e.value;return(0,dr.jsxs)("button",{onClick:()=>a("energy_level",e.value),title:e.tooltip,className:"flex items-center gap-1.5 px-4 py-2.5 rounded-lg border-2 transition-all ".concat(n?"border-primary bg-primary/15 shadow-sm scale-105":"border-border hover:border-primary/50 opacity-60 hover:opacity-100"),children:[n&&(0,dr.jsx)("span",{className:"text-primary",children:"\u2713"}),(0,dr.jsx)("span",{title:e.tooltip,children:e.icon}),(0,dr.jsx)("span",{className:"text-sm ".concat(n?"font-semibold":""),children:e.label})]},e.value)})})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05ea\u05d5\u05d5\u05d9\u05d5\u05ea"}),(0,dr.jsx)("div",{className:"flex flex-wrap gap-2",children:Tu.map(e=>{const n=(t.labels||[]).includes(e.value);return(0,dr.jsxs)("button",{onClick:()=>(e=>{const n=t.labels||[],r=n.includes(e)?n.filter(t=>t!==e):[...n,e];a("labels",r)})(e.value),className:"px-3 py-1.5 rounded-full text-sm transition-all flex items-center gap-1 ".concat(n?"text-white shadow-sm":"border border-border hover:border-primary/50 opacity-60 hover:opacity-100"),style:{backgroundColor:n?e.color:"transparent",color:n?"white":void 0},children:[n&&(0,dr.jsx)("span",{children:"\u2713"}),e.label,e.override&&(0,dr.jsx)("span",{className:"ml-1",title:"\u05ea\u05de\u05d9\u05d3 \u05de\u05e7\u05d1\u05dc \u05e2\u05d3\u05d9\u05e4\u05d5\u05ea",children:"\ud83d\udc51"})]},e.value)})}),f&&(0,dr.jsx)("p",{className:"text-sm text-muted-foreground",children:"\ud83c\udfe0 \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05de\u05e9\u05e4\u05d7\u05d4 \u05de\u05e7\u05d1\u05dc\u05d5\u05ea \u05e2\u05d3\u05d9\u05e4\u05d5\u05ea"})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"\u05d0\u05d7\u05e8\u05d0\u05d9"}),(0,dr.jsxs)("select",{className:"w-full h-10 px-3 rounded-lg border border-border bg-background focus:outline-none focus:ring-2 focus:ring-ring",value:t.assignee||"dan",onChange:e=>a("assignee",e.target.value),children:[(0,dr.jsx)("option",{value:"dan",children:"\u05d3\u05df"}),(0,dr.jsx)("option",{value:"pa",children:"\u05e2\u05d5\u05d6\u05e8 \u05d0\u05d9\u05e9\u05d9"}),(0,dr.jsx)("option",{value:"mikka",children:"\u05de\u05d9\u05e7\u05d4"})]})]}),(0,dr.jsxs)("div",{className:"space-y-2",children:[(0,dr.jsxs)("label",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:["\u05ea\u05dc\u05d5\u05d9\u05d5\u05ea",(0,dr.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:"(\u05d0\u05d5\u05e4\u05e6\u05d9\u05d5\u05e0\u05dc\u05d9)"})]}),(0,dr.jsx)(yi,{placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d4: \u05ea\u05e9\u05d5\u05d1\u05d4 \u05de\u05d9\u05d5\u05e1\u05d9, \u05d0\u05d9\u05e9\u05d5\u05e8 \u05de\u05e0\u05d4\u05dc...",value:t.dependencies||"",onChange:e=>a("dependencies",e.target.value)}),(0,dr.jsx)("p",{className:"text-xs text-muted-foreground",children:"\ud83d\udca1 \u05de\u05d4 \u05d7\u05d5\u05e1\u05dd \u05d0\u05ea \u05d4\u05de\u05e9\u05d9\u05de\u05d4? \u05d0\u05d3\u05dd, \u05de\u05e9\u05d9\u05de\u05d4 \u05d0\u05d7\u05e8\u05ea, \u05d0\u05d5 \u05de\u05e9\u05d0\u05d1 \u05e9\u05d7\u05e1\u05e8"})]})]}),(0,dr.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-border mt-4",children:[!p&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(vi,{variant:"ghost",size:"sm",onClick:i,title:t.frozen?"\u05e9\u05d7\u05e8\u05e8 \u05d0\u05ea \u05d4\u05de\u05e9\u05d9\u05de\u05d4 \u05d5\u05d4\u05d7\u05d6\u05e8 \u05dc\u05e8\u05e9\u05d9\u05de\u05d4 \u05d4\u05e4\u05e2\u05d9\u05dc\u05d4":"\u05d4\u05e7\u05e4\u05d0 \u05d0\u05ea \u05d4\u05de\u05e9\u05d9\u05de\u05d4 - \u05dc\u05d0 \u05ea\u05d5\u05e4\u05d9\u05e2 \u05d1\u05ea\u05e2\u05d3\u05d5\u05e3 \u05d9\u05d5\u05de\u05d9 \u05e2\u05d3 \u05e9\u05ea\u05e9\u05d7\u05e8\u05e8",className:"hover:bg-blue-500/10",children:t.frozen?"\ud83d\udd13 \u05e9\u05d7\u05e8\u05e8":"\ud83d\udd12 \u05d4\u05e7\u05e4\u05d0"}),(0,dr.jsx)(vi,{variant:"ghost",size:"sm",onClick:s,title:"\u05d4\u05e2\u05d1\u05e8 \u05dc\u05d0\u05e8\u05db\u05d9\u05d5\u05df - \u05d4\u05de\u05e9\u05d9\u05de\u05d4 \u05ea\u05d9\u05e9\u05de\u05e8 \u05d0\u05d1\u05dc \u05dc\u05d0 \u05ea\u05d5\u05e4\u05d9\u05e2 \u05d1\u05e8\u05e9\u05d9\u05de\u05d5\u05ea",className:"hover:bg-amber-500/10",children:"\ud83d\udce6 \u05d0\u05e8\u05db\u05d9\u05d1"})]}),(0,dr.jsx)("div",{className:"flex-1"}),(0,dr.jsx)(vi,{variant:"ghost",size:"sm",onClick:o,title:"\u05de\u05d7\u05e7 \u05dc\u05e6\u05de\u05d9\u05ea\u05d5\u05ea - \u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05d7\u05d6\u05e8!",className:"hover:bg-red-500/10 text-red-500 hover:text-red-600",children:"\ud83d\uddd1\ufe0f \u05de\u05d7\u05e7"})]})]})}const Pu=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[p,m]=(0,r.useState)("tasks"),[v,g]=(0,r.useState)(new Set),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)("all"),[k,_]=(0,r.useState)(!1),[S,j]=(0,r.useState)(null),[N,E]=(0,r.useState)(null),[C,T]=(0,r.useState)([]),[R,O]=(0,r.useState)(!1),[P,I]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(la(ts,{activationConstraint:{distance:5}}),la(Ya,{coordinateGetter:si})),M=(0,r.useCallback)(async()=>{if(Xn()){try{const[e,n,r,s,o]=await Promise.all([Yn.from("tasks").select("*").eq("completed",!1).eq("archived",!1).order("derived_priority",{ascending:!1}),Yn.from("tasks").select("*").or("completed.eq.true,archived.eq.true").order("completed_at",{ascending:!1}).limit(50),Yn.from("projects").select("*").in("status",["active","idea","frozen"]).order("updated_at",{ascending:!1}),Yn.from("dependencies").select("*").eq("status","waiting").order("created_at",{ascending:!1}),Yn.from("parking").select("*").order("created_at",{ascending:!1})]);e.data&&t(e.data),n.data&&d(n.data),r.data&&a(r.data),s.data&&i(s.data),o.data&&l(o.data)}catch(Wh){console.error("Workbench fetch error:",Wh)}f(!1)}else f(!1)},[]);(0,r.useEffect)(()=>{M()},[M]);const z=e=>{const{active:n,over:r}=e;r&&n.id!==r.id&&("tasks"===p?t(e=>{const t=e.findIndex(e=>e.id===n.id),a=e.findIndex(e=>e.id===r.id);return Bs(e,t,a)}):"parking"===p&&l(e=>{const t=e.findIndex(e=>e.id===n.id),a=e.findIndex(e=>e.id===r.id);return Bs(e,t,a)}))},U=e=>{if(!e)return"";const t=Math.round((Date.now()-new Date(e))/864e5);return 0===t?"\u05d4\u05d9\u05d5\u05dd":1===t?"\u05d0\u05ea\u05de\u05d5\u05dc":"\u05dc\u05e4\u05e0\u05d9 ".concat(t," \u05d9\u05de\u05d9\u05dd")},F=e=>{if("all"===w)return e;const t=Nu.find(e=>e.id===w);return t&&t.areas?e.filter(e=>{const n=(e.area||e.domain||"").toLowerCase(),r=(e.labels||[]).map(e=>e.toLowerCase());return!!t.areas.some(e=>n.includes(e)||e.includes(n))||!!t.areas.some(e=>r.includes(e))}):e},B=(e,t)=>{j(u({},e)),E(t),T([]),I(!1),_(!0)},q=(e,t)=>{j(n=>u(u({},n),{},{[e]:t})),C.includes(e)||T(t=>[...t,e])},W=async()=>{if(S&&Xn()){O(!0);try{const e="task"===N?"tasks":"project"===N?"projects":"dependency"===N?"dependencies":"parking",t=(S.labels||[]).includes("family");let n={};"task"===N?n={text:S.text,labels:S.labels||[],energy_level:S.energy_level||null,area:S.area||null,frozen:S.frozen||!1,archived:S.archived||!1,assignee:S.assignee||"dan",family_override:t}:"project"===N?n={title:S.text||S.title,status:S.frozen?"frozen":S.archived?"archived":"active",domain:S.area||S.domain||null,updated_at:(new Date).toISOString()}:"dependency"===N?n={waiting_on:S.waiting_on,waiting_for:S.waiting_for,direction:S.direction||"them",domain:S.area||S.domain||null,updated_at:(new Date).toISOString()}:"parking"===N&&(n={text:S.text,domain:S.area||S.domain||null,updated_at:(new Date).toISOString()});const{error:r}=await Yn.from(e).update(n).eq("id",S.id);if(r)throw r;await M(),cr({title:"\u2713 \u05e0\u05e9\u05de\u05e8",description:"\u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05e0\u05e9\u05de\u05e8\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"}),_(!1),j(null),E(null),T([]),C.length>0&&(async()=>{try{await Yn.from("correction_signals").insert({user_id:"dan",entity_type:N,entity_id:S.id,corrections:C.map(e=>({field:e,corrected:S[e],timestamp:(new Date).toISOString()})),created_at:(new Date).toISOString()})}catch(Wh){console.warn("Correction signal failed (non-critical):",Wh)}})()}catch(Wh){console.error("Save failed:",Wh),cr({variant:"destructive",title:"\u05e9\u05de\u05d9\u05e8\u05d4 \u05e0\u05db\u05e9\u05dc\u05d4",description:Wh.message||"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05de\u05d5\u05e8. \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1."})}finally{O(!1)}}},K=async(e,t)=>{if(Xn()&&window.confirm("\u05dc\u05de\u05d7\u05d5\u05e7 \u05dc\u05e6\u05de\u05d9\u05ea\u05d5\u05ea?"))try{const n="task"===t?"tasks":"project"===t?"projects":"dependency"===t?"dependencies":"parking",{error:r}=await Yn.from(n).delete().eq("id",e);if(r)throw r;cr({title:"\ud83d\uddd1\ufe0f \u05e0\u05de\u05d7\u05e7"}),await M()}catch(Wh){console.error("Quick delete failed:",Wh),cr({variant:"destructive",title:"\u05de\u05d7\u05d9\u05e7\u05d4 \u05e0\u05db\u05e9\u05dc\u05d4"})}},V=F(e),H=F(n),J=F(s),G=F(o),$=[{id:"tasks",label:"\u05de\u05e9\u05d9\u05de\u05d5\u05ea",count:V.length,icon:"\ud83d\udccb"},{id:"projects",label:"\u05e4\u05e8\u05d5\u05d9\u05e7\u05d8\u05d9\u05dd",count:H.length,icon:"\ud83d\ude80"},{id:"dependencies",label:"\u05ea\u05dc\u05d5\u05d9\u05d5\u05ea",count:J.length,icon:"\ud83d\udd17"},{id:"parking",label:"\u05d7\u05e0\u05d9\u05d4",count:G.length,icon:"\ud83c\udfdc\ufe0f"}];return h?(0,dr.jsx)("div",{className:"wb",children:(0,dr.jsxs)("div",{className:"wb-loading",children:[(0,dr.jsx)("div",{className:"wb-pulse"}),(0,dr.jsx)("span",{children:"\u05d8\u05d5\u05e2\u05df..."})]})}):(0,dr.jsx)("div",{className:"wb",children:(0,dr.jsxs)("div",{className:"wb-container",children:[(0,dr.jsxs)("header",{className:"wb-header",children:[(0,dr.jsx)("h1",{children:"\ud83d\udd27 \u05e1\u05d3\u05e0\u05d4"}),(0,dr.jsx)("p",{className:"wb-sub",children:"\u05ea\u05d7\u05d6\u05d5\u05e7\u05d4, \u05d0\u05e8\u05d2\u05d5\u05df, \u05e1\u05e7\u05d9\u05e8\u05d4 \u05e9\u05d1\u05d5\u05e2\u05d9\u05ea"})]}),(0,dr.jsx)("div",{className:"wb-context-switcher",children:Nu.map(e=>(0,dr.jsxs)("button",{className:"wb-context-btn ".concat(w===e.id?"wb-context-active":""),onClick:()=>x(e.id),children:[(0,dr.jsx)("span",{className:"wb-context-icon",children:e.icon}),(0,dr.jsx)("span",{className:"wb-context-label",children:e.label.replace(e.icon+" ","")})]},e.id))}),c.length>0&&(0,dr.jsxs)("button",{className:"wb-archive-toggle",onClick:()=>b(!y),children:["\ud83d\udce6 \u05d0\u05e8\u05db\u05d9\u05d5\u05df (",c.length,")",(0,dr.jsx)("span",{className:"wb-archive-arrow",children:y?"\u25b2":"\u25bc"})]}),y&&c.length>0&&(0,dr.jsxs)("div",{className:"wb-archive",children:[(0,dr.jsx)("div",{className:"wb-archive-header",children:(0,dr.jsx)("h3",{children:"\ud83d\udce6 \u05d0\u05e8\u05db\u05d9\u05d5\u05df \u2014 \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05e9\u05d4\u05d5\u05e9\u05dc\u05de\u05d5 \u05d0\u05d5 \u05e0\u05d0\u05e8\u05db\u05d1\u05d5"})}),(0,dr.jsx)("div",{className:"wb-archive-list",children:c.map(e=>(0,dr.jsxs)("div",{className:"wb-archive-item",children:[(0,dr.jsxs)("div",{className:"wb-archive-item-content",children:[(0,dr.jsx)("span",{className:"wb-archive-status ".concat(e.completed?"completed":"archived"),children:e.completed?"\u2713":"\ud83d\udcc1"}),(0,dr.jsx)("span",{className:"wb-archive-text",children:e.text||e.title}),(0,dr.jsx)("span",{className:"wb-archive-date",children:e.completed_at?U(e.completed_at):U(e.updated_at)})]}),(0,dr.jsx)("button",{className:"wb-archive-restore",onClick:()=>(async e=>{try{if(Xn()){const{error:t}=await Yn.from("tasks").update({completed:!1,archived:!1,completed_at:null}).eq("id",e);if(t)throw t}const n=c.find(t=>t.id===e);n&&(d(t=>t.filter(t=>t.id!==e)),t(e=>[u(u({},n),{},{completed:!1,archived:!1}),...e])),cr({title:"\u2713 \u05de\u05e9\u05d9\u05de\u05d4 \u05e9\u05d5\u05d7\u05d6\u05e8\u05d4"})}catch(Wh){console.error("Restore error:",Wh),cr({title:"\u05e9\u05d7\u05d6\u05d5\u05e8 \u05e0\u05db\u05e9\u05dc",variant:"destructive"})}})(e.id),children:"\u21a9\ufe0f \u05e9\u05d7\u05d6\u05e8"})]},e.id))})]}),(0,dr.jsx)("div",{className:"wb-tabs",children:$.map(e=>(0,dr.jsxs)("button",{className:"wb-tab ".concat(p===e.id?"wb-tab-active":""),onClick:()=>m(e.id),children:[(0,dr.jsx)("span",{children:e.icon}),(0,dr.jsx)("span",{children:e.label}),(0,dr.jsx)("span",{className:"wb-tab-count",children:e.count})]},e.id))}),"tasks"===p&&(0,dr.jsx)(Ds,{sensors:L,collisionDetection:va,onDragEnd:z,children:(0,dr.jsx)($s,{items:V.map(e=>e.id),strategy:Hs,children:(0,dr.jsx)(xu,{emptyState:"\u05d0\u05d9\u05df \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05e4\u05ea\u05d5\u05d7\u05d5\u05ea \u2728",children:V.map(e=>{const n=Eu(e.area),r=v.has(e.id);return(0,dr.jsx)(Su,{id:e.id,onEdit:t=>B(e,"task"),onDelete:t=>K(e.id,"task"),disabled:r,className:r?"opacity-50":"",children:(0,dr.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,dr.jsx)("button",{className:"w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ".concat(r?"bg-green-500 border-green-500 text-white":"border-border hover:border-green-500 hover:bg-green-500/10"),onClick:n=>{n.stopPropagation(),(async e=>{g(t=>new Set([...t,e]));try{if(Xn()){const{error:t}=await Yn.from("tasks").update({completed:!0,completed_at:(new Date).toISOString()}).eq("id",e);if(t)throw t}setTimeout(()=>{t(t=>t.filter(t=>t.id!==e)),g(t=>{const n=new Set(t);return n.delete(e),n})},300),cr({title:"\u2713 \u05de\u05e9\u05d9\u05de\u05d4 \u05d4\u05d5\u05e9\u05dc\u05de\u05d4"})}catch(Wh){console.error("Complete error:",Wh),g(t=>{const n=new Set(t);return n.delete(e),n}),cr({title:"\u05d4\u05e9\u05dc\u05de\u05ea \u05de\u05e9\u05d9\u05de\u05d4 \u05e0\u05db\u05e9\u05dc\u05d4",variant:"destructive"})}})(e.id)},disabled:r,children:r&&"\u2713"}),(0,dr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dr.jsx)("span",{className:"font-medium block line-clamp-2 ".concat(r?"line-through text-muted-foreground":""),title:e.text,children:e.text}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[e.deadline&&(0,dr.jsxs)("span",{className:"text-xs text-muted-foreground",children:["\u23f0 ",new Date(e.deadline).toLocaleDateString("he-IL",{day:"numeric",month:"short"})]}),e.from_person&&(0,dr.jsxs)("span",{className:"text-xs text-muted-foreground",children:["\u05de\u05d0\u05ea: ",e.from_person]}),e.energy_cost&&(0,dr.jsx)(_i,{variant:"high"===e.energy_cost?"destructive":"medium"===e.energy_cost?"warning":"secondary",children:"high"===e.energy_cost?"\u05d2\u05d1\u05d5\u05d4":"medium"===e.energy_cost?"\u05d1\u05d9\u05e0\u05d5\u05e0\u05d9":"\u05e0\u05de\u05d5\u05da"})]})]}),(0,dr.jsx)(_i,{variant:"outline",style:{backgroundColor:n.color+"15",color:n.color,borderColor:n.color+"30"},children:n.label})]})},e.id)})})})}),"projects"===p&&(0,dr.jsx)(xu,{emptyState:"\u05d0\u05d9\u05df \u05e4\u05e8\u05d5\u05d9\u05e7\u05d8\u05d9\u05dd",children:H.map(e=>{const t=Eu(e.domain);return(0,dr.jsx)(wu,{id:e.id,onClick:()=>B(e,"project"),onEdit:()=>B(e,"project"),onDelete:()=>K(e.id,"project"),children:(0,dr.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,dr.jsx)("div",{className:"w-2.5 h-2.5 rounded-full shrink-0 ".concat("active"===e.status?"bg-green-500":"idea"===e.status?"bg-blue-500":"bg-muted-foreground")}),(0,dr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dr.jsx)("span",{className:"font-medium",children:e.title}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-2 mt-1",children:[(0,dr.jsx)(_i,{variant:"active"===e.status?"done":"idea"===e.status?"waiting":"secondary",children:"active"===e.status?"\u05e4\u05e2\u05d9\u05dc":"idea"===e.status?"\u05e8\u05e2\u05d9\u05d5\u05df":"\u05e7\u05e4\u05d5\u05d0"}),e.notes&&(0,dr.jsx)("span",{className:"text-xs text-muted-foreground",children:e.notes})]})]}),(0,dr.jsx)(_i,{variant:"outline",style:{backgroundColor:t.color+"15",color:t.color,borderColor:t.color+"30"},children:t.label})]})},e.id)})}),"dependencies"===p&&(0,dr.jsx)(xu,{emptyState:"\u05d0\u05d9\u05df \u05ea\u05dc\u05d5\u05d9\u05d5\u05ea \u05e4\u05ea\u05d5\u05d7\u05d5\u05ea \u2728",children:J.map(e=>{const t=Math.round((Date.now()-new Date(e.created_at))/864e5)>5,n=Eu(e.domain);return(0,dr.jsx)(wu,{id:e.id,className:t?"border-l-2 border-l-red-500":"",onEdit:()=>B(e,"dependency"),onDelete:()=>K(e.id,"dependency"),children:(0,dr.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,dr.jsx)("span",{className:"text-lg shrink-0",children:"them"===e.direction?"\u23f3":"\ud83d\udce4"}),(0,dr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dr.jsxs)("div",{className:"font-medium",children:[(0,dr.jsx)("span",{className:"text-muted-foreground",children:"them"===e.direction?"\u05de\u05de\u05ea\u05d9\u05df \u05dc-":"\u05d0\u05e0\u05d9 \u05d7\u05d9\u05d9\u05d1 \u05dc-"}),(0,dr.jsx)("span",{className:"font-semibold",children:e.waiting_on})]}),(0,dr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[(0,dr.jsx)("span",{className:"text-sm",children:e.waiting_for}),(0,dr.jsxs)("span",{className:"text-xs ".concat(t?"text-red-500 font-semibold":"text-muted-foreground"),children:["\u2022 ",U(e.created_at)]}),t&&(0,dr.jsx)(_i,{variant:"destructive",className:"text-xs",children:"\u05de\u05ea\u05e2\u05db\u05d1!"})]})]}),e.domain&&(0,dr.jsx)(_i,{variant:"outline",style:{backgroundColor:n.color+"15",color:n.color,borderColor:n.color+"30"},className:"shrink-0",children:n.label}),(0,dr.jsx)(vi,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),(async e=>{try{if(Xn()){const{error:t}=await Yn.from("dependencies").update({status:"resolved"}).eq("id",e);if(t)throw t}i(t=>t.filter(t=>t.id!==e)),cr({title:"\u2713 \u05ea\u05dc\u05d5\u05ea \u05d4\u05d5\u05e9\u05dc\u05de\u05d4"})}catch(Wh){console.error("Resolve dep error:",Wh),cr({title:"\u05e4\u05ea\u05e8\u05d5\u05df \u05ea\u05dc\u05d5\u05ea \u05e0\u05db\u05e9\u05dc",variant:"destructive"})}})(e.id)},className:"shrink-0",children:"\u2713 \u05d1\u05d5\u05e6\u05e2"})]})},e.id)})}),"parking"===p&&(0,dr.jsx)(Ds,{sensors:L,collisionDetection:va,onDragEnd:z,children:(0,dr.jsx)($s,{items:G.map(e=>e.id),strategy:Hs,children:(0,dr.jsx)(xu,{emptyState:"\u05d4\u05d7\u05e0\u05d9\u05d4 \u05e8\u05d9\u05e7\u05d4",children:G.map(e=>{const t=Eu(e.domain);return(0,dr.jsx)(Su,{id:e.id,onClick:()=>B(e,"parking"),onEdit:()=>B(e,"parking"),onDelete:()=>K(e.id,"parking"),children:(0,dr.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,dr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,dr.jsx)("span",{className:"font-medium",children:e.text}),(0,dr.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:(0,dr.jsx)("span",{className:"text-xs text-muted-foreground",children:U(e.created_at)})})]}),(0,dr.jsx)(_i,{variant:"outline",style:{backgroundColor:t.color+"15",color:t.color,borderColor:t.color+"30"},children:t.label})]})},e.id)})})})}),(0,dr.jsx)(pu,{open:k,onOpenChange:_,title:"task"===N?"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05e9\u05d9\u05de\u05d4":"project"===N?"\u05e2\u05e8\u05d9\u05db\u05ea \u05e4\u05e8\u05d5\u05d9\u05e7\u05d8":"dependency"===N?"\u05e2\u05e8\u05d9\u05db\u05ea \u05ea\u05dc\u05d5\u05ea":"\u05e2\u05e8\u05d9\u05db\u05ea \u05e4\u05e8\u05d9\u05d8",size:"lg",children:P?(0,dr.jsxs)("div",{className:"flex flex-col items-center gap-4 py-8",children:[(0,dr.jsx)("p",{className:"text-lg",children:"\u05dc\u05d4\u05e2\u05d1\u05d9\u05e8 \u05dc\u05d0\u05e8\u05db\u05d9\u05d5\u05df?"}),(0,dr.jsxs)("div",{className:"flex gap-3",children:[(0,dr.jsx)(vi,{variant:"outline",onClick:()=>I(!1),children:"\u05dc\u05d0, \u05d4\u05e9\u05d0\u05e8"}),(0,dr.jsx)(vi,{variant:"destructive",onClick:async()=>{q("archived",!0),I(!1),await W()},children:"\u05db\u05df, \u05d0\u05e8\u05db\u05d1"})]})]}):A?(0,dr.jsxs)("div",{className:"flex flex-col items-center gap-4 py-8",children:[(0,dr.jsx)("p",{className:"text-lg text-red-500",children:"\u26a0\ufe0f \u05dc\u05de\u05d7\u05d5\u05e7 \u05dc\u05e6\u05de\u05d9\u05ea\u05d5\u05ea?"}),(0,dr.jsx)("p",{className:"text-sm text-muted-foreground",children:"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05d7\u05d6\u05e8 \u05e4\u05e2\u05d5\u05dc\u05d4 \u05d6\u05d5"}),(0,dr.jsxs)("div",{className:"flex gap-3",children:[(0,dr.jsx)(vi,{variant:"outline",onClick:()=>D(!1),children:"\u05dc\u05d0, \u05d1\u05d8\u05dc"}),(0,dr.jsx)(vi,{variant:"destructive",onClick:async()=>{if(S&&Xn())try{const e="task"===N?"tasks":"project"===N?"projects":"parking",{error:t}=await Yn.from(e).delete().eq("id",S.id);if(t)throw t;cr({title:"\ud83d\uddd1\ufe0f \u05e0\u05de\u05d7\u05e7",description:"\u05d4\u05e4\u05e8\u05d9\u05d8 \u05e0\u05de\u05d7\u05e7 \u05dc\u05e6\u05de\u05d9\u05ea\u05d5\u05ea"}),await M(),_(!1),j(null),D(!1)}catch(Wh){console.error("Delete failed:",Wh),cr({variant:"destructive",title:"\u05de\u05d7\u05d9\u05e7\u05d4 \u05e0\u05db\u05e9\u05dc\u05d4",description:Wh.message||"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05de\u05d7\u05d5\u05e7. \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1."})}},children:"\u05db\u05df, \u05de\u05d7\u05e7"})]})]}):S&&(0,dr.jsx)(Ou,{item:S,type:N,onChange:q,onArchive:()=>I(!0),onFreeze:()=>{q("frozen",!(null!==S&&void 0!==S&&S.frozen))},onDelete:()=>D(!0),onSave:W,onCancel:()=>_(!1),saving:R})})]})})};function Iu(){return new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Nicosia"}))}function Au(e){const t=Iu();t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),Math.ceil((n-t)/864e5)}function Du(e,t){const n={day:"numeric",month:"short",timeZone:"Asia/Nicosia"},r=new Date(e).toLocaleDateString("he-IL",n);if(!t||e===t)return r;const a=new Date(t).toLocaleDateString("he-IL",n);return"".concat(r," \u2014 ").concat(a)}function Lu(e){const{_type:t,daysAway:n}=e,r=e.prepDays||{trip:14,birthday:7,milestone:30,holiday:3}[t]||7,a=n<=r;return{prepDays:r,isInPrepWindow:a,daysUntilPrep:a?0:n-r}}function Mu(e){const{_type:t,metadata:n}=e;if(null!==n&&void 0!==n&&n.meaning)return n.meaning;if(null!==n&&void 0!==n&&n.why)return n.why;if(null!==n&&void 0!==n&&n.description)return n.description;if(null!==n&&void 0!==n&&n.showDefaultMeaning)switch(t){case"trip":return"\u05d6\u05de\u05df \u05de\u05e9\u05e4\u05d7\u05d4 \u05d5\u05d9\u05e6\u05d9\u05d0\u05d4 \u05de\u05d4\u05e9\u05d2\u05e8\u05d4";case"birthday":return"\u05d7\u05d2\u05d9\u05d2\u05d4 \u05d5\u05d7\u05d9\u05d1\u05d5\u05e8 \u05e2\u05dd \u05d9\u05e7\u05d9\u05e8\u05d9\u05dd";case"milestone":return"\u05e6\u05e2\u05d3 \u05e7\u05d3\u05d9\u05de\u05d4 \u05dc\u05e2\u05d1\u05e8 \u05d4\u05de\u05d8\u05e8\u05d4";case"holiday":return"\u05d4\u05e4\u05e1\u05e7\u05d4 \u05de\u05d4\u05e9\u05d2\u05e8\u05d4, \u05d6\u05de\u05df \u05d9\u05d7\u05d3";default:return null}return null}function zu(e){if("trip"===e._type)return{icon:"\u2708\ufe0f",label:"\u05d8\u05d9\u05d5\u05dc"};if("birthday"===e._type)return{icon:"\ud83c\udf82",label:"\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea"};if("holiday"===e._type)return{icon:"\ud83e\uddd2",label:"\u05d7\u05d5\u05e4\u05e9\u05d4"};if("milestone"===e._type)return{icon:"\ud83c\udfc1",label:"\u05d0\u05d1\u05df \u05d3\u05e8\u05da"};const t=(e.title||"").toLowerCase(),n=(e.category||"").toLowerCase(),r="".concat(t," ").concat(n);return r.includes("birthday")||r.includes("\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea")||r.includes("bday")?{icon:"\ud83c\udf82",label:"\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea"}:r.includes("conference")||r.includes("\u05db\u05e0\u05e1")||r.includes("summit")||r.includes("expo")||r.includes("event")?{icon:"\ud83c\udfaa",label:"\u05db\u05e0\u05e1"}:r.includes("flight")||r.includes("\u05d8\u05d9\u05e1\u05d4")||r.includes("trip")||r.includes("\u05d8\u05d9\u05d5\u05dc")||r.includes("vacation")||r.includes("\u05d7\u05d5\u05e4\u05e9\u05d4")?{icon:"\u2708\ufe0f",label:"\u05d8\u05d9\u05d5\u05dc"}:r.includes("school")||r.includes("\u05d1\u05d9\u05ea \u05e1\u05e4\u05e8")||r.includes("holiday")||r.includes("\u05d7\u05d5\u05e4\u05e9")?{icon:"\ud83e\uddd2",label:"\u05d7\u05d5\u05e4\u05e9\u05d4"}:r.includes("olympic")||r.includes("\u05d0\u05d5\u05dc\u05d9\u05de\u05e4\u05d9")||r.includes("game")||r.includes("match")?{icon:"\ud83c\udfc6",label:"\u05e1\u05e4\u05d5\u05e8\u05d8"}:{icon:"\ud83d\udcc5",label:"\u05d0\u05d9\u05e8\u05d5\u05e2"}}const Uu=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),s=(0,r.useCallback)(async()=>{if(Xn()){try{const e=Iu().toISOString().split("T")[0],[n,r,a]=await Promise.all([Yn.from("trips").select("*").gte("end_date",e).order("start_date"),Yn.from("events").select("*").gte("start_time","".concat(e,"T00:00:00Z")).eq("user_id","dan").order("start_time"),Yn.from("goals").select("*").eq("user_id","dan").eq("status","active")]),s=[];(n.data||[]).forEach(e=>{var t,n,r,a;const i=e.start_date||(null===(t=e.metadata)||void 0===t?void 0:t.start_date);if(!i)return;const o=Au(i);if(o<0)return;const l={id:"trip-".concat(e.id),_type:"trip",title:e.title||e.destination||"\u05d8\u05d9\u05d5\u05dc",startDate:i,endDate:e.end_date||(null===(n=e.metadata)||void 0===n?void 0:n.end_date)||i,daysAway:o,metadata:e.metadata||{},prepStatus:(null===(r=e.metadata)||void 0===r?void 0:r.prep_status)||null,prepDays:(null===(a=e.metadata)||void 0===a?void 0:a.prep_days)||14};l.meaning=Mu(l),Object.assign(l,Lu(l)),s.push(l)}),(r.data||[]).forEach(e=>{var t,n;if(!function(e){var t,n;const r=(e.category||"").toLowerCase(),a=(e.title||"").toLowerCase(),s=e.metadata||{};if(!0===s.horizon)return!0;if(!1===s.horizon)return!1;const i=["reminder","\u05ea\u05d6\u05db\u05d5\u05e8\u05ea","todo","\u05de\u05e9\u05d9\u05de\u05d4","meeting","\u05e4\u05d2\u05d9\u05e9\u05d4","call","\u05e9\u05d9\u05d7\u05d4","dentist","\u05e8\u05d5\u05e4\u05d0","doctor","appointment","gym","workout","\u05d0\u05d9\u05de\u05d5\u05df"];for(const u of i)if(a.includes(u)||r.includes(u))return!1;const o=["birthday","\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea","anniversary","\u05d9\u05d5\u05dd \u05e0\u05d9\u05e9\u05d5\u05d0\u05d9\u05df","trip","\u05d8\u05d9\u05d5\u05dc","vacation","\u05d7\u05d5\u05e4\u05e9\u05d4","holiday","\u05d7\u05d2","passover","pesach","sukkot","hanukkah","milestone","launch","deadline"];for(const u of o)if(a.includes(u)||r.includes(u))return!0;const l=null===(t=e.start_time)||void 0===t?void 0:t.split("T")[0],c=null===(n=e.end_time)||void 0===n?void 0:n.split("T")[0];return!(!c||!l||c===l)}(e))return;const r=(e.category||"").toLowerCase(),a=e.metadata||{},i=null===(t=e.start_time)||void 0===t?void 0:t.split("T")[0];if(!i)return;const o=Au(i);if(o<0)return;const l=null===(n=e.end_time)||void 0===n?void 0:n.split("T")[0],c=l&&l!==i,u=r.includes("birthday")||r.includes("\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea")||r.includes("anniversary"),d=r.includes("holiday")||r.includes("\u05d7\u05d5\u05e4\u05e9")||r.includes("school")||r.includes("\u05d7\u05d2");let h="trip";u?h="birthday":d?h="holiday":c||(h="milestone");const f={id:"event-".concat(h,"-").concat(e.id),_type:h,title:e.title,startDate:i,endDate:l||i,daysAway:o,metadata:a,prepStatus:a.prep_status||null,prepDays:a.prep_days||null};f.meaning=Mu(f),Object.assign(f,Lu(f)),s.push(f)}),(a.data||[]).forEach(e=>{var t,n,r,a,i;const o=e.deadline||(null===(t=e.metrics)||void 0===t?void 0:t.deadline)||(null===(n=e.metrics)||void 0===n?void 0:n.event);if(!o)return;let l;try{if(l=new Date(o),isNaN(l.getTime()))return}catch(f){return}const c=l.toISOString().split("T")[0],u=Au(c);if(u<0)return;const d=(null===(r=e.metadata)||void 0===r?void 0:r.confidence)||"unknown",h={id:"goal-".concat(e.id),_type:"milestone",title:e.title,startDate:c,endDate:c,daysAway:u,metadata:e.metadata||{},goalConfidence:d,domain:e.domain,prepDays:(null===(a=e.metadata)||void 0===a?void 0:a.prep_days)||30};h.meaning=(null===(i=e.metadata)||void 0===i?void 0:i.why)||Mu(h),Object.assign(h,Lu(h)),s.push(h)}),s.sort((e,t)=>e.daysAway-t.daysAway),t(s)}catch(Wh){console.error("Horizon fetch error:",Wh)}a(!1)}else a(!1)},[]);(0,r.useEffect)(()=>{s()},[s]);const i=e.filter(e=>{const t=zu(e);return"\u05d8\u05d9\u05d5\u05dc"===t.label||"\u05db\u05e0\u05e1"===t.label}),o=e.filter(e=>{const t=zu(e),n=(e.title||"").toLowerCase();return"\u05d7\u05d5\u05e4\u05e9\u05d4"===t.label||n.includes("heritage")||n.includes("school")||n.includes("half term")||n.includes("break")}),l=e.filter(e=>"\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea"===zu(e).label),c=e.filter(e=>{const t=zu(e),n=(e.title||"").toLowerCase();return"\u05d8\u05d9\u05d5\u05dc"!==t.label&&"\u05db\u05e0\u05e1"!==t.label&&"\u05d9\u05d5\u05dd \u05d4\u05d5\u05dc\u05d3\u05ea"!==t.label&&"\u05d7\u05d5\u05e4\u05e9\u05d4"!==t.label&&!n.includes("heritage")&&!n.includes("school")&&!n.includes("half term")&&!n.includes("break")});if(e.filter(e=>e.daysAway<=7),e.filter(e=>e.daysAway>7&&e.daysAway<=30),e.filter(e=>e.daysAway>30),n)return(0,dr.jsx)("div",{className:"horizon",children:(0,dr.jsxs)("div",{className:"horizon-loading",children:[(0,dr.jsx)("div",{className:"horizon-pulse"}),(0,dr.jsx)("span",{children:"\u05d8\u05d5\u05e2\u05df \u05d0\u05ea \u05d4\u05d0\u05d5\u05e4\u05e7..."})]})});const u=e=>{const t=zu(e),{isInPrepWindow:n,daysUntilPrep:r}=e;return(0,dr.jsxs)("div",{className:"horizon-card ".concat(n?"horizon-card--prep-active":"horizon-card--prep-future"),children:[(0,dr.jsx)("div",{className:"horizon-card-icon",children:t.icon}),(0,dr.jsxs)("div",{className:"horizon-card-content",children:[(0,dr.jsxs)("div",{className:"horizon-card-header",children:[(0,dr.jsx)("span",{className:"horizon-card-title",children:e.title}),(0,dr.jsx)("span",{className:"horizon-card-days ".concat(e.daysAway<=3?"horizon-card-days--soon":""),children:0===e.daysAway?"\u05d4\u05d9\u05d5\u05dd":1===e.daysAway?"\u05de\u05d7\u05e8":"\u05d1\u05e2\u05d5\u05d3 ".concat(e.daysAway," \u05d9\u05de\u05d9\u05dd")})]}),(0,dr.jsx)("span",{className:"horizon-card-date",children:Du(e.startDate,e.endDate)}),e.meaning&&(0,dr.jsxs)("span",{className:"horizon-card-meaning",children:["\ud83d\udcad ",e.meaning]}),(0,dr.jsx)("div",{className:"horizon-card-prep-window ".concat(n?"prep-active":"prep-future"),children:n?(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("span",{className:"prep-indicator prep-indicator--active",children:"\u23f0"}),(0,dr.jsx)("span",{children:"\u05d6\u05de\u05df \u05dc\u05d4\u05ea\u05db\u05d5\u05e0\u05df"}),e.prepStatus&&(0,dr.jsxs)("span",{className:"prep-status",children:["\u2022 ",e.prepStatus]})]}):(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("span",{className:"prep-indicator prep-indicator--future",children:"\ud83d\udcc5"}),(0,dr.jsxs)("span",{children:["\u05d4\u05d4\u05db\u05e0\u05d5\u05ea \u05d1\u05e2\u05d5\u05d3 ",r," \u05d9\u05de\u05d9\u05dd"]})]})}),e.goalConfidence&&(0,dr.jsx)("span",{className:"horizon-card-confidence goal-".concat(e.goalConfidence),title:"on_track"===e.goalConfidence?"\u05d4\u05d4\u05ea\u05e7\u05d3\u05de\u05d5\u05ea \u05dc\u05e4\u05d9 \u05d4\u05ea\u05db\u05e0\u05d5\u05df":"behind"===e.goalConfidence?"\u05d1\u05e4\u05d9\u05d2\u05d5\u05e8 - \u05d3\u05d5\u05e8\u05e9 \u05ea\u05e9\u05d5\u05de\u05ea \u05dc\u05d1":"ahead"===e.goalConfidence?"\u05de\u05e7\u05d3\u05d9\u05dd \u05d0\u05ea \u05d4\u05ea\u05db\u05e0\u05d5\u05df!":"\u05d4\u05e1\u05d8\u05d8\u05d5\u05e1 \u05e2\u05d5\u05d3 \u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2",children:"on_track"===e.goalConfidence?"\u2705 \u05d1\u05de\u05e1\u05dc\u05d5\u05dc":"behind"===e.goalConfidence?"\u26a0\ufe0f \u05d1\u05e4\u05d9\u05d2\u05d5\u05e8":"ahead"===e.goalConfidence?"\ud83d\ude80 \u05de\u05e7\u05d3\u05d9\u05dd":"\u2753 \u05dc\u05d0 \u05e0\u05e7\u05d1\u05e2"})]})]},e.id)},d=(e,t,n)=>0===n.length?null:(0,dr.jsxs)("section",{className:"horizon-section",children:[(0,dr.jsxs)("h2",{className:"horizon-section-title",children:[t," ",e]}),(0,dr.jsx)("div",{className:"horizon-cards",children:n.map(u)})]});return(0,dr.jsx)("div",{className:"horizon",children:(0,dr.jsxs)("div",{className:"horizon-container",children:[(0,dr.jsxs)("header",{className:"horizon-header",children:[(0,dr.jsx)("h1",{children:"\ud83d\udd2d \u05d0\u05d5\u05e4\u05e7"}),(0,dr.jsx)("p",{className:"horizon-sub",children:"\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd \u05d2\u05d3\u05d5\u05dc\u05d9\u05dd \u05d1\u05d0\u05d5\u05e4\u05e7 \u2014 \u05e8\u05e7 \u05de\u05d4 \u05e9\u05d1\u05d0\u05de\u05ea \u05de\u05e9\u05e0\u05d4"})]}),0===e.length?(0,dr.jsxs)("div",{className:"horizon-empty",children:[(0,dr.jsx)("span",{className:"horizon-empty-icon",children:"\ud83c\udf05"}),(0,dr.jsx)("p",{children:"\u05d0\u05d9\u05df \u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd \u05d2\u05d3\u05d5\u05dc\u05d9\u05dd \u05d1\u05d0\u05d5\u05e4\u05e7"}),(0,dr.jsx)("p",{className:"horizon-empty-sub",children:"\u05d4\u05db\u05dc \u05e9\u05e7\u05d8 \u2014 \u05ea\u05d4\u05e0\u05d4 \u05de\u05d4\u05e8\u05d2\u05e2"})]}):(0,dr.jsxs)(dr.Fragment,{children:[d("\u05d8\u05d9\u05e1\u05d5\u05ea \u05d5\u05db\u05e0\u05e1\u05d9\u05dd","\u2708\ufe0f",i),d("\u05d7\u05d5\u05e4\u05e9\u05d5\u05ea \u05d9\u05dc\u05d3\u05d9\u05dd","\ud83e\uddd2",o),d("\u05d9\u05de\u05d9 \u05d4\u05d5\u05dc\u05d3\u05ea","\ud83c\udf82",l),d("\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd","\ud83d\udcc5",c)]}),(0,dr.jsx)("footer",{className:"horizon-footer",children:(0,dr.jsx)("p",{children:"\u05e8\u05e7 \u05d8\u05d9\u05d5\u05dc\u05d9\u05dd, \u05d9\u05de\u05d9 \u05d4\u05d5\u05dc\u05d3\u05ea \u05d5\u05d0\u05d1\u05e0\u05d9 \u05d3\u05e8\u05da \u2022 \u05d1\u05dc\u05d9 \u05ea\u05d6\u05db\u05d5\u05e8\u05d5\u05ea \u05d9\u05d5\u05de\u05d9\u05d5\u05ea"})})]})})};const Fu=function(){const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)("all"),o=(0,r.useCallback)(async()=>{if(Xn())try{let e=Yn.from("tasks").select("*").eq("assignee","pa").eq("archived",!1).order("created_at",{ascending:!1});"pending"===s?e=e.eq("completed",!1):"done"===s&&(e=e.eq("completed",!0));const{data:n,error:r}=await e;if(r)throw r;t(n||[])}catch(Wh){console.error("PA fetch error:",Wh)}finally{a(!1)}else a(!1)},[s]);(0,r.useEffect)(()=>{o()},[o]);const l=e=>{switch(e){case"low":return(0,dr.jsx)("span",{title:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05e0\u05de\u05d5\u05db\u05d4",children:"\ud83c\udf19"});case"medium":return(0,dr.jsx)("span",{title:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9\u05ea",children:"\u2600\ufe0f"});case"high":return(0,dr.jsx)("span",{title:"\u05d0\u05e0\u05e8\u05d2\u05d9\u05d4 \u05d2\u05d1\u05d5\u05d4\u05d4",children:"\u26a1"});default:return"\u2022"}};return n?(0,dr.jsx)("div",{className:"pa-inbox",children:(0,dr.jsx)("div",{className:"pa-loading",children:"\u05d8\u05d5\u05e2\u05df..."})}):(0,dr.jsxs)("div",{className:"pa-inbox",children:[(0,dr.jsxs)("header",{className:"pa-header",children:[(0,dr.jsx)("h1",{children:"\ud83d\udce5 \u05ea\u05d9\u05d1\u05ea PA"}),(0,dr.jsx)("span",{className:"pa-badge",children:(()=>{if("done"===s)return"".concat(e.length," \u05d4\u05d5\u05e9\u05dc\u05de\u05d5");if("pending"===s)return"".concat(e.length," \u05de\u05de\u05ea\u05d9\u05e0\u05d5\u05ea");{const t=e.filter(e=>!e.completed).length;return"".concat(t," \u05de\u05de\u05ea\u05d9\u05e0\u05d5\u05ea")}})()})]}),(0,dr.jsxs)("div",{className:"pa-filters",children:[(0,dr.jsx)("button",{className:"pa-filter ".concat("all"===s?"active":""),onClick:()=>i("all"),children:"\u05d4\u05db\u05dc"}),(0,dr.jsx)("button",{className:"pa-filter ".concat("pending"===s?"active":""),onClick:()=>i("pending"),children:"\u05de\u05de\u05ea\u05d9\u05e0\u05d5\u05ea"}),(0,dr.jsx)("button",{className:"pa-filter ".concat("done"===s?"active":""),onClick:()=>i("done"),children:"\u05d4\u05d5\u05e9\u05dc\u05de\u05d5"})]}),0===e.length?(0,dr.jsx)("div",{className:"pa-empty",children:(0,dr.jsx)("p",{children:"\u05d0\u05d9\u05df \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05d1\u05ea\u05d9\u05d1\u05d4"})}):(0,dr.jsx)("div",{className:"pa-tasks",children:e.map(e=>{var t;return(0,dr.jsxs)("div",{className:"pa-task ".concat(e.completed?"done":""),children:[(0,dr.jsxs)("div",{className:"pa-task-main",children:[(0,dr.jsx)("span",{className:"pa-task-energy",children:l(e.energy_level)}),(0,dr.jsxs)("div",{className:"pa-task-content",children:[(0,dr.jsx)("span",{className:"pa-task-text",children:e.text||e.title}),(null===(t=e.labels)||void 0===t?void 0:t.length)>0&&(0,dr.jsx)("div",{className:"pa-task-labels",children:e.labels.map((e,t)=>(0,dr.jsx)("span",{className:"pa-task-label",children:e},t))})]})]}),!e.completed&&(0,dr.jsx)("button",{className:"pa-task-done",onClick:()=>(async e=>{if(Xn())try{await Yn.from("tasks").update({completed:!0,completed_at:(new Date).toISOString(),closed_by:"pa"}).eq("id",e),o()}catch(Wh){console.error("Mark done error:",Wh)}})(e.id),children:"\u2713 \u05d1\u05d5\u05e6\u05e2"}),e.completed&&(0,dr.jsxs)("span",{className:"pa-task-closed",children:["\u2713 \u05d4\u05d5\u05e9\u05dc\u05dd \u05e2\u05f4\u05d9 ",e.closed_by||"PA"]})]},e.id)})})]})},Bu=(new Date).toISOString().split("T")[0];const qu=function(e){var t;let{onClose:n}=e;const{toast:a}=ur(),[s,i]=(0,r.useState)("loading"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[]),(0,r.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(e.preventDefault(),n())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]);const m=(0,r.useCallback)(async()=>{if(!Xn())return i("auto"),void l({closures:0,highlights:[],health:null,mood:"unknown"});try{var e;const[t,n,r,a]=await Promise.all([Yn.from("tasks").select("*").eq("user_id","dan").eq("completed",!0).gte("completed_at","".concat(Bu,"T00:00:00Z")).lte("completed_at","".concat(Bu,"T23:59:59Z")),Yn.from("events").select("*").eq("user_id","dan").gte("start_time","".concat(Bu,"T00:00:00Z")).lte("start_time","".concat(Bu,"T23:59:59Z")),Yn.from("daily_briefs").select("*").eq("user_id","dan").eq("date",Bu).single(),Yn.from("health_data").select("*").eq("user_id","dan").eq("date",Bu).single()]),s=t.data||[],o=n.data||[],c=r.data,u=a.data;let d=s.length;const h=new Date,f=o.filter(e=>new Date(e.end_time||e.start_time)<h);d+=f.length,"done"===(null===c||void 0===c||null===(e=c.metadata)||void 0===e?void 0:e.morning_anchor)&&(d+=1);const p=[];s.length>0&&p.push("\u2705 ".concat(s.length," \u05de\u05e9\u05d9\u05de\u05d5\u05ea \u05d4\u05d5\u05e9\u05dc\u05de\u05d5")),f.length>0&&p.push("\ud83d\udcc5 ".concat(f.length," \u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd")),(null===u||void 0===u?void 0:u.steps)>5e3&&p.push("\ud83d\udc5f ".concat(u.steps.toLocaleString()," \u05e6\u05e2\u05d3\u05d9\u05dd")),null!==u&&void 0!==u&&u.workout_type&&p.push("\ud83c\udfcb\ufe0f ".concat(u.workout_type));let m="neutral";d>=5&&((null===u||void 0===u?void 0:u.body_battery)>50||!u)?m="productive":d<2&&(null===u||void 0===u?void 0:u.body_battery)<30&&(m="low"),l({closures:d,highlights:p,health:{sleep:null===u||void 0===u?void 0:u.sleep_hours,battery:null===u||void 0===u?void 0:u.body_battery,steps:null===u||void 0===u?void 0:u.steps},mood:m});const{data:v}=await Yn.from("day_close").select("*").eq("user_id","dan").eq("date",Bu).single();i(v?v.state:"auto")}catch(Wh){console.error("Generate summary error:",Wh),i("auto")}},[]);(0,r.useEffect)(()=>{m()},[m]);const v=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Xn()){p(!0);try{const{error:n}=await Yn.from("day_close").upsert({user_id:"dan",date:Bu,state:e,summary:o,tomorrow_note:t,closed_at:(new Date).toISOString()},{onConflict:"user_id,date"});if(n)throw n;i("closed")}catch(Wh){console.error("Save day close error:",Wh),a({title:"\u05e1\u05d2\u05d9\u05e8\u05ea \u05d9\u05d5\u05dd \u05e0\u05db\u05e9\u05dc\u05d4",description:"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05e9\u05de\u05d5\u05e8. \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1.",variant:"destructive"})}finally{p(!1)}}else i("closed")},[o,a]);return(0,r.useEffect)(()=>{if("auto"===s){const e=setTimeout(()=>{v("auto")},3e4);return()=>clearTimeout(e)}},[s,v]),"loading"===s?(0,dr.jsx)("div",{className:"day-close-overlay",children:(0,dr.jsx)("div",{className:"day-close",children:(0,dr.jsxs)("div",{className:"day-close-loading",children:[(0,dr.jsx)("div",{className:"day-close-spinner"}),(0,dr.jsx)("p",{children:"\u05de\u05e1\u05db\u05dd \u05d0\u05ea \u05d4\u05d9\u05d5\u05dd..."})]})})}):"closed"===s?(0,dr.jsx)("div",{className:"day-close-overlay",onClick:n,children:(0,dr.jsxs)("div",{className:"day-close day-close-done",onClick:e=>e.stopPropagation(),children:[(0,dr.jsx)("div",{className:"day-close-check",children:"\u2713"}),(0,dr.jsx)("p",{children:"\u05d4\u05d9\u05d5\u05dd \u05e0\u05e1\u05d2\u05e8. \u05dc\u05d9\u05dc\u05d4 \u05d8\u05d5\u05d1! \ud83c\udf19"})]})}):(0,dr.jsx)("div",{className:"day-close-overlay",onClick:n,children:(0,dr.jsxs)("div",{className:"day-close",onClick:e=>e.stopPropagation(),children:[(0,dr.jsx)("button",{className:"day-close-x-btn",onClick:n,"aria-label":"\u05e1\u05d2\u05d5\u05e8",children:"\u2715"}),(0,dr.jsxs)("header",{className:"day-close-header",children:[(0,dr.jsx)("span",{className:"day-close-emoji",children:(()=>{switch(null===o||void 0===o?void 0:o.mood){case"productive":return"\ud83c\udf1f";case"low":return"\ud83d\ude34";default:return"\ud83c\udf19"}})()}),(0,dr.jsx)("h2",{children:"\u05e1\u05d2\u05d9\u05e8\u05ea \u05d9\u05d5\u05dd"}),(0,dr.jsx)("p",{className:"day-close-date",children:(new Date).toLocaleDateString("he-IL",{weekday:"long",day:"numeric",month:"long"})})]}),(0,dr.jsxs)("section",{className:"day-close-summary",children:[(0,dr.jsxs)("div",{className:"day-close-stat day-close-stat-main",children:[(0,dr.jsx)("span",{className:"day-close-stat-value",children:(null===o||void 0===o?void 0:o.closures)||0}),(0,dr.jsx)("span",{className:"day-close-stat-label",children:"\u05e1\u05d2\u05d9\u05e8\u05d5\u05ea \u05d4\u05d9\u05d5\u05dd"})]}),(null===o||void 0===o||null===(t=o.highlights)||void 0===t?void 0:t.length)>0&&(0,dr.jsx)("div",{className:"day-close-highlights",children:o.highlights.map((e,t)=>(0,dr.jsx)("span",{className:"day-close-highlight",children:e},t))}),(0,dr.jsx)("p",{className:"day-close-mood",children:(()=>{switch(null===o||void 0===o?void 0:o.mood){case"productive":return"\u05d9\u05d5\u05dd \u05e4\u05e8\u05d5\u05d3\u05d5\u05e7\u05d8\u05d9\u05d1\u05d9!";case"low":return"\u05d9\u05d5\u05dd \u05e7\u05e9\u05d4 \u2014 \u05de\u05d7\u05e8 \u05d9\u05d4\u05d9\u05d4 \u05d9\u05d5\u05ea\u05e8 \u05d8\u05d5\u05d1";default:return"\u05d9\u05d5\u05dd \u05e8\u05d2\u05d9\u05dc"}})()})]}),!c&&"auto"===s&&(0,dr.jsxs)("div",{className:"day-close-actions",children:[(0,dr.jsx)("button",{className:"day-close-btn day-close-btn-ack",onClick:()=>{i("partial"),v("partial")},children:"\ud83d\udc4b \u05d4\u05d1\u05e0\u05ea\u05d9"}),(0,dr.jsx)("button",{className:"day-close-btn day-close-btn-review",onClick:()=>{u(!0)},children:"\u270d\ufe0f \u05e1\u05e7\u05d9\u05e8\u05d4"})]}),c&&(0,dr.jsxs)("section",{className:"day-close-tomorrow",children:[(0,dr.jsx)("h3",{children:"\u05de\u05d7\u05e8"}),(0,dr.jsx)("textarea",{className:"day-close-tomorrow-input",placeholder:"\u05d3\u05d1\u05e8 \u05d0\u05d7\u05d3 \u05d7\u05e9\u05d5\u05d1 \u05dc\u05de\u05d7\u05e8...",value:d,onChange:e=>h(e.target.value),rows:3}),(0,dr.jsx)("button",{className:"day-close-btn day-close-btn-confirm",onClick:()=>{v("reviewed",d||null)},disabled:f,children:f?"\u05e9\u05d5\u05de\u05e8...":"\u2705 \u05e1\u05d2\u05d5\u05e8 \u05d9\u05d5\u05dd"})]}),"auto"===s&&!c&&(0,dr.jsx)("p",{className:"day-close-auto-note",children:"\u05d4\u05d9\u05d5\u05dd \u05d9\u05d9\u05e1\u05d2\u05e8 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05d1\u05e2\u05d5\u05d3 \u05db\u05de\u05d4 \u05e9\u05e0\u05d9\u05d5\u05ea..."})]})})},Wu=[{id:"work",label:"XBO",icon:"\ud83d\udcbc"},{id:"salon",label:"La Luce",icon:"\ud83c\udfe0"},{id:"realestate",label:"DSP",icon:"\ud83c\udfe2"},{id:"tlm",label:"TLM",icon:"\ud83d\udcb0"},{id:"personal",label:"\u05d3\u05df",icon:"\ud83d\udc64"},{id:"family",label:"\u05de\u05e9\u05e4\u05d7\u05d4",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{id:"sport",label:"\u05e1\u05e4\u05d5\u05e8\u05d8",icon:"\ud83c\udfc3"}];const Ku=function(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&c.current&&setTimeout(()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus()},100)},[e]),(0,r.useEffect)(()=>{const n=n=>{(n.metaKey||n.ctrlKey)&&"k"===n.key&&(n.preventDefault(),t(!0)),"Escape"===n.key&&e&&u()};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e]);const u=()=>{t(!1),a(""),i(null)};return(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("button",{className:"quick-add-fab",onClick:()=>t(!0),"aria-label":"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e9\u05d9\u05de\u05d4",children:(0,dr.jsx)("span",{className:"quick-add-fab-icon",children:"+"})}),e&&(0,dr.jsx)("div",{className:"quick-add-overlay",onClick:u,children:(0,dr.jsx)("div",{className:"quick-add-modal",onClick:e=>e.stopPropagation(),children:(0,dr.jsxs)("form",{onSubmit:async e=>{if(null===e||void 0===e||e.preventDefault(),n.trim()){l(!0);try{if(Xn()){const{error:e}=await Yn.from("tasks").insert({id:"task-"+Date.now(),user_id:"dan",text:n.trim(),area:s,labels:[],energy_level:"medium",assignee:"dan",completed:!1,archived:!1,created_at:(new Date).toISOString()});if(e)throw e}cr({title:"\u2713 \u05e0\u05d5\u05e1\u05e3",description:n.slice(0,30)+(n.length>30?"...":"")}),u()}catch(Wh){console.error("Quick add error:",Wh),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:"\u05dc\u05d0 \u05d4\u05e6\u05dc\u05d7\u05ea\u05d9 \u05dc\u05d4\u05d5\u05e1\u05d9\u05e3",variant:"destructive"})}finally{l(!1)}}else{var t;null===(t=c.current)||void 0===t||t.focus()}},children:[(0,dr.jsx)("input",{ref:c,type:"text",className:"quick-add-input",placeholder:"\u05de\u05d4 \u05e6\u05e8\u05d9\u05da \u05dc\u05e2\u05e9\u05d5\u05ea?",value:n,onChange:e=>a(e.target.value),disabled:o,autoComplete:"off"}),(0,dr.jsx)("div",{className:"quick-add-contexts",children:Wu.map(e=>(0,dr.jsxs)("button",{type:"button",className:"quick-add-context ".concat(s===e.id?"active":""),onClick:()=>i(s===e.id?null:e.id),children:[(0,dr.jsx)("span",{children:e.icon}),(0,dr.jsx)("span",{children:e.label})]},e.id))}),(0,dr.jsxs)("div",{className:"quick-add-actions",children:[(0,dr.jsx)("span",{className:"quick-add-hint",children:"\u2318K \u05dc\u05e4\u05ea\u05d9\u05d7\u05d4 \u05de\u05d4\u05d9\u05e8\u05d4"}),(0,dr.jsxs)("div",{className:"quick-add-buttons",children:[(0,dr.jsx)("button",{type:"button",className:"quick-add-cancel",onClick:u,disabled:o,children:"\u05d1\u05d9\u05d8\u05d5\u05dc"}),(0,dr.jsx)("button",{type:"submit",className:"quick-add-submit",disabled:o||!n.trim(),children:o?"...":"\u05d4\u05d5\u05e1\u05e3"})]})]})]})})})]})},Vu=[{id:"1",title:"Review design mockups",description:"Check the new Linear-style components",status:"in-progress",priority:"high"},{id:"2",title:"Implement modal focus trap",description:"Ensure Tab key stays inside modal",status:"done"},{id:"3",title:"Add keyboard shortcuts",description:"Escape to close, Cmd+Enter to save",status:"todo"},{id:"4",title:"Test on mobile devices",description:"Touch interactions and responsive layout",status:"waiting"}],Hu=[{id:"item-1",name:"Design System",description:"Core component library"},{id:"item-2",name:"API Integration",description:"Backend connection layer"},{id:"item-3",name:"Authentication",description:"User login and sessions"},{id:"item-4",name:"Dashboard",description:"Main overview screen"},{id:"item-5",name:"Settings Page",description:"User preferences"},{id:"item-6",name:"Notifications",description:"Real-time alerts system"}];function Ju(e){let{items:t}=e;const[n,a]=(0,r.useState)({});return(0,dr.jsxs)("div",{className:"bg-muted/30 rounded-lg p-4 mt-4",children:[(0,dr.jsx)("h4",{className:"text-sm font-medium mb-3 text-muted-foreground",children:"Quality Checks"}),(0,dr.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,dr.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,dr.jsx)(ko,{checked:n[t]||!1,onCheckedChange:e=>a(u(u({},n),{},{[t]:e}))}),(0,dr.jsx)("span",{className:n[t]?"line-through text-muted-foreground":"",children:e})]},t))})]})}function Gu(e){let{title:t,description:n,children:r}=e;return(0,dr.jsxs)("section",{className:"mb-12",children:[(0,dr.jsxs)("div",{className:"mb-4",children:[(0,dr.jsx)("h2",{className:"text-xl font-semibold",children:t}),n&&(0,dr.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:n})]}),r]})}function $u(){const[e,t]=(0,r.useState)(Vu),[n,a]=(0,r.useState)(""),[s,i]=(0,r.useState)(null),o=async(e,n)=>{i("saving"),await new Promise(e=>setTimeout(e,500)),t(t=>t.map(t=>t.id===e?u(u({},t),n):t)),i("saved"),setTimeout(()=>i(null),1500)},l=async(e,n)=>{await new Promise(e=>setTimeout(e,300)),t(t=>t.map(t=>t.id===e?u(u({},t),{},{status:n}):t))},c=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,dr.jsxs)(Gu,{title:"1. TaskCard",description:"Linear-style task cards with inline editing, optimistic updates, and keyboard navigation",children:[s&&(0,dr.jsxs)("div",{className:"mb-4 text-sm",children:["saving"===s&&(0,dr.jsxs)("span",{className:"text-amber-500 flex items-center gap-2",children:[(0,dr.jsx)("span",{className:"h-3 w-3 animate-spin rounded-full border-2 border-amber-500 border-t-transparent"}),"Saving..."]}),"saved"===s&&(0,dr.jsx)("span",{className:"text-green-500",children:"\u2713 Saved"})]}),(0,dr.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim())return;const r={id:"new-".concat(Date.now()),title:n.trim(),description:"",status:"todo"};t(e=>[r,...e]),a("")},className:"mb-4",children:(0,dr.jsxs)("div",{className:"flex gap-2",children:[(0,dr.jsx)(yi,{value:n,onChange:e=>a(e.target.value),placeholder:"Add a new task... (press Enter)",className:"flex-1"}),(0,dr.jsx)(vi,{type:"submit",disabled:!n.trim(),children:"Add"})]})}),(0,dr.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,dr.jsx)(fu,{task:e,onUpdate:o,onStatusChange:l,onDelete:c},e.id))}),(0,dr.jsxs)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg text-sm",children:[(0,dr.jsx)("strong",{children:"Test Cases:"}),(0,dr.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-muted-foreground",children:[(0,dr.jsx)("li",{children:"Click card \u2192 opens detail dialog"}),(0,dr.jsx)("li",{children:"Click checkbox \u2192 toggles done/todo (without opening dialog)"}),(0,dr.jsx)("li",{children:"In dialog: click title/description to edit"}),(0,dr.jsx)("li",{children:"Escape to cancel editing or close dialog"}),(0,dr.jsx)("li",{children:"Cmd/Ctrl+Enter to save while editing"}),(0,dr.jsx)("li",{children:"Try selecting text in the card (should work)"}),(0,dr.jsx)("li",{children:"Tab through elements for keyboard navigation"})]})]}),(0,dr.jsx)(Ju,{items:["Text editing feels native (select/cut/copy/paste/undo/redo)","Keyboard navigation works (Tab, Enter, Escape)","Save/persist is clear (Saving... \u2192 Saved feedback)","No dead clicks (every interactive element responds)","Works on mobile (touch interactions)"]})]})}function Yu(){const e=gu(),t=gu(),n=gu(),[a,s]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null);return(0,dr.jsxs)(Gu,{title:"2. Modal",description:"Dialog system with focus trap, keyboard shortcuts, and animation",children:[(0,dr.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,dr.jsx)(vi,{onClick:e.open,children:"Open Basic Modal"}),(0,dr.jsx)(vi,{variant:"secondary",onClick:t.open,children:"Open Confirm Modal"}),(0,dr.jsx)(vi,{variant:"outline",onClick:n.open,children:"Open Alert Modal"})]}),i&&(0,dr.jsxs)("div",{className:"mt-4 text-green-500 text-sm",children:["\u2713 ",i]}),(0,dr.jsx)(pu,{open:e.isOpen,onOpenChange:e.setIsOpen,title:"Basic Modal",description:"This is a basic modal with custom content",footer:(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)(vi,{variant:"ghost",onClick:e.close,children:"Cancel"}),(0,dr.jsx)(vi,{onClick:e.close,children:"Done"})]}),children:(0,dr.jsxs)("div",{className:"space-y-4",children:[(0,dr.jsx)("p",{children:"Try these interactions:"}),(0,dr.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,dr.jsx)("li",{children:"Press Tab \u2014 focus should stay inside modal"}),(0,dr.jsx)("li",{children:"Press Escape \u2014 modal should close"}),(0,dr.jsx)("li",{children:"Click outside (on overlay) \u2014 modal should close"}),(0,dr.jsx)("li",{children:"Scroll the page \u2014 body should NOT scroll"})]}),(0,dr.jsx)(yi,{placeholder:"Focus trap test - Tab here"}),(0,dr.jsx)(yi,{placeholder:"Then Tab here"}),(0,dr.jsx)(vi,{variant:"outline",className:"w-full",children:"And Tab here (should loop back)"})]})}),(0,dr.jsx)(mu,{open:t.isOpen,onOpenChange:t.setIsOpen,title:"Confirm Action",description:"Are you sure you want to proceed? This action demonstrates the confirm modal pattern.",confirmLabel:"Yes, Proceed",cancelLabel:"Cancel",onConfirm:async()=>{s(!0),await new Promise(e=>setTimeout(e,1e3)),s(!1),o("Action confirmed!"),setTimeout(()=>o(null),2e3)},loading:a}),(0,dr.jsx)(vu,{open:n.isOpen,onOpenChange:n.setIsOpen,title:"Alert!",description:"This is an alert modal. It only has a single action button to dismiss.",actionLabel:"Got it"}),(0,dr.jsxs)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg text-sm",children:[(0,dr.jsx)("strong",{children:"Test Cases:"}),(0,dr.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-muted-foreground",children:[(0,dr.jsx)("li",{children:"Focus trap \u2014 Tab key stays inside modal"}),(0,dr.jsx)("li",{children:"Escape key closes modal"}),(0,dr.jsx)("li",{children:"Click outside (overlay) closes modal"}),(0,dr.jsx)("li",{children:"Body scroll is locked when modal is open"}),(0,dr.jsx)("li",{children:"Smooth open/close animation"}),(0,dr.jsx)("li",{children:"Confirm modal shows loading state"})]})]}),(0,dr.jsx)(Ju,{items:["Focus trap works (Tab stays inside)","Escape closes modal","Click outside closes modal","No body scroll when open","Smooth animation"]})]})}function Xu(){const[e,t]=(0,r.useState)(Hu),{selectedIds:n,select:a,clearSelection:s,isSelected:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,n]=r.useState(new Set),a=r.useCallback((e,t)=>{n(n=>{const r=new Set(n);return t?r.add(e):r.delete(e),r})},[]),s=r.useCallback(()=>{n(new Set(e.map(e=>e.id)))},[e]),i=r.useCallback(()=>{n(new Set)},[]),o=r.useCallback(e=>{n(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),l=r.useCallback(e=>t.has(e),[t]);return{selectedIds:Array.from(t),select:a,selectAll:s,clearSelection:i,toggleSelection:o,isSelected:l,hasSelection:t.size>0,allSelected:e.length>0&&t.size===e.length}}(e),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),d=e=>{u("Edit: ".concat(e)),setTimeout(()=>u(null),1500)},h=e=>{t(t=>t.filter(t=>t.id!==e)),u("Deleted: ".concat(e)),setTimeout(()=>u(null),1500)},f=e=>{u("Row clicked: ".concat(e)),setTimeout(()=>u(null),1500)};return(0,dr.jsxs)(Gu,{title:"3. ListRow",description:"List items with selection, hover actions, and bulk operations",children:[(0,dr.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,dr.jsx)(vi,{variant:"outline",size:"sm",onClick:()=>l(!o),children:o?"Show Items":"Show Empty State"}),(0,dr.jsx)(vi,{variant:"outline",size:"sm",onClick:()=>t(Hu),children:"Reset Items"})]}),c&&(0,dr.jsxs)("div",{className:"mb-4 text-sm text-amber-500",children:["\u2192 ",c]}),(0,dr.jsx)(xu,{selectedIds:n,onClearSelection:s,emptyState:"No items to display. Add some items to get started.",bulkActions:(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsxs)(vi,{variant:"ghost",size:"sm",children:["Archive (",n.length,")"]}),(0,dr.jsxs)(vi,{variant:"destructive",size:"sm",onClick:()=>{t(e=>e.filter(e=>!n.includes(e.id))),s(),u("Bulk deleted ".concat(n.length," items")),setTimeout(()=>u(null),1500)},children:["Delete (",n.length,")"]})]}),children:o?null:e.map(e=>(0,dr.jsx)(wu,{id:e.id,selected:i(e.id),onSelect:a,onEdit:d,onDelete:h,onClick:f,children:(0,dr.jsxs)("div",{children:[(0,dr.jsx)("div",{className:"font-medium",children:e.name}),(0,dr.jsx)("div",{className:"text-sm text-muted-foreground",children:e.description})]})},e.id))}),(0,dr.jsxs)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg text-sm",children:[(0,dr.jsx)("strong",{children:"Test Cases:"}),(0,dr.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1 text-muted-foreground",children:[(0,dr.jsx)("li",{children:"Hover over row \u2192 edit/delete buttons appear"}),(0,dr.jsx)("li",{children:"Click checkbox \u2192 selects row (bulk actions bar appears)"}),(0,dr.jsx)("li",{children:'Click row body \u2192 triggers "row clicked" action'}),(0,dr.jsx)("li",{children:"Select multiple \u2192 bulk action bar shows count"}),(0,dr.jsx)("li",{children:"Toggle empty state to see empty placeholder"}),(0,dr.jsx)("li",{children:"Delete items to test removal"})]})]}),(0,dr.jsx)(Ju,{items:["Hover shows actions (edit/delete buttons)","Checkbox selection works","Bulk actions bar appears on selection","Click row vs click checkbox (different behavior)","Empty state displays correctly"]})]})}function Qu(){const[e,t]=(0,r.useState)(""),[n,a]=(0,r.useState)("");return(0,dr.jsxs)(Gu,{title:"4. Primitives",description:"Core UI components: Button, Input, Textarea, Badge, Checkbox",children:[(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Buttons"}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,dr.jsx)(vi,{variant:"default",children:"Primary"}),(0,dr.jsx)(vi,{variant:"secondary",children:"Secondary"}),(0,dr.jsx)(vi,{variant:"ghost",children:"Ghost"}),(0,dr.jsx)(vi,{variant:"destructive",children:"Destructive"}),(0,dr.jsx)(vi,{variant:"outline",children:"Outline"}),(0,dr.jsx)(vi,{variant:"link",children:"Link"})]}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-3 mt-3",children:[(0,dr.jsx)(vi,{size:"sm",children:"Small"}),(0,dr.jsx)(vi,{size:"default",children:"Default"}),(0,dr.jsx)(vi,{size:"lg",children:"Large"}),(0,dr.jsx)(vi,{disabled:!0,children:"Disabled"})]}),(0,dr.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Tab through buttons to see focus rings"})]}),(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Input"}),(0,dr.jsxs)("div",{className:"max-w-md space-y-3",children:[(0,dr.jsx)(yi,{placeholder:"Default input...",value:e,onChange:e=>t(e.target.value)}),(0,dr.jsx)(yi,{placeholder:"Disabled input",disabled:!0}),(0,dr.jsxs)("p",{className:"text-xs text-muted-foreground",children:['Focus to see ring \u2022 Value: "',e,'"']})]})]}),(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Textarea (Auto-resize)"}),(0,dr.jsxs)("div",{className:"max-w-md",children:[(0,dr.jsx)(wi,{placeholder:"Type here and watch it grow...",autoResize:!0,value:n,onChange:e=>a(e.target.value)}),(0,dr.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Type multiple lines to see auto-resize"})]})]}),(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Badges (Status Variants)"}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,dr.jsx)(_i,{variant:"default",children:"Default"}),(0,dr.jsx)(_i,{variant:"secondary",children:"Secondary"}),(0,dr.jsx)(_i,{variant:"destructive",children:"Destructive"}),(0,dr.jsx)(_i,{variant:"outline",children:"Outline"})]}),(0,dr.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,dr.jsx)(_i,{variant:"done",children:"Done"}),(0,dr.jsx)(_i,{variant:"in-progress",children:"In Progress"}),(0,dr.jsx)(_i,{variant:"waiting",children:"Waiting"}),(0,dr.jsx)(_i,{variant:"todo",children:"To Do"})]})]}),(0,dr.jsxs)("div",{className:"mb-8",children:[(0,dr.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Checkbox"}),(0,dr.jsxs)("div",{className:"space-y-3",children:[(0,dr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,dr.jsx)(ko,{}),(0,dr.jsx)("span",{children:"Unchecked checkbox"})]}),(0,dr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,dr.jsx)(ko,{defaultChecked:!0}),(0,dr.jsx)("span",{children:"Default checked"})]}),(0,dr.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer opacity-50",children:[(0,dr.jsx)(ko,{disabled:!0}),(0,dr.jsx)("span",{children:"Disabled checkbox"})]})]})]}),(0,dr.jsx)(Ju,{items:["All buttons show visible focus states (Tab to test)","Input focus ring is visible and consistent","Textarea auto-resizes when typing","Badge colors are distinct and readable","Checkbox has clear checked/unchecked states"]})]})}function Zu(){return(0,dr.jsx)("div",{className:"min-h-screen bg-background text-foreground",style:{background:"radial-gradient(ellipse at top, rgba(245, 158, 11, 0.04) 0%, transparent 50%), var(--background)"},children:(0,dr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,dr.jsxs)("header",{className:"mb-12 text-center",children:[(0,dr.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-3",children:[(0,dr.jsx)("span",{className:"text-3xl",children:"\u2728"}),(0,dr.jsx)("h1",{className:"text-3xl font-bold",style:{background:"linear-gradient(135deg, var(--foreground) 0%, #f59e0b 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Golden Components"})]}),(0,dr.jsx)("p",{className:"text-muted-foreground max-w-xl mx-auto",children:"Premium UI components with Linear-style design. Test everything here before migration."}),(0,dr.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[(0,dr.jsx)(_i,{variant:"in-progress",children:"Testing Phase"}),(0,dr.jsx)(_i,{variant:"outline",children:"v1.0"})]})]}),(0,dr.jsx)($u,{}),(0,dr.jsx)(Yu,{}),(0,dr.jsx)(Xu,{}),(0,dr.jsx)(Qu,{}),(0,dr.jsxs)("section",{className:"mt-16 p-6 bg-muted/30 rounded-lg",children:[(0,dr.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\ud83d\udccb Overall Quality Summary"}),(0,dr.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h3",{className:"font-medium mb-2",children:"Must Pass"}),(0,dr.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,dr.jsx)("li",{children:"\u2610 All text editing feels native"}),(0,dr.jsx)("li",{children:"\u2610 Keyboard navigation works throughout"}),(0,dr.jsx)("li",{children:"\u2610 Save/persist feedback is clear"}),(0,dr.jsx)("li",{children:"\u2610 No dead clicks anywhere"}),(0,dr.jsx)("li",{children:"\u2610 Works on mobile (test on device)"})]})]}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h3",{className:"font-medium mb-2",children:"Component Status"}),(0,dr.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,dr.jsx)("li",{children:"\u2610 TaskCard \u2014 all tests pass"}),(0,dr.jsx)("li",{children:"\u2610 Modal \u2014 all tests pass"}),(0,dr.jsx)("li",{children:"\u2610 ListRow \u2014 all tests pass"}),(0,dr.jsx)("li",{children:"\u2610 Primitives \u2014 all tests pass"})]})]})]})]}),(0,dr.jsxs)("footer",{className:"mt-12 pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[(0,dr.jsx)("p",{children:"Golden Components Demo \u2022 Personal Command Center"}),(0,dr.jsxs)("p",{className:"mt-1",children:[(0,dr.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"Escape"})," to close modals \u2022"," ",(0,dr.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"Tab"})," for navigation \u2022"," ",(0,dr.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded text-xs",children:"Cmd+Enter"})," to save"]})]})]})})}const ed=(0,r.createContext)({});function td(){return(0,r.useContext)(ed)}function nd(e){let{children:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!Xn())return void i(!1);Yn.auth.getSession().then(e=>{var t;let{data:{session:n}}=e;a(null!==(t=null===n||void 0===n?void 0:n.user)&&void 0!==t?t:null),i(!1)});const{data:{subscription:e}}=Yn.auth.onAuthStateChange((e,t)=>{var n;a(null!==(n=null===t||void 0===t?void 0:t.user)&&void 0!==n?n:null),i(!1)});return()=>e.unsubscribe()},[]);const o={user:n,loading:s,signUp:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{data:r,error:a}=await Yn.auth.signUp({email:e,password:t,options:{data:n}});return{data:r,error:a}},signIn:async(e,t)=>{const{data:n,error:r}=await Yn.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},signOut:async()=>{const{error:e}=await Yn.auth.signOut();return{error:e}},resetPassword:async e=>{const{data:t,error:n}=await Yn.auth.resetPasswordForEmail(e,{redirectTo:window.location.origin+"/reset-password"});return{data:t,error:n}},updatePassword:async e=>{const{data:t,error:n}=await Yn.auth.updateUser({password:e});return{data:t,error:n}},isAuthenticated:!!n};return(0,dr.jsx)(ed.Provider,{value:o,children:t})}const rd=function(e){let{onSuccess:t}=e;const[n,a]=(0,r.useState)("signin"),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),{signIn:m,signUp:v,resetPassword:g}=td();return(0,dr.jsx)("div",{className:"auth-page",children:(0,dr.jsxs)("div",{className:"auth-container",children:[(0,dr.jsxs)("div",{className:"auth-header",children:[(0,dr.jsx)("h1",{className:"auth-logo",children:"Life OS"}),(0,dr.jsx)("p",{className:"auth-tagline",children:"\u05de\u05e2\u05e8\u05db\u05ea \u05d4\u05d4\u05e4\u05e2\u05dc\u05d4 \u05dc\u05d7\u05d9\u05d9\u05dd \u05e9\u05dc\u05da"})]}),(0,dr.jsxs)("div",{className:"auth-social",children:[(0,dr.jsxs)("button",{type:"button",className:"auth-social-btn auth-google",onClick:async()=>{if(Xn()){p("google");try{const{error:e}=await Yn.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin,scopes:"https://www.googleapis.com/auth/calendar.readonly"}});if(e)throw e}catch(e){console.error("Google login error:",e),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:e.message,variant:"destructive"}),p(null)}}else cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:"Supabase \u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8",variant:"destructive"})},disabled:null!==f,children:[(0,dr.jsxs)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[(0,dr.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,dr.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,dr.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,dr.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"google"===f?"\u05de\u05ea\u05d7\u05d1\u05e8...":"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05e2\u05dd Google"]}),(0,dr.jsxs)("button",{type:"button",className:"auth-social-btn auth-microsoft",onClick:async()=>{if(Xn()){p("microsoft");try{const{error:e}=await Yn.auth.signInWithOAuth({provider:"azure",options:{redirectTo:window.location.origin,scopes:"Calendars.Read"}});if(e)throw e}catch(e){console.error("Microsoft login error:",e),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:e.message,variant:"destructive"}),p(null)}}else cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:"Supabase \u05dc\u05d0 \u05de\u05d5\u05d2\u05d3\u05e8",variant:"destructive"})},disabled:null!==f,children:[(0,dr.jsxs)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[(0,dr.jsx)("path",{fill:"#F25022",d:"M1 1h10v10H1z"}),(0,dr.jsx)("path",{fill:"#00A4EF",d:"M1 13h10v10H1z"}),(0,dr.jsx)("path",{fill:"#7FBA00",d:"M13 1h10v10H13z"}),(0,dr.jsx)("path",{fill:"#FFB900",d:"M13 13h10v10H13z"})]}),"microsoft"===f?"\u05de\u05ea\u05d7\u05d1\u05e8...":"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05e2\u05dd Microsoft"]})]}),(0,dr.jsx)("div",{className:"auth-divider",children:(0,dr.jsx)("span",{children:"\u05d0\u05d5"})}),(0,dr.jsxs)("form",{className:"auth-form",onSubmit:async e=>{e.preventDefault(),h(!0);try{if("signin"===n){const{error:e}=await m(s,o);if(e)throw e;cr({title:"!\u05d1\u05e8\u05d5\u05da \u05d4\u05d1\u05d0",description:"\u05d4\u05ea\u05d7\u05d1\u05e8\u05ea \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"}),null===t||void 0===t||t()}else if("signup"===n){const{error:e}=await v(s,o,{name:c});if(e)throw e;cr({title:"\u05e0\u05e8\u05e9\u05de\u05ea \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!",description:"\u05d1\u05d3\u05d5\u05e7 \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05dc\u05d0\u05d9\u05de\u05d5\u05ea \u05d4\u05d7\u05e9\u05d1\u05d5\u05df"}),a("signin")}else if("reset"===n){const{error:e}=await g(s);if(e)throw e;cr({title:"\u05e0\u05e9\u05dc\u05d7!",description:"\u05d1\u05d3\u05d5\u05e7 \u05d0\u05ea \u05d4\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05dc\u05d0\u05d9\u05e4\u05d5\u05e1 \u05d4\u05e1\u05d9\u05e1\u05de\u05d4"}),a("signin")}}catch(r){console.error("Auth error:",r),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:r.message||"\u05de\u05e9\u05d4\u05d5 \u05d4\u05e9\u05ea\u05d1\u05e9, \u05e0\u05e1\u05d4 \u05e9\u05d5\u05d1",variant:"destructive"})}finally{h(!1)}},children:["signup"===n&&(0,dr.jsxs)("div",{className:"auth-field",children:[(0,dr.jsx)("label",{htmlFor:"name",children:"\u05e9\u05dd"}),(0,dr.jsx)("input",{id:"name",type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"\u05d0\u05d9\u05da \u05dc\u05e7\u05e8\u05d5\u05d0 \u05dc\u05da?",required:"signup"===n,disabled:d})]}),(0,dr.jsxs)("div",{className:"auth-field",children:[(0,dr.jsx)("label",{htmlFor:"email",children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),(0,dr.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>i(e.target.value),placeholder:"you@example.com",required:!0,disabled:d,autoComplete:"email"})]}),"reset"!==n&&(0,dr.jsxs)("div",{className:"auth-field",children:[(0,dr.jsx)("label",{htmlFor:"password",children:"\u05e1\u05d9\u05e1\u05de\u05d4"}),(0,dr.jsx)("input",{id:"password",type:"password",value:o,onChange:e=>l(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:"reset"!==n,disabled:d,autoComplete:"signin"===n?"current-password":"new-password",minLength:6})]}),(0,dr.jsx)("button",{type:"submit",className:"auth-submit",disabled:d,children:d?"...":"signin"===n?"\u05d4\u05ea\u05d7\u05d1\u05e8":"signup"===n?"\u05e6\u05d5\u05e8 \u05d7\u05e9\u05d1\u05d5\u05df":"\u05e9\u05dc\u05d7 \u05e7\u05d9\u05e9\u05d5\u05e8 \u05d0\u05d9\u05e4\u05d5\u05e1"})]}),(0,dr.jsxs)("div",{className:"auth-switch",children:["signin"===n&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("button",{type:"button",className:"auth-link",onClick:()=>a("signup"),children:"\u05d0\u05d9\u05df \u05dc\u05da \u05d7\u05e9\u05d1\u05d5\u05df? \u05d4\u05d9\u05e8\u05e9\u05dd"}),(0,dr.jsx)("button",{type:"button",className:"auth-link",onClick:()=>a("reset"),children:"\u05e9\u05db\u05d7\u05ea \u05e1\u05d9\u05e1\u05de\u05d4?"})]}),"signup"===n&&(0,dr.jsx)("button",{type:"button",className:"auth-link",onClick:()=>a("signin"),children:"\u05d9\u05e9 \u05dc\u05da \u05d7\u05e9\u05d1\u05d5\u05df? \u05d4\u05ea\u05d7\u05d1\u05e8"}),"reset"===n&&(0,dr.jsx)("button",{type:"button",className:"auth-link",onClick:()=>a("signin"),children:"\u05d7\u05d6\u05d5\u05e8 \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea"})]})]})})},ad={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://frbdzhddqbkuzwaqwvwi.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyYmR6aGRkcWJrdXp3YXF3dndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MTYxNzEsImV4cCI6MjA4NTA5MjE3MX0.yLOrB38FQ3F_6r7wpVq2z8aVdOjSFuea9nyqP6xzkKE"}.REACT_APP_GOOGLE_CLIENT_ID,sd={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://frbdzhddqbkuzwaqwvwi.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyYmR6aGRkcWJrdXp3YXF3dndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MTYxNzEsImV4cCI6MjA4NTA5MjE3MX0.yLOrB38FQ3F_6r7wpVq2z8aVdOjSFuea9nyqP6xzkKE"}.REACT_APP_MICROSOFT_CLIENT_ID,id=!!ad,od=!!sd;const ld=function(e){var t,n,a,s,i,o;let{onClose:l}=e;const{user:c,signOut:d}=td(),[h,f]=(0,r.useState)({google:!1,microsoft:!1}),[p,m]=(0,r.useState)(!0),[v,g]=(0,r.useState)({google:null,microsoft:null});(0,r.useEffect)(()=>{y()},[]);const y=async()=>{if(Xn()&&c){try{const{data:e}=await Yn.from("user_connections").select("provider, last_sync, sync_status").eq("user_id",c.id);if(e){f({google:e.some(e=>"google"===e.provider),microsoft:e.some(e=>"microsoft"===e.provider)});const t=e.find(e=>"google"===e.provider),n=e.find(e=>"microsoft"===e.provider);g({google:t?{lastSync:t.last_sync,status:t.sync_status}:null,microsoft:n?{lastSync:n.last_sync,status:n.sync_status}:null})}}catch(Wh){console.error("Error checking connections:",Wh)}m(!1)}else m(!1)},b=async e=>{if(Xn()&&c)try{const{error:t}=await Yn.from("user_connections").delete().eq("user_id",c.id).eq("provider",e);if(t)throw t;f(t=>u(u({},t),{},{[e]:!1})),g(t=>u(u({},t),{},{[e]:null})),cr({title:"\u2713 \u05e0\u05d5\u05ea\u05e7",description:"\u05d4\u05d7\u05e9\u05d1\u05d5\u05df ".concat("google"===e?"Google":"Microsoft"," \u05e0\u05d5\u05ea\u05e7 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4")})}catch(Wh){console.error("Disconnect error:",Wh),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:"\u05dc\u05d0 \u05d4\u05e6\u05dc\u05d7\u05ea\u05d9 \u05dc\u05e0\u05ea\u05e7",variant:"destructive"})}},w=e=>{if(!e)return null;const t=new Date(e),n=new Date,r=Math.floor((n-t)/6e4);return r<1?"\u05d4\u05e8\u05d2\u05e2":r<60?"\u05dc\u05e4\u05e0\u05d9 ".concat(r," \u05d3\u05e7\u05d5\u05ea"):r<1440?"\u05dc\u05e4\u05e0\u05d9 ".concat(Math.floor(r/60)," \u05e9\u05e2\u05d5\u05ea"):"\u05dc\u05e4\u05e0\u05d9 ".concat(Math.floor(r/1440)," \u05d9\u05de\u05d9\u05dd")};return(0,dr.jsx)("div",{className:"settings-overlay",onClick:l,children:(0,dr.jsxs)("div",{className:"settings-modal",onClick:e=>e.stopPropagation(),children:[(0,dr.jsxs)("header",{className:"settings-header",children:[(0,dr.jsxs)("div",{className:"settings-header-content",children:[(0,dr.jsx)("h2",{children:"\u2699\ufe0f \u05d4\u05d2\u05d3\u05e8\u05d5\u05ea"}),(0,dr.jsx)("span",{className:"settings-header-sub",children:"\u05d4\u05ea\u05d0\u05de\u05d4 \u05d0\u05d9\u05e9\u05d9\u05ea \u05d5\u05d7\u05d9\u05d1\u05d5\u05e8\u05d9\u05dd"})]}),(0,dr.jsx)("button",{className:"settings-close",onClick:l,children:"\u2715"})]}),(0,dr.jsxs)("div",{className:"settings-content",children:[(0,dr.jsxs)("section",{className:"settings-section",children:[(0,dr.jsxs)("div",{className:"settings-section-header",children:[(0,dr.jsx)("h3",{children:"\ud83d\udcc5 \u05dc\u05d5\u05d7\u05d5\u05ea \u05e9\u05e0\u05d4"}),(0,dr.jsx)("span",{className:"settings-section-badge",children:"\u05e1\u05e0\u05db\u05e8\u05d5\u05df \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9"})]}),(0,dr.jsx)("p",{className:"settings-desc",children:"\u05d7\u05d1\u05e8 \u05d0\u05ea \u05dc\u05d5\u05d7 \u05d4\u05e9\u05e0\u05d4 \u05e9\u05dc\u05da \u05d5\u05db\u05dc \u05d4\u05d0\u05d9\u05e8\u05d5\u05e2\u05d9\u05dd \u05d9\u05e1\u05d5\u05e0\u05db\u05e8\u05e0\u05d5 \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea \u05dc-Life OS"}),(0,dr.jsxs)("div",{className:"settings-integrations",children:[(0,dr.jsxs)("div",{className:"settings-integration ".concat(h.google?"settings-integration-connected":""," ").concat(id||h.google?"":"settings-integration-pending"),children:[(0,dr.jsxs)("div",{className:"settings-integration-info",children:[(0,dr.jsx)("span",{className:"settings-integration-icon",children:(0,dr.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,dr.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,dr.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,dr.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,dr.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),(0,dr.jsxs)("div",{className:"settings-integration-text",children:[(0,dr.jsx)("span",{className:"settings-integration-name",children:"Google Calendar"}),h.google?(0,dr.jsxs)("span",{className:"settings-integration-status connected",children:[(0,dr.jsx)("span",{className:"settings-status-dot"}),"\u05de\u05d7\u05d5\u05d1\u05e8 \u05d5\u05e4\u05e2\u05d9\u05dc",(null===(t=v.google)||void 0===t?void 0:t.lastSync)&&(0,dr.jsxs)("span",{className:"settings-last-sync",children:["\xb7 \u05e1\u05d5\u05e0\u05db\u05e8\u05df ",w(v.google.lastSync)]})]}):id?(0,dr.jsx)("span",{className:"settings-integration-status",children:"\u05dc\u05d0 \u05de\u05d7\u05d5\u05d1\u05e8"}):(0,dr.jsxs)("span",{className:"settings-integration-status pending",children:[(0,dr.jsx)("span",{className:"settings-status-dot pending"}),"\u05d9\u05d4\u05d9\u05d4 \u05d6\u05de\u05d9\u05df \u05d1\u05e7\u05e8\u05d5\u05d1"]})]})]}),h.google?(0,dr.jsx)("button",{className:"settings-btn settings-btn-disconnect",onClick:()=>b("google"),children:"\u05e0\u05ea\u05e7"}):(0,dr.jsx)("button",{className:"settings-btn ".concat(id?"settings-btn-connect":"settings-btn-pending"),onClick:()=>{if(!ad)return void cr({title:"\ud83d\udd27 \u05d1\u05e7\u05e8\u05d5\u05d1",description:"\u05d7\u05d9\u05d1\u05d5\u05e8 Google Calendar \u05d9\u05d4\u05d9\u05d4 \u05d6\u05de\u05d9\u05df \u05d1\u05e7\u05e8\u05d5\u05d1. \u05e0\u05e2\u05d3\u05db\u05df \u05d0\u05d5\u05ea\u05da!"});const e="".concat(window.location.origin,"/auth/callback/google"),t=encodeURIComponent("https://www.googleapis.com/auth/calendar.readonly"),n=crypto.randomUUID();sessionStorage.setItem("oauth_state",n);const r="https://accounts.google.com/o/oauth2/v2/auth?"+"client_id=".concat(ad)+"&redirect_uri=".concat(encodeURIComponent(e))+"&response_type=code"+"&scope=".concat(t)+"&state=".concat(n)+"&access_type=offline&prompt=consent";window.location.href=r},disabled:p,children:id?"\u05d7\u05d1\u05e8":"\u05d1\u05e7\u05e8\u05d5\u05d1 \u2728"})]}),(0,dr.jsxs)("div",{className:"settings-integration ".concat(h.microsoft?"settings-integration-connected":""," ").concat(od||h.microsoft?"":"settings-integration-pending"),children:[(0,dr.jsxs)("div",{className:"settings-integration-info",children:[(0,dr.jsx)("span",{className:"settings-integration-icon",children:(0,dr.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:[(0,dr.jsx)("path",{fill:"#0078D4",d:"M21.17 2H7.83A1.83 1.83 0 0 0 6 3.83v3.51l8 3.07 8-3.07V3.83A1.83 1.83 0 0 0 21.17 2z"}),(0,dr.jsx)("path",{fill:"#0364B8",d:"M22 8.61l-8 3.07-8-3.07v8.56A1.83 1.83 0 0 0 7.83 19h13.34A1.83 1.83 0 0 0 23 17.17V8.61z"}),(0,dr.jsx)("path",{fill:"#28A8EA",d:"M6 7.34v11.49l-4.83-2.9A1 1 0 0 1 .67 15V6.9a1 1 0 0 1 1.5-.87L6 7.34z"})]})}),(0,dr.jsxs)("div",{className:"settings-integration-text",children:[(0,dr.jsx)("span",{className:"settings-integration-name",children:"Outlook Calendar"}),h.microsoft?(0,dr.jsxs)("span",{className:"settings-integration-status connected",children:[(0,dr.jsx)("span",{className:"settings-status-dot"}),"\u05de\u05d7\u05d5\u05d1\u05e8 \u05d5\u05e4\u05e2\u05d9\u05dc",(null===(n=v.microsoft)||void 0===n?void 0:n.lastSync)&&(0,dr.jsxs)("span",{className:"settings-last-sync",children:["\xb7 \u05e1\u05d5\u05e0\u05db\u05e8\u05df ",w(v.microsoft.lastSync)]})]}):od?(0,dr.jsx)("span",{className:"settings-integration-status",children:"\u05dc\u05d0 \u05de\u05d7\u05d5\u05d1\u05e8"}):(0,dr.jsxs)("span",{className:"settings-integration-status pending",children:[(0,dr.jsx)("span",{className:"settings-status-dot pending"}),"\u05d9\u05d4\u05d9\u05d4 \u05d6\u05de\u05d9\u05df \u05d1\u05e7\u05e8\u05d5\u05d1"]})]})]}),h.microsoft?(0,dr.jsx)("button",{className:"settings-btn settings-btn-disconnect",onClick:()=>b("microsoft"),children:"\u05e0\u05ea\u05e7"}):(0,dr.jsx)("button",{className:"settings-btn ".concat(od?"settings-btn-connect":"settings-btn-pending"),onClick:()=>{if(!sd)return void cr({title:"\ud83d\udd27 \u05d1\u05e7\u05e8\u05d5\u05d1",description:"\u05d7\u05d9\u05d1\u05d5\u05e8 Outlook \u05d9\u05d4\u05d9\u05d4 \u05d6\u05de\u05d9\u05df \u05d1\u05e7\u05e8\u05d5\u05d1. \u05e0\u05e2\u05d3\u05db\u05df \u05d0\u05d5\u05ea\u05da!"});const e="".concat(window.location.origin,"/auth/callback/microsoft"),t=encodeURIComponent("Calendars.Read offline_access"),n=crypto.randomUUID();sessionStorage.setItem("oauth_state",n);const r="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?"+"client_id=".concat(sd)+"&redirect_uri=".concat(encodeURIComponent(e))+"&response_type=code"+"&scope=".concat(t)+"&state=".concat(n);window.location.href=r},disabled:p,children:od?"\u05d7\u05d1\u05e8":"\u05d1\u05e7\u05e8\u05d5\u05d1 \u2728"})]})]}),(!id||!od)&&(0,dr.jsxs)("div",{className:"settings-info-banner",children:[(0,dr.jsx)("span",{className:"settings-info-icon",children:"\ud83d\udca1"}),(0,dr.jsx)("p",{children:"\u05d7\u05d9\u05d1\u05d5\u05e8\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd \u05d1\u05d3\u05e8\u05da! \u05d1\u05e8\u05d2\u05e2 \u05e9\u05d9\u05d4\u05d9\u05d5 \u05de\u05d5\u05db\u05e0\u05d9\u05dd, \u05ea\u05e7\u05d1\u05dc \u05d4\u05ea\u05e8\u05d0\u05d4 \u05d5\u05ea\u05d5\u05db\u05dc \u05dc\u05d7\u05d1\u05e8 \u05d1\u05dc\u05d7\u05d9\u05e6\u05d4 \u05d0\u05d7\u05ea."})]})]}),(0,dr.jsxs)("section",{className:"settings-section",children:[(0,dr.jsx)("div",{className:"settings-section-header",children:(0,dr.jsx)("h3",{children:"\ud83c\udfa8 \u05d4\u05e2\u05d3\u05e4\u05d5\u05ea \u05ea\u05e6\u05d5\u05d2\u05d4"})}),(0,dr.jsxs)("div",{className:"settings-preferences",children:[(0,dr.jsxs)("div",{className:"settings-preference-item",children:[(0,dr.jsxs)("div",{className:"settings-preference-info",children:[(0,dr.jsx)("span",{className:"settings-preference-label",children:"\u05de\u05e6\u05d1 \u05ea\u05e6\u05d5\u05d2\u05d4"}),(0,dr.jsx)("span",{className:"settings-preference-desc",children:"\u05d1\u05d4\u05d9\u05e8 / \u05db\u05d4\u05d4"})]}),(0,dr.jsx)("span",{className:"settings-preference-value",children:"\u05de\u05e9\u05ea\u05de\u05e9 \u05d1\u05de\u05e2\u05e8\u05db\u05ea \ud83d\udda5\ufe0f"})]}),(0,dr.jsxs)("div",{className:"settings-preference-item",children:[(0,dr.jsxs)("div",{className:"settings-preference-info",children:[(0,dr.jsx)("span",{className:"settings-preference-label",children:"\u05db\u05d9\u05d5\u05d5\u05df \u05d8\u05e7\u05e1\u05d8"}),(0,dr.jsx)("span",{className:"settings-preference-desc",children:"\u05e2\u05d1\u05e8\u05d9\u05ea \u05de\u05d9\u05de\u05d9\u05df \u05dc\u05e9\u05de\u05d0\u05dc"})]}),(0,dr.jsx)("span",{className:"settings-preference-value",children:"RTL \u2713"})]})]})]}),c&&(0,dr.jsxs)("section",{className:"settings-section",children:[(0,dr.jsx)("div",{className:"settings-section-header",children:(0,dr.jsx)("h3",{children:"\ud83d\udc64 \u05d7\u05e9\u05d1\u05d5\u05df"})}),(0,dr.jsxs)("div",{className:"settings-account",children:[(0,dr.jsxs)("div",{className:"settings-account-info",children:[(0,dr.jsx)("span",{className:"settings-account-avatar",children:(null===(a=c.email)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.toUpperCase())||"U"}),(0,dr.jsxs)("div",{className:"settings-account-details",children:[(0,dr.jsx)("span",{className:"settings-account-name",children:(null===(i=c.user_metadata)||void 0===i?void 0:i.full_name)||(null===(o=c.email)||void 0===o?void 0:o.split("@")[0])}),(0,dr.jsx)("span",{className:"settings-email",children:c.email})]})]}),(0,dr.jsx)("button",{className:"settings-btn settings-btn-danger",onClick:async()=>{await d(),window.location.reload()},children:"\u05d4\u05ea\u05e0\u05ea\u05e7"})]})]}),(0,dr.jsxs)("footer",{className:"settings-footer",children:[(0,dr.jsx)("span",{className:"settings-version",children:"Life OS v0.1.0"}),(0,dr.jsx)("span",{className:"settings-built",children:"\u05d1\u05e0\u05d5\u05d9 \u05e2\u05dd \u2764\ufe0f \u05dc\u05d3\u05df"})]})]})]})})};const cd=function(e){let{provider:t}=e;const[n,a]=(0,r.useState)("processing"),[s,i]=(0,r.useState)(null),{user:o}=td(),l=new URLSearchParams(window.location.search);(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=l.get("code"),n=l.get("state");if(l.get("error"))throw new Error(l.get("error_description")||"OAuth authorization failed");if(!e)throw new Error("No authorization code received");if(n!==sessionStorage.getItem("oauth_state"))throw new Error("Invalid state parameter - possible CSRF attack");sessionStorage.removeItem("oauth_state");const r=t||(window.location.pathname.includes("google")?"google":window.location.pathname.includes("microsoft")?"microsoft":null);if(!r)throw new Error("Unknown OAuth provider");if(!Xn())throw new Error("Supabase not configured");const{data:s,error:i}=await Yn.functions.invoke("oauth-exchange",{body:{code:e,provider:r,redirectUri:"".concat(window.location.origin,"/auth/callback/").concat(r)}});if(i)throw i;if(null!==s&&void 0!==s&&s.error)throw new Error(s.error);const{error:c}=await Yn.from("user_connections").upsert({user_id:(null===o||void 0===o?void 0:o.id)||"dan",provider:r,access_token:s.access_token,refresh_token:s.refresh_token,expires_at:s.expires_at,email:s.email,connected_at:(new Date).toISOString()},{onConflict:"user_id,provider"});if(c)throw c;a("success"),cr({title:"\u05de\u05d7\u05d5\u05d1\u05e8!",description:"".concat("google"===r?"Google Calendar":"Outlook"," \u05d7\u05d5\u05d1\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4")}),setTimeout(()=>{window.location.href="/?mode=command"},2e3)}catch(Wh){console.error("OAuth callback error:",Wh),a("error"),i(Wh.message),cr({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",description:Wh.message,variant:"destructive"})}};return(0,dr.jsx)("div",{className:"oauth-callback",children:(0,dr.jsxs)("div",{className:"oauth-callback-card",children:["processing"===n&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("div",{className:"oauth-spinner"}),(0,dr.jsx)("h2",{children:"\u05de\u05d7\u05d1\u05e8 \u05d0\u05ea \u05d4\u05dc\u05d5\u05d7 \u05e9\u05e0\u05d4..."}),(0,dr.jsx)("p",{children:"\u05e8\u05d2\u05e2 \u05d0\u05d7\u05d3"})]}),"success"===n&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("div",{className:"oauth-success",children:"\u2713"}),(0,dr.jsx)("h2",{children:"\u05de\u05d7\u05d5\u05d1\u05e8 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4!"}),(0,dr.jsx)("p",{children:"\u05d7\u05d5\u05d6\u05e8 \u05dc\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4..."})]}),"error"===n&&(0,dr.jsxs)(dr.Fragment,{children:[(0,dr.jsx)("div",{className:"oauth-error",children:"\u2715"}),(0,dr.jsx)("h2",{children:"\u05de\u05e9\u05d4\u05d5 \u05d4\u05e9\u05ea\u05d1\u05e9"}),(0,dr.jsx)("p",{children:s}),(0,dr.jsx)("button",{className:"oauth-retry",onClick:()=>window.location.href="/",children:"\u05d7\u05d6\u05d5\u05e8 \u05dc\u05d0\u05e4\u05dc\u05d9\u05e7\u05e6\u05d9\u05d4"})]})]})})};function ud(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function dd(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function hd(e,t){return e.get(dd(e,t))}function fd(e,t,n){return e.set(dd(e,t),n),n}const pd=["children"],md=["children"];function vd(e){const t=gd(e),n=r.forwardRef((e,n)=>{const{children:a}=e,s=jr(e,pd),i=r.Children.toArray(a),o=i.find(wd);if(o){const e=o.props.children,a=i.map(t=>t===o?r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null:t);return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null}))}return(0,dr.jsx)(t,u(u({},s),{},{ref:n,children:a}))});return n.displayName="".concat(e,".Slot"),n}function gd(e){const t=r.forwardRef((e,t)=>{const{children:n}=e,a=jr(e,md);if(r.isValidElement(n)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(n),s=function(e,t){const n=u({},t);for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=function(){const e=s(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=u(u({},a),s):"className"===r&&(n[r]=[a,s].filter(Boolean).join(" "))}return u(u({},e),n)}(a,n.props);return n.type!==r.Fragment&&(s.ref=t?ji(t,e):e),r.cloneElement(n,s)}return r.Children.count(n)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}var yd=Symbol("radix.slottable");var bd;function wd(e){return r.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===yd}const xd=["scope","children"];var kd=new WeakMap;bd=new WeakMap,Map;function _d(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=Sd(t),a=r>=0?r:n+r;return a<0||a>=n?-1:a}(e,t);return-1===n?void 0:e[n]}function Sd(e){return e!==e||0===e?0:Math.trunc(e)}var jd=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Nd=r.forwardRef((e,t)=>(0,dr.jsx)(Ki.span,u(u({},e),{},{ref:t,style:u(u({},jd),e.style)})));Nd.displayName="VisuallyHidden";const Ed=["__scopeToast","hotkey","label"],Cd=["__scopeToast","onFocusFromOutsideViewport"],Td=["forceMount","open","defaultOpen","onOpenChange"],Rd=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],Od=["__scopeToast","children"],Pd=["__scopeToast"],Id=["__scopeToast"],Ad=["altText"],Dd=["__scopeToast"],Ld=["__scopeToast","altText"];var Md="ToastProvider",[zd,Ud,Fd]=function(e){const t=e+"CollectionProvider",[n,a]=Ti(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:n}=e,a=r.useRef(null),i=r.useRef(new Map).current;return(0,dr.jsx)(s,{scope:t,itemMap:i,collectionRef:a,children:n})};o.displayName=t;const l=e+"CollectionSlot",c=vd(l),d=r.forwardRef((e,t)=>{const{scope:n,children:r}=e,a=Ni(t,i(l,n).collectionRef);return(0,dr.jsx)(c,{ref:a,children:r})});d.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",p=vd(h),m=r.forwardRef((e,t)=>{const{scope:n,children:a}=e,s=jr(e,xd),o=r.useRef(null),l=Ni(t,o),c=i(h,n);return r.useEffect(()=>(c.itemMap.set(o,u({ref:o},s)),()=>{c.itemMap.delete(o)})),(0,dr.jsx)(p,u(u({},{[f]:""}),{},{ref:l,children:a}))});return m.displayName=h,[{Provider:o,Slot:d,ItemSlot:m},function(t){const n=i(e+"CollectionConsumer",t);return r.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(f,"]")));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},a]}("Toast"),[Bd,qd]=Ti("Toast",[Fd]),[Wd,Kd]=Bd(Md),Vd=e=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=r.useState(null),[u,d]=r.useState(0),h=r.useRef(!1),f=r.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(Md,"`. Expected non-empty `string`.")),(0,dr.jsx)(zd.Provider,{scope:t,children:(0,dr.jsx)(Wd,{scope:t,label:n,duration:a,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:r.useCallback(()=>d(e=>e+1),[]),onToastRemove:r.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Vd.displayName=Md;var Hd="ToastViewport",Jd=["F8"],Gd="toast.viewportPause",$d="toast.viewportResume",Yd=r.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:a=Jd,label:s="Notifications ({hotkey})"}=e,i=jr(e,Ed),o=Kd(Hd,n),l=Ud(n),c=r.useRef(null),d=r.useRef(null),h=r.useRef(null),f=r.useRef(null),p=Ni(t,f,o.onViewportChange),m=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;r.useEffect(()=>{const e=e=>{var t;const n=0!==a.length&&a.every(t=>e[t]||e.code===t);n&&(null===(t=f.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),r.useEffect(()=>{const e=c.current,t=f.current;if(v&&e&&t){const n=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(Gd);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent($d);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},a=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",a),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[v,o.isClosePausedRef]);const g=r.useCallback(e=>{let{tabbingDirection:t}=e;const n=l().map(e=>{const n=e.ref.current,r=[n,...mh(n)];return"forwards"===t?r:r.reverse()});return("forwards"===t?n.reverse():n).flat()},[l]);return r.useEffect(()=>{const e=f.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,i=t.shiftKey;var r;if(t.target===e&&i)return void(null===(r=d.current)||void 0===r||r.focus());const o=g({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===n);var a,s;if(vh(o.slice(l+1)))t.preventDefault();else i?null===(a=d.current)||void 0===a||a.focus():null===(s=h.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,g]),(0,dr.jsxs)(zo,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&(0,dr.jsx)(Qd,{ref:d,onFocusFromOutsideViewport:()=>{vh(g({tabbingDirection:"forwards"}))}}),(0,dr.jsx)(zd.Slot,{scope:n,children:(0,dr.jsx)(Ki.ol,u(u({tabIndex:-1},i),{},{ref:p}))}),v&&(0,dr.jsx)(Qd,{ref:h,onFocusFromOutsideViewport:()=>{vh(g({tabbingDirection:"backwards"}))}})]})});Yd.displayName=Hd;var Xd="ToastFocusProxy",Qd=r.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r}=e,a=jr(e,Cd),s=Kd(Xd,n);return(0,dr.jsx)(Nd,u(u({tabIndex:0},a),{},{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null!==(t=s.viewport)&&void 0!==t&&t.contains(n))&&r()}}))});Qd.displayName=Xd;var Zd="Toast",eh=r.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s}=e,i=jr(e,Td),[o,l]=Ai({prop:r,defaultProp:null===a||void 0===a||a,onChange:s,caller:Zd});return(0,dr.jsx)(Di,{present:n||o,children:(0,dr.jsx)(rh,u(u({open:o},i),{},{ref:t,onClose:()=>l(!1),onPause:No(e.onPause),onResume:No(e.onResume),onSwipeStart:Oi(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Oi(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(n,"px"))}),onSwipeCancel:Oi(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Oi(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(t,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(n,"px")),l(!1)})}))})});eh.displayName=Zd;var[th,nh]=Bd(Zd,{onClose(){}}),rh=r.forwardRef((e,t)=>{const{__scopeToast:n,type:a="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m}=e,v=jr(e,Rd),g=Kd(Zd,n),[y,b]=r.useState(null),w=Ni(t,e=>b(e)),x=r.useRef(null),k=r.useRef(null),_=s||g.duration,S=r.useRef(0),j=r.useRef(_),N=r.useRef(0),{onToastAdd:E,onToastRemove:C}=g,T=No(()=>{var e;(null===y||void 0===y?void 0:y.contains(document.activeElement))&&(null===(e=g.viewport)||void 0===e||e.focus()),o()}),R=r.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(N.current),S.current=(new Date).getTime(),N.current=window.setTimeout(T,e))},[T]);r.useEffect(()=>{const e=g.viewport;if(e){const t=()=>{R(j.current),null===d||void 0===d||d()},n=()=>{const e=(new Date).getTime()-S.current;j.current=j.current-e,window.clearTimeout(N.current),null===c||void 0===c||c()};return e.addEventListener(Gd,n),e.addEventListener($d,t),()=>{e.removeEventListener(Gd,n),e.removeEventListener($d,t)}}},[g.viewport,_,c,d,R]),r.useEffect(()=>{i&&!g.isClosePausedRef.current&&R(_)},[i,_,g.isClosePausedRef,R]),r.useEffect(()=>(E(),()=>C()),[E,C]);const O=r.useMemo(()=>y?hh(y):null,[y]);return g.viewport?(0,dr.jsxs)(dr.Fragment,{children:[O&&(0,dr.jsx)(ah,{__scopeToast:n,role:"status","aria-live":"foreground"===a?"assertive":"polite",children:O}),(0,dr.jsx)(th,{scope:n,onClose:T,children:Nr.createPortal((0,dr.jsx)(zd.ItemSlot,{scope:n,children:(0,dr.jsx)(Mo,{asChild:!0,onEscapeKeyDown:Oi(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,dr.jsx)(Ki.li,u(u({tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection},v),{},{ref:w,style:u({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Oi(e.onKeyDown,e=>{"Escape"===e.key&&(null===l||void 0===l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Oi(e.onPointerDown,e=>{0===e.button&&(x.current={x:e.clientX,y:e.clientY})}),onPointerMove:Oi(e.onPointerMove,e=>{if(!x.current)return;const t=e.clientX-x.current.x,n=e.clientY-x.current.y,r=Boolean(k.current),a=["left","right"].includes(g.swipeDirection),s=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,i=a?s(0,t):0,o=a?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:i,y:o},u={originalEvent:e,delta:c};r?(k.current=c,fh("toast.swipeMove",f,u,{discrete:!1})):ph(c,g.swipeDirection,l)?(k.current=c,fh("toast.swipeStart",h,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(x.current=null)}),onPointerUp:Oi(e.onPointerUp,e=>{const t=k.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),k.current=null,x.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};ph(t,g.swipeDirection,g.swipeThreshold)?fh("toast.swipeEnd",m,r,{discrete:!0}):fh("toast.swipeCancel",p,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),g.viewport)})]}):null}),ah=e=>{const{__scopeToast:t,children:n}=e,a=jr(e,Od),s=Kd(Zd,t),[i,o]=r.useState(!1),[l,c]=r.useState(!1);return function(){const e=No(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{});Pi(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}(()=>o(!0)),r.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:(0,dr.jsx)(Xo,{asChild:!0,children:(0,dr.jsx)(Nd,u(u({},a),{},{children:i&&(0,dr.jsxs)(dr.Fragment,{children:[s.label," ",n]})}))})},sh=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=jr(e,Pd);return(0,dr.jsx)(Ki.div,u(u({},r),{},{ref:t}))});sh.displayName="ToastTitle";var ih=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=jr(e,Id);return(0,dr.jsx)(Ki.div,u(u({},r),{},{ref:t}))});ih.displayName="ToastDescription";var oh="ToastAction",lh=r.forwardRef((e,t)=>{const{altText:n}=e,r=jr(e,Ad);return n.trim()?(0,dr.jsx)(dh,{altText:n,asChild:!0,children:(0,dr.jsx)(uh,u(u({},r),{},{ref:t}))}):(console.error("Invalid prop `altText` supplied to `".concat(oh,"`. Expected non-empty `string`.")),null)});lh.displayName=oh;var ch="ToastClose",uh=r.forwardRef((e,t)=>{const{__scopeToast:n}=e,r=jr(e,Dd),a=nh(ch,n);return(0,dr.jsx)(dh,{asChild:!0,children:(0,dr.jsx)(Ki.button,u(u({type:"button"},r),{},{ref:t,onClick:Oi(e.onClick,a.onClose)}))})});uh.displayName=ch;var dh=r.forwardRef((e,t)=>{const{__scopeToast:n,altText:r}=e,a=jr(e,Ld);return(0,dr.jsx)(Ki.div,u(u({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},a),{},{ref:t}))});function hh(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...hh(e))}}),t}function fh(e,t,n,r){let{discrete:a}=r;const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?Vi(s,i):s.dispatchEvent(i)}var ph=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return"left"===t||"right"===t?s&&r>n:!s&&a>n};function mh(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vh(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var gh=Yd,yh=eh,bh=sh,wh=ih,xh=lh,kh=uh;const _h=["className"],Sh=["className","variant"],jh=["className"],Nh=["className"],Eh=["className"],Ch=["className"],Th=Vd,Rh=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,_h);return(0,dr.jsx)(gh,u({ref:t,className:fi("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n)},r))});Rh.displayName=gh.displayName;const Oh=hi("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ph=r.forwardRef((e,t)=>{let{className:n,variant:r}=e,a=jr(e,Sh);return(0,dr.jsx)(yh,u({ref:t,className:fi(Oh({variant:r}),n)},a))});Ph.displayName=yh.displayName;r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,jh);return(0,dr.jsx)(xh,u({ref:t,className:fi("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n)},r))}).displayName=xh.displayName;const Ih=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,Nh);return(0,dr.jsx)(kh,u(u({ref:t,className:fi("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":""},r),{},{children:(0,dr.jsx)(Xc,{className:"h-4 w-4"})}))});Ih.displayName=kh.displayName;const Ah=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,Eh);return(0,dr.jsx)(bh,u({ref:t,className:fi("text-sm font-semibold",n)},r))});Ah.displayName=bh.displayName;const Dh=r.forwardRef((e,t)=>{let{className:n}=e,r=jr(e,Ch);return(0,dr.jsx)(wh,u({ref:t,className:fi("text-sm opacity-90",n)},r))});Dh.displayName=wh.displayName;const Lh=["id","title","description","action"];function Mh(){const{toasts:e}=ur();return(0,dr.jsxs)(Th,{children:[e.map(function(e){let{id:t,title:n,description:r,action:a}=e,s=jr(e,Lh);return(0,dr.jsxs)(Ph,u(u({},s),{},{children:[(0,dr.jsxs)("div",{className:"grid gap-1",children:[n&&(0,dr.jsx)(Ah,{children:n}),r&&(0,dr.jsx)(Dh,{children:r})]}),a,(0,dr.jsx)(Ih,{})]}),t)}),(0,dr.jsx)(Rh,{})]})}const zh=u({command:{label:"\u05e4\u05d9\u05e7\u05d5\u05d3",icon:"\u26a1"},transparency:{label:"\u05de\u05d5\u05d7",icon:"\ud83e\udde0"},workbench:{label:"\u05e1\u05d3\u05e0\u05d4",icon:"\ud83d\udd27"},horizon:{label:"\u05d0\u05d5\u05e4\u05e7",icon:"\ud83d\udd2d"},"pa-inbox":{label:"\u05ea\u05d9\u05d1\u05ea PA",icon:"\ud83d\udce5"}},"localhost"===window.location.hostname&&{"golden-demo":{label:"Golden",icon:"\u2728"}});function Uh(){return new Date((new Date).toLocaleString("en-US",{timeZone:"Asia/Nicosia"})).getHours()}const Fh="true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://frbdzhddqbkuzwaqwvwi.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyYmR6aGRkcWJrdXp3YXF3dndpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MTYxNzEsImV4cCI6MjA4NTA5MjE3MX0.yLOrB38FQ3F_6r7wpVq2z8aVdOjSFuea9nyqP6xzkKE"}.REACT_APP_AUTH_ENABLED;function Bh(){const{user:e,loading:t}=td(),[n,a]=(0,r.useState)(()=>new URLSearchParams(window.location.search).get("mode")||"command"),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(()=>"dark"===localStorage.getItem("theme"));(0,r.useEffect)(()=>{d?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",d?"dark":"light")},[d]),(0,r.useEffect)(()=>{const e=()=>{Uh()>=21&&!o&&!s&&i(!0)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[o,s]),(0,r.useEffect)(()=>{const e=()=>{const e=new URLSearchParams(window.location.search);a(e.get("mode")||"command")};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);const f=window.location.pathname;if(f.includes("/auth/callback/")){const e=f.includes("google")?"google":f.includes("microsoft")?"microsoft":null;return(0,dr.jsx)(cd,{provider:e})}if(Fh&&!t&&!e)return(0,dr.jsx)(rd,{onSuccess:()=>window.location.reload()});if(Fh&&t)return(0,dr.jsx)("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,dr.jsx)("div",{className:"cmd-pulse"})});return(0,dr.jsxs)("div",{className:"app",children:[(()=>{switch(n){case"transparency":return(0,dr.jsx)(Sr,{});case"workbench":return(0,dr.jsx)(Pu,{});case"horizon":return(0,dr.jsx)(Uu,{});case"pa-inbox":return(0,dr.jsx)(Fu,{});case"golden-demo":return(0,dr.jsx)(Zu,{});default:return(0,dr.jsx)(kr,{})}})(),(0,dr.jsx)("nav",{className:"mode-switcher",children:Object.entries(zh).map(e=>{let[t,{label:r,icon:s}]=e;return(0,dr.jsxs)("button",{className:"mode-btn ".concat(n===t?"mode-active":""),onClick:()=>(e=>{a(e);const t=new URL(window.location);"command"===e?t.searchParams.delete("mode"):t.searchParams.set("mode",e),window.history.pushState({},"",t)})(t),children:[(0,dr.jsx)("span",{className:"mode-icon",children:s}),(0,dr.jsx)("span",{className:"mode-label",children:r})]},t)})}),(0,dr.jsx)("button",{className:"settings-trigger",onClick:()=>u(!0),title:"\u05d4\u05d2\u05d3\u05e8\u05d5\u05ea",children:"\u2699\ufe0f"}),(0,dr.jsx)("button",{className:"theme-toggle",onClick:()=>h(!d),title:d?"Switch to Light Mode":"Switch to Dark Mode",children:d?"\u2600\ufe0f":"\ud83c\udf19"}),Uh()>=21&&!s&&(0,dr.jsx)("button",{className:"day-close-trigger",onClick:()=>i(!0),title:"Day Close",children:"\ud83c\udf19"}),s&&(0,dr.jsx)(qu,{onClose:()=>{i(!1),l(!0)}}),c&&(0,dr.jsx)(ld,{onClose:()=>u(!1)}),(0,dr.jsx)(Ku,{}),(0,dr.jsx)(Mh,{})]})}const qh=function(){return(0,dr.jsx)(nd,{children:(0,dr.jsx)(Bh,{})})};s.createRoot(document.getElementById("root")).render((0,dr.jsx)(r.StrictMode,{children:(0,dr.jsx)(qh,{})}))})();
//# sourceMappingURL=main.d87ae7ee.js.map